var TcHmi;!function(e){let t;!function(t){let i;!function(t){class i extends e.Controls.System.TcHmiControl{constructor(e,t,i){super(e,t,i),this.__onMousedownHourUpDestroyEvent=null,this.__onMousedownHourDownDestroyEvent=null,this.__onMousedownMinuteUpDestroyEvent=null,this.__onMousedownMinuteDownDestroyEvent=null,this.__onMousedownSecondUpDestroyEvent=null,this.__onMousedownSecondDownDestroyEvent=null,this.__onMousedownMillisecondUpDestroyEvent=null,this.__onMousedownMillisecondDownDestroyEvent=null,this.__onPressedOkDestroyEvent=null,this.__onPressedCancelDestroyEvent=null,this.__onTextChangedHourDestroyEvent=null,this.__onTextChangedMinuteDestroyEvent=null,this.__onTextChangedSecondDestroyEvent=null,this.__onTextChangedMillisecondDestroyEvent=null,this.__onUserInteractionFinishedHourDestroyEvent=null,this.__onUserInteractionFinishedMinuteDestroyEvent=null,this.__onUserInteractionFinishedSecondDestroyEvent=null,this.__onUserInteractionFinishedMillisecondDestroyEvent=null,this.__baseControls={},this.__monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],this.__internalDateObject={year:0,month:0,day:0,hour:0,minute:0,second:0,millisecond:0},this.__isPressedTimeButtons=!1,this.__intervalTimerTimeButtons=null,this.__isPressedCalendar=!1,this.__intervalTimerCalendar=0,this.__utcOffset=0,this.__mousedownHandler=this.__onMousedown(),this.__mousedownCalendarHandler=this.__onMousedownCalendar(),this.__mouseupHandler=this.__onMouseup()}__previnit(){this.__elementDTPTemplate=$('<div class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-template-overlay tchmi-box"></div>');let t=$('<div class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-selected-area-template tchmi-box"></div>'),i=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiTextblock",this.__id+"_dateValue",{"data-tchmi-text-horizontal-alignment":"Center","data-tchmi-text-vertical-alignment":"Center","data-tchmi-text-font-size":15,"data-tchmi-text":"01. Januar 1970, 00:00:00:000"},this);if(void 0===i)throw new Error("Needed Textblock could not be instantiated");i.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-template-value","tchmi-date-time-picker-template-value"),this.__baseControls[this.__id+"_dateValue"]=i,t.append(i.getElement()[0]);let n=$('<div class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-choice-area-template"></div>');this.__elementCalendarTemplate=$('<div class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template tchmi-box"></div>'),this.__elementCalendarTemplate.append(this.createCalendar(1970,1,1));let o=$('<div class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-and-button-area-template"></div>'),a=$('<div class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-area-template tchmi-box"></div>');a.append(this.createTime(0,0,0,0)),o.append(a);let s=$('<div class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-button-area-template tchmi-box"></div>'),r=$('<div class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-button-template"></div>'),l=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_cancelButton",{"data-tchmi-text":"Cancel"},this);if(void 0===l)throw new Error("Needed Button could not be instantiated");l.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-template-action-button","tchmi-date-time-picker-template-action-button"),r.append(l.getElement()[0]),this.__baseControls[this.__id+"_cancelButton"]=l;let _=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_okButton",{"data-tchmi-text":"Ok"},this);if(void 0===_)throw new Error("Needed Button could not be instantiated");_.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-template-action-button","tchmi-date-time-picker-template-action-button"),r.append(_.getElement()[0]),this.__baseControls[this.__id+"_okButton"]=_,_.setText("Ok"),s.append(r),o.append(s),n.append(this.__elementCalendarTemplate),n.append(o),this.__elementDTPTemplate.append(t),this.__elementDTPTemplate.append(n),super.__previnit()}__init(){super.__init();const e={passive:!0,capture:!1};this.__element[0].addEventListener("mousedown",this.__mousedownHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&e),this.__elementCalendarTemplate[0].addEventListener("mousedown",this.__mousedownCalendarHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&e)}__attach(){super.__attach();document.addEventListener("mouseup",this.__mouseupHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!0,capture:!1}),this.__onMousedownHourUpDestroyEvent=e.EventProvider.register(this.__id+"_hourUpButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownHourDownDestroyEvent=e.EventProvider.register(this.__id+"_hourDownButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownMinuteUpDestroyEvent=e.EventProvider.register(this.__id+"_minuteUpButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownMinuteDownDestroyEvent=e.EventProvider.register(this.__id+"_minuteDownButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownSecondUpDestroyEvent=e.EventProvider.register(this.__id+"_secondUpButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownSecondDownDestroyEvent=e.EventProvider.register(this.__id+"_secondDownButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownMillisecondUpDestroyEvent=e.EventProvider.register(this.__id+"_millisecondUpButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownMillisecondDownDestroyEvent=e.EventProvider.register(this.__id+"_millisecondDownButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onPressedOkDestroyEvent=e.EventProvider.register(this.__id+"_okButton.onPressed",this.__onPressed()),this.__onPressedCancelDestroyEvent=e.EventProvider.register(this.__id+"_cancelButton.onPressed",this.__onPressed()),this.__onTextChangedHourDestroyEvent=e.EventProvider.register(this.__id+"_hourValueTextbox.onTextChanged",this.__onTextChanged()),this.__onTextChangedMinuteDestroyEvent=e.EventProvider.register(this.__id+"_minuteValueTextbox.onTextChanged",this.__onTextChanged()),this.__onTextChangedSecondDestroyEvent=e.EventProvider.register(this.__id+"_secondValueTextbox.onTextChanged",this.__onTextChanged()),this.__onTextChangedMillisecondDestroyEvent=e.EventProvider.register(this.__id+"_millisecondValueTextbox.onTextChanged",this.__onTextChanged()),this.__onUserInteractionFinishedHourDestroyEvent=e.EventProvider.register(this.__id+"_hourValueTextbox.onUserInteractionFinished",this.__onUserInteractionFinished()),this.__onUserInteractionFinishedMinuteDestroyEvent=e.EventProvider.register(this.__id+"_minuteValueTextbox.onUserInteractionFinished",this.__onUserInteractionFinished()),this.__onUserInteractionFinishedSecondDestroyEvent=e.EventProvider.register(this.__id+"_secondValueTextbox.onUserInteractionFinished",this.__onUserInteractionFinished()),this.__onUserInteractionFinishedMillisecondDestroyEvent=e.EventProvider.register(this.__id+"_millisecondValueTextbox.onUserInteractionFinished",this.__onUserInteractionFinished())}__detach(){super.__detach(),null!==this.__onMousedownHourUpDestroyEvent&&(this.__onMousedownHourUpDestroyEvent(),this.__onMousedownHourUpDestroyEvent=null),null!==this.__onMousedownHourDownDestroyEvent&&(this.__onMousedownHourDownDestroyEvent(),this.__onMousedownHourDownDestroyEvent=null),null!==this.__onMousedownMinuteUpDestroyEvent&&(this.__onMousedownMinuteUpDestroyEvent(),this.__onMousedownMinuteUpDestroyEvent=null),null!==this.__onMousedownMinuteDownDestroyEvent&&(this.__onMousedownMinuteDownDestroyEvent(),this.__onMousedownMinuteDownDestroyEvent=null),null!==this.__onMousedownSecondUpDestroyEvent&&(this.__onMousedownSecondUpDestroyEvent(),this.__onMousedownSecondUpDestroyEvent=null),null!==this.__onMousedownSecondDownDestroyEvent&&(this.__onMousedownSecondDownDestroyEvent(),this.__onMousedownSecondDownDestroyEvent=null),null!==this.__onMousedownMillisecondUpDestroyEvent&&(this.__onMousedownMillisecondUpDestroyEvent(),this.__onMousedownMillisecondUpDestroyEvent=null),null!==this.__onMousedownMillisecondDownDestroyEvent&&(this.__onMousedownMillisecondDownDestroyEvent(),this.__onMousedownMillisecondDownDestroyEvent=null),null!==this.__onPressedOkDestroyEvent&&(this.__onPressedOkDestroyEvent(),this.__onPressedOkDestroyEvent=null),null!==this.__onPressedCancelDestroyEvent&&(this.__onPressedCancelDestroyEvent(),this.__onPressedCancelDestroyEvent=null),null!==this.__onTextChangedHourDestroyEvent&&(this.__onTextChangedHourDestroyEvent(),this.__onTextChangedHourDestroyEvent=null),null!==this.__onTextChangedMinuteDestroyEvent&&(this.__onTextChangedMinuteDestroyEvent(),this.__onTextChangedMinuteDestroyEvent=null),null!==this.__onTextChangedSecondDestroyEvent&&(this.__onTextChangedSecondDestroyEvent(),this.__onTextChangedSecondDestroyEvent=null),null!==this.__onTextChangedMillisecondDestroyEvent&&(this.__onTextChangedMillisecondDestroyEvent(),this.__onTextChangedMillisecondDestroyEvent=null),null!==this.__onUserInteractionFinishedHourDestroyEvent&&(this.__onUserInteractionFinishedHourDestroyEvent(),this.__onUserInteractionFinishedHourDestroyEvent=null),null!==this.__onUserInteractionFinishedMinuteDestroyEvent&&(this.__onUserInteractionFinishedMinuteDestroyEvent(),this.__onUserInteractionFinishedMinuteDestroyEvent=null),null!==this.__onUserInteractionFinishedSecondDestroyEvent&&(this.__onUserInteractionFinishedSecondDestroyEvent(),this.__onUserInteractionFinishedSecondDestroyEvent=null),null!==this.__onUserInteractionFinishedMillisecondDestroyEvent&&(this.__onUserInteractionFinishedMillisecondDestroyEvent(),this.__onUserInteractionFinishedMillisecondDestroyEvent=null);document.removeEventListener("mouseup",this.__mouseupHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!0,capture:!1})}destroy(){if(this.__keepAlive)return;this.__intervalTimerCalendar&&(clearInterval(this.__intervalTimerCalendar),this.__intervalTimerCalendar=0);const e={passive:!0,capture:!1};this.__element[0].removeEventListener("mousedown",this.__mousedownHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&e),this.__elementCalendarTemplate[0].removeEventListener("mousedown",this.__mousedownCalendarHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&e),super.destroy()}__onMousedown(){return t=>{this.getIsEnabled()&&e.Access.checkAccess(this,"operate")&&this.openDateTimePicker()}}__onMousedownCalendar(){let t=this;return function(i){if(!t.getIsEnabled())return;if(!e.Access.checkAccess(t,"operate"))return;let n=$(i.target);if(t.__isPressedCalendar=!0,n.hasClass("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-month-prev")){let e=t.__internalDateObject.month-1;if(0===e){e=12;let i=t.__internalDateObject.year-1;if(i<1970)return;t.__internalDateObject.year=i}t.__internalDateObject.month=e,t.__elementCalendarTemplate.empty().append(t.createCalendar(t.__internalDateObject.year,t.__internalDateObject.month,t.__internalDateObject.day)),t.__updateHeaderDate(),t.__intervalTimerCalendar=setInterval((function(){if(t.__isPressedCalendar){let e=t.__internalDateObject.month-1;if(0===e){e=12;let i=t.__internalDateObject.year-1;if(i<1970)return;t.__internalDateObject.year=i}t.__internalDateObject.month=e,t.__elementCalendarTemplate.empty().append(t.createCalendar(t.__internalDateObject.year,t.__internalDateObject.month,t.__internalDateObject.day)),t.__updateHeaderDate()}}),400)}else if(n.hasClass("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-month-next")){let e=t.__internalDateObject.month+1;if(e>12){e=1;let i=t.__internalDateObject.year+1;if(i>9999)return;t.__internalDateObject.year=i}t.__internalDateObject.month=e,t.__elementCalendarTemplate.empty().append(t.createCalendar(t.__internalDateObject.year,t.__internalDateObject.month,t.__internalDateObject.day)),t.__updateHeaderDate(),t.__intervalTimerCalendar=setInterval((function(){if(t.__isPressedCalendar){let e=t.__internalDateObject.month+1;if(e>12){e=1;let i=t.__internalDateObject.year+1;if(i>9999)return;t.__internalDateObject.year=i}t.__internalDateObject.month=e,t.__elementCalendarTemplate.empty().append(t.createCalendar(t.__internalDateObject.year,t.__internalDateObject.month,t.__internalDateObject.day)),t.__updateHeaderDate()}}),400)}else if(n.hasClass("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-year-prev")){let e=t.__internalDateObject.year-1;e>=1970&&(t.__internalDateObject.year=e,t.__elementCalendarTemplate.empty().append(t.createCalendar(t.__internalDateObject.year,t.__internalDateObject.month,t.__internalDateObject.day)),t.__updateHeaderDate(),t.__intervalTimerCalendar=setInterval((function(){if(t.__isPressedCalendar){let e=t.__internalDateObject.year-1;e>=1970&&(t.__internalDateObject.year=e,t.__elementCalendarTemplate.empty().append(t.createCalendar(t.__internalDateObject.year,t.__internalDateObject.month,t.__internalDateObject.day)),t.__updateHeaderDate())}}),400))}else if(n.hasClass("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-year-next")){let e=t.__internalDateObject.year+1;e<=9999&&(t.__internalDateObject.year=e,t.__elementCalendarTemplate.empty().append(t.createCalendar(t.__internalDateObject.year,t.__internalDateObject.month,t.__internalDateObject.day)),t.__updateHeaderDate(),t.__intervalTimerCalendar=setInterval((function(){if(t.__isPressedCalendar){let e=t.__internalDateObject.year+1;e<=9999&&(t.__internalDateObject.year=e,t.__elementCalendarTemplate.empty().append(t.createCalendar(t.__internalDateObject.year,t.__internalDateObject.month,t.__internalDateObject.day)),t.__updateHeaderDate())}}),400))}else if(n.hasClass("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-day-element")){n.parent().children().removeClass("active"),n.addClass("active");let e=n[0].textContent;null!==e&&(t.__internalDateObject.day=parseInt(e,10),t.__updateHeaderDate())}}}__onMousedownTimeButtons(){let e=this;return function(t){if(e.__isPressedTimeButtons=!0,-1!==t.name.search("hourUp")){let t=e.__baseControls[e.__id+"_hourValue"];if(void 0!==t){let i=t,text=i.getText();if(void 0!==text){let t=text.trim();if(new RegExp("^-?[0-9]*$").test(t)){let t=parseInt(text,10);t<23&&(t++,i.setText(("00"+t).substring(Math.min((""+t).length,2))),t<=23&&t>=0&&(e.__internalDateObject.hour=t,e.__updateHeaderDate()),e.__intervalTimerTimeButtons=setInterval((function(){e.__isPressedTimeButtons&&(t=parseInt(i.getText(),10),t<23&&(t++,i.setText(("00"+t).substring(Math.min((""+t).length,2))),t<=23&&t>=0&&(e.__internalDateObject.hour=t,e.__updateHeaderDate())))}),150))}}}}else if(-1!==t.name.search("hourDown")){let t=e.__baseControls[e.__id+"_hourValue"];if(void 0!==t){let i=t,text=i.getText();if(void 0!==text){let t=text.trim();if(new RegExp("^-?[0-9]*$").test(t)){let t=parseInt(text,10);t>0&&(t--,i.setText(("00"+t).substring(Math.min((""+t).length,2))),t<=23&&t>=0&&(e.__internalDateObject.hour=t,e.__updateHeaderDate()),e.__intervalTimerTimeButtons=setInterval((function(){e.__isPressedTimeButtons&&t>0&&(t=parseInt(i.getText(),10),t--,i.setText(("00"+t).substring(Math.min((""+t).length,2))),t<=23&&t>=0&&(e.__internalDateObject.hour=t,e.__updateHeaderDate()))}),150))}}}}else if(-1!==t.name.search("minuteUp")){let t=e.__baseControls[e.__id+"_minuteValue"];if(void 0!==t){let i=t,text=i.getText();if(void 0!==text){let t=text.trim();if(new RegExp("^-?[0-9]*$").test(t)){let t=parseInt(text,10);t<59&&(t++,i.setText(("00"+t).substring(Math.min((""+t).length,2))),t<=59&&t>=0&&(e.__internalDateObject.minute=t,e.__updateHeaderDate()),e.__intervalTimerTimeButtons=setInterval((function(){e.__isPressedTimeButtons&&(t=parseInt(i.getText(),10),t<59&&(t++,i.setText(("00"+t).substring(Math.min((""+t).length,2))),t<=59&&t>=0&&(e.__internalDateObject.minute=t,e.__updateHeaderDate())))}),150))}}}}else if(-1!==t.name.search("minuteDown")){let t=e.__baseControls[e.__id+"_minuteValue"];if(void 0!==t){let i=t,text=i.getText();if(void 0!==text){let t=text.trim();if(new RegExp("^-?[0-9]*$").test(t)){let t=parseInt(text,10);t>0&&(t--,i.setText(("00"+t).substring(Math.min((""+t).length,2))),t<=59&&t>=0&&(e.__internalDateObject.minute=t,e.__updateHeaderDate()),e.__intervalTimerTimeButtons=setInterval((function(){e.__isPressedTimeButtons&&(t=parseInt(i.getText(),10),t>0&&(t--,i.setText(("00"+t).substring(Math.min((""+t).length,2))),t<=59&&t>=0&&(e.__internalDateObject.minute=t,e.__updateHeaderDate())))}),150))}}}}else if(-1!==t.name.search("millisecondUp")){let t=e.__baseControls[e.__id+"_millisecondValue"];if(void 0!==t){let i=t,text=i.getText();if(void 0!==text){let t=text.trim();if(new RegExp("^-?[0-9]*$").test(t)){let t=parseInt(text,10);t<999&&(t++,t>=0?i.setText(("000"+t).substring(Math.min((""+t).length,3))):i.setText(t.toString()),t<=999&&t>=0&&(e.__internalDateObject.millisecond=t,e.__updateHeaderDate()),e.__intervalTimerTimeButtons=setInterval((function(){e.__isPressedTimeButtons&&(t=parseInt(i.getText(),10),t<999&&(t++,t>=0?i.setText(("000"+t).substring(Math.min((""+t).length,3))):i.setText(t.toString()),t<=999&&t>=0&&(e.__internalDateObject.millisecond=t,e.__updateHeaderDate())))}),150))}}}}else if(-1!==t.name.search("millisecondDown")){let t=e.__baseControls[e.__id+"_millisecondValue"];if(void 0!==t){let i=t,text=i.getText();if(void 0!==text){let t=text.trim();if(new RegExp("^-?[0-9]*$").test(t)){let t=parseInt(text,10);t>0&&(t--,i.setText(("000"+t).substring(Math.min((""+t).length,3))),t<=999&&t>=0&&(e.__internalDateObject.millisecond=t,e.__updateHeaderDate()),e.__intervalTimerTimeButtons=setInterval((function(){e.__isPressedTimeButtons&&(t=parseInt(i.getText(),10),t>0&&(t--,i.setText(("000"+t).substring(Math.min((""+t).length,3))),t<=999&&t>=0&&(e.__internalDateObject.millisecond=t,e.__updateHeaderDate())))}),150))}}}}else if(-1!==t.name.search("secondUp")){let t=e.__baseControls[e.__id+"_secondValue"];if(void 0!==t){let i=t,text=i.getText();if(void 0!==text){let t=text.trim();if(new RegExp("^-?[0-9]*$").test(t)){let t=parseInt(text,10);t<59&&(t++,i.setText(("00"+t).substring(Math.min((""+t).length,2))),t<=59&&t>=0&&(e.__internalDateObject.second=t,e.__updateHeaderDate()),e.__intervalTimerTimeButtons=setInterval((function(){e.__isPressedTimeButtons&&(t=parseInt(i.getText(),10),t<59&&(t++,i.setText(("00"+t).substring(Math.min((""+t).length,2))),t<=59&&t>=0&&(e.__internalDateObject.second=t,e.__updateHeaderDate())))}),150))}}}}else if(-1!==t.name.search("secondDown")){let t=e.__baseControls[e.__id+"_secondValue"];if(void 0!==t){let i=t,text=i.getText();if(void 0!==text){let t=text.trim();if(new RegExp("^-?[0-9]*$").test(t)){let t=parseInt(text,10);t>0&&(t--,i.setText(("00"+t).substring(Math.min((""+t).length,2))),t<=59&&t>=0&&(e.__internalDateObject.second=t,e.__updateHeaderDate()),e.__intervalTimerTimeButtons=setInterval((function(){e.__isPressedTimeButtons&&(t=parseInt(i.getText(),10),t>0&&(t--,i.setText(("00"+t).substring(Math.min((""+t).length,2))),t<=59&&t>=0&&(e.__internalDateObject.second=t,e.__updateHeaderDate())))}),150))}}}}}}__updateHeaderDate(){let t=this.__baseControls[this.__id+"_dateValue"];if(void 0!==t){const i=this.__internalDateObject,n=Date.UTC(i.year,i.month-1,i.day,i.hour,i.minute,i.second,i.millisecond),o=new Date(n+this.__utcOffset),a=e.Localization.formatDate(o);t.setText(a)}}__onMouseup(){let e=this;return function(t){e.__isPressedTimeButtons=!1,null!==e.__intervalTimerTimeButtons&&clearInterval(e.__intervalTimerTimeButtons),e.__isPressedCalendar=!1,e.__intervalTimerCalendar&&(clearInterval(e.__intervalTimerCalendar),e.__intervalTimerCalendar=0)}}__onPressed(){let t=this;return function(i){if(-1!==i.name.search("ok")){const i=t.__internalDateObject,n=Date.UTC(i.year,i.month-1,i.day,i.hour,i.minute,i.second,i.millisecond),o=new Date(n+t.__utcOffset);t.setValue(o.toISOString(),!1),e.TopMostLayer.remove(t,t.__elementDTPTemplate)}else-1!==i.name.search("cancel")&&t.closeDateTimePicker()}}__onTextChanged(){let e=this;return function(t){if(-1!==t.name.search("hourValueTextbox")){let t=e.__baseControls[e.__id+"_hourValue"];if(void 0!==t){let e=t,text=e.getText();if(void 0!==text){let t=text.trim();if(new RegExp("^[0-9]*$").test(t)){let i;i=""===t?0:parseInt(t,10),i<=23?e.getElement()[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error"):e.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error")}else e.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error")}}}else if(-1!==t.name.search("minuteValueTextbox")){let t=e.__baseControls[e.__id+"_minuteValue"];if(void 0!==t){let e=t,text=e.getText();if(void 0!==text){let t=text.trim();if(new RegExp("^[0-9]*$").test(t)){let i;i=""===t?0:parseInt(t,10),i<=59?e.getElement()[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error"):e.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error")}else e.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error")}}}else if(-1!==t.name.search("millisecondValueTextbox")){let t=e.__baseControls[e.__id+"_millisecondValue"];if(void 0!==t){let e=t,text=e.getText();if(void 0!==text){let t=text.trim();if(new RegExp("^[0-9]*$").test(t)){let i;i=""===t?0:parseInt(t,10),i<=999?e.getElement()[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error"):e.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error")}else e.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error")}}}else if(-1!==t.name.search("secondValueTextbox")){let t=e.__baseControls[e.__id+"_secondValue"];if(void 0!==t){let e=t,text=e.getText();if(void 0!==text){let t=text.trim();if(new RegExp("^[0-9]*$").test(t)){let i;i=""===t?0:parseInt(t,10),i<=59?e.getElement()[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error"):e.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error")}else e.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error")}}}let i=e.__baseControls[e.__id+"_okButton"];if(void 0!==i){e.__elementDTPTemplate[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error").length>0?i.setIsEnabled(!1):i.setIsEnabled(!0)}}}__onUserInteractionFinished(){let e=this;return function(t){if(-1!==t.name.search("hourValueTextbox")){let t=e.__baseControls[e.__id+"_hourValue"];if(void 0!==t){let i=t,text=i.getText();if(void 0!==text){let t=text.trim();if(new RegExp("^[0-9]*$").test(t)){let n;n=""===t?0:parseInt(t,10),n<=23&&(i.setText(("00"+n).substring(Math.min((""+n).length,2))),e.__internalDateObject.hour=n,e.__updateHeaderDate())}}}}else if(-1!==t.name.search("minuteValueTextbox")){let t=e.__baseControls[e.__id+"_minuteValue"];if(void 0!==t){let i=t,text=i.getText();if(void 0!==text){let t=text.trim();if(new RegExp("^[0-9]*$").test(t)){let n;n=""===t?0:parseInt(t,10),n<=59&&(i.setText(("00"+n).substring(Math.min((""+n).length,2))),e.__internalDateObject.minute=n,e.__updateHeaderDate())}}}}else if(-1!==t.name.search("millisecondValueTextbox")){let t=e.__baseControls[e.__id+"_millisecondValue"];if(void 0!==t){let i=t,text=i.getText();if(void 0!==text){let t=text.trim();if(new RegExp("^[0-9]*$").test(t)){let n;n=""===t?0:parseInt(t,10),n<=999&&(i.setText(("000"+n).substring(Math.min((""+n).length,3))),e.__internalDateObject.millisecond=n,e.__updateHeaderDate())}}}}else if(-1!==t.name.search("secondValueTextbox")){let t=e.__baseControls[e.__id+"_secondValue"];if(void 0!==t){let i=t,text=i.getText();if(void 0!==text){let t=text.trim();if(new RegExp("^[0-9]*$").test(t)){let n;n=""===t?0:parseInt(t,10),n<=59&&(i.setText(("00"+n).substring(Math.min((""+n).length,2))),e.__internalDateObject.second=n,e.__updateHeaderDate())}}}}}}openDateTimePicker(){null===this.__elementDTPTemplate[0].parentElement&&e.TopMostLayer.add(this,this.__elementDTPTemplate,{centerHorizontal:!0,centerVertical:!0,removeCb:t=>{t.canceled&&(e.EventProvider.raise(this.__id+".onCancel"),this.__processValue())},resizeCb:e=>{this.__elementDTPTemplate.find(".TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-area-template").css({"margin-top":"0px"}),this.__elementDTPTemplate.find(".TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-button-area-template").css({top:"109px","margin-bottom":"0px"}),this.__elementDTPTemplate.find(".TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template").css({width:"350px"}),this.__elementDTPTemplate.find(".TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-and-button-area-template").css({width:""}),this.__elementDTPTemplate.find(".TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-and-button-area-template")[0].offsetTop>0&&(this.__elementDTPTemplate.find(".TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-area-template").css({"margin-top":"10px"}),this.__elementDTPTemplate.find(".TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-button-area-template").css({top:"10px","margin-bottom":"10px"}),this.__elementDTPTemplate.find(".TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template").css({width:"100%"}),this.__elementDTPTemplate.find(".TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-and-button-area-template").css({width:"100%"}))}})}closeDateTimePicker(){null!==this.__elementDTPTemplate[0].parentElement&&(e.TopMostLayer.remove(this,this.__elementDTPTemplate),e.EventProvider.raise(this.__id+".onCancel"),this.__processValue())}createCalendar(e,t,i){let n=document.createDocumentFragment(),o=document.createElement("div");o.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-calendar","tchmi-date-time-picker-calendar-template-calendar");let a=document.createElement("div");a.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-header","tchmi-date-time-picker-calendar-template-header"),a.innerHTML='<ul class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-header-month"><li class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-prev TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-month-prev">&lt; </li><li class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-actuallMonth"> '+this.__monthNames[t-1]+' </li><li class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-next TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-month-next">&gt; </li></ul><ul class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-header-year"><li class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-prev TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-year-prev" >&lt; </li><li class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-actuallMonth"> '+e+' </li><li class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-next TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-year-next">&gt; </li></ul>',o.appendChild(a);let s=document.createElement("ul");s.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-weekdays","tchmi-date-time-picker-calendar-template-weekdays"),s.innerHTML="<li>Mo</li><li>Tu</li><li>We</li><li>Th</li><li>Fr</li><li>Sa</li><li>Su</li>",o.appendChild(s);let r=new Date(e,t,0).getDate(),l=new Date(e,t-1,1).getDay();l=0===l?7:l;let _=document.createElement("ul");_.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-days","tchmi-date-time-picker-calendar-template-days");for(var c=-(l-1),m=r;c<m;c++){let e=document.createElement("li");c>=0&&(e.textContent=(c+1).toString(),e.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-day-element","tchmi-date-time-picker-calendar-template-day-element")),c+1===i&&e.classList.add("active"),_.appendChild(e)}let d=l-1+r;for(;!isNaN(d)&&d%7!=0;){let e=document.createElement("li");_.appendChild(e),d++}return o.appendChild(_),n.appendChild(o),n}createTime(t,i,n,o){let a=document.createDocumentFragment(),s=document.createElement("div");s.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template","tchmi-date-time-picker-time-template");let r=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiTextblock",this.__id+"_timeLabel",{"data-tchmi-text-horizontal-alignment":"Center","data-tchmi-text-vertical-alignment":"Center","data-tchmi-text-font-size":15,"data-tchmi-text":"Time"},this);if(void 0===r)throw new Error("Needed Textblock could not be instantiated");r.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-template-time-label","tchmi-date-time-picker-template-time-label"),s.appendChild(r.getElement()[0]);let l=document.createElement("div");l.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-hour","tchmi-date-time-picker-time-template-hour");let _=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_hourUpButton",{"data-tchmi-zindex":1},this);if(void 0===_)throw new Error("Needed Button could not be instantiated");_.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-button","TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-up-button","tchmi-date-time-picker-time-template-button","tchmi-date-time-picker-time-template-up-button"),l.appendChild(_.getElement()[0]),this.__baseControls[this.__id+"_hourUpButton"]=_;let c=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiTextbox",this.__id+"_hourValueTextbox",{"data-tchmi-text":("00"+t).slice(-2),"data-tchmi-text-horizontal-alignment":"Center","data-tchmi-box-shadow":[{blur:5,blurUnit:"px",color:{color:"rgba(0, 0, 0, 0.6)"},offsetX:0,offsetXUnit:"px",offsetY:0,offsetYUnit:"px",spread:0,spreadUnit:"px"}],"data-tchmi-auto-focus-out":!0},this);if(void 0===c)throw new Error("Needed Textbox could not be instantiated");c.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox","tchmi-date-time-picker-time-template-textbox"),l.appendChild(c.getElement()[0]),this.__baseControls[this.__id+"_hourValue"]=c;let m=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_hourDownButton",{},this);if(void 0===m)throw new Error("Needed Button could not be instantiated");m.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-button","TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-down-button","tchmi-date-time-picker-time-template-button","tchmi-date-time-picker-time-template-down-button"),l.appendChild(m.getElement()[0]),this.__baseControls[this.__id+"_hourDownButton"]=m,s.appendChild(l);let d=document.createElement("div");d.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-colon","tchmi-date-time-picker-time-template-colon"),d.textContent=":",s.appendChild(d);let h=document.createElement("div");h.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-minute","tchmi-date-time-picker-time-template-minute");let u=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_minuteUpButton",{"data-tchmi-zindex":1},this);if(void 0===u)throw new Error("Needed Button could not be instantiated");u.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-button","TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-up-button","tchmi-date-time-picker-time-template-button","tchmi-date-time-picker-time-template-up-button"),h.appendChild(u.getElement()[0]),this.__baseControls[this.__id+"_minuteUpButton"]=u;let T=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiTextbox",this.__id+"_minuteValueTextbox",{"data-tchmi-text":("00"+i).slice(-2),"data-tchmi-text-horizontal-alignment":"Center","data-tchmi-box-shadow":[{blur:5,blurUnit:"px",color:{color:"rgba(0, 0, 0, 0.6)"},offsetX:0,offsetXUnit:"px",offsetY:0,offsetYUnit:"px",spread:0,spreadUnit:"px"}],"data-tchmi-auto-focus-out":!0},this);if(void 0===T)throw new Error("Needed Textbox could not be instantiated");T.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox","tchmi-date-time-picker-time-template-textbox"),h.appendChild(T.getElement()[0]),this.__baseControls[this.__id+"_minuteValue"]=T;let p=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_minuteDownButton",{},this);if(void 0===p)throw new Error("Needed Button could not be instantiated");p.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-button","TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-down-button","tchmi-date-time-picker-time-template-button","tchmi-date-time-picker-time-template-down-button"),h.appendChild(p.getElement()[0]),this.__baseControls[this.__id+"_minuteDownButton"]=p,s.appendChild(h);let f=document.createElement("div");f.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-colon","tchmi-date-time-picker-time-template-colon"),f.textContent=":",s.appendChild(f);let D=document.createElement("div");D.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-second"),D.classList.add("tchmi-date-time-picker-time-template-second");let C=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_secondUpButton",{"data-tchmi-zindex":1},this);if(void 0===C)throw new Error("Needed Button could not be instantiated");C.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-button","TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-up-button","tchmi-date-time-picker-time-template-button","tchmi-date-time-picker-time-template-up-button"),D.appendChild(C.getElement()[0]),this.__baseControls[this.__id+"_secondUpButton"]=C;let b=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiTextbox",this.__id+"_secondValueTextbox",{"data-tchmi-text":("00"+n).slice(-2),"data-tchmi-text-horizontal-alignment":"Center","data-tchmi-box-shadow":[{blur:5,blurUnit:"px",color:{color:"rgba(0, 0, 0, 0.6)"},offsetX:0,offsetXUnit:"px",offsetY:0,offsetYUnit:"px",spread:0,spreadUnit:"px"}],"data-tchmi-auto-focus-out":!0},this);if(void 0===b)throw new Error("Needed Textbox could not be instantiated");b.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox","tchmi-date-time-picker-time-template-textbox"),D.appendChild(b.getElement()[0]),this.__baseControls[this.__id+"_secondValue"]=b;let x=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_secondDownButton",{},this);if(void 0===x)throw new Error("Needed Button could not be instantiated");x.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-button","TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-down-button","tchmi-date-time-picker-time-template-button","tchmi-date-time-picker-time-template-down-button"),D.appendChild(x.getElement()[0]),this.__baseControls[this.__id+"_secondDownButton"]=x,s.appendChild(D);let v=document.createElement("div");v.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-colon","tchmi-date-time-picker-time-template-colon"),v.textContent=".",s.appendChild(v);let H=document.createElement("div");H.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-millisecond","tchmi-date-time-picker-time-template-millisecond");let k=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_millisecondUpButton",{"data-tchmi-zindex":1},this);if(void 0===k)throw new Error("Needed Button could not be instantiated");k.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-button","TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-up-button","tchmi-date-time-picker-time-template-button","tchmi-date-time-picker-time-template-up-button"),H.appendChild(k.getElement()[0]),this.__baseControls[this.__id+"_millisecondUpButton"]=k;let E=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiTextbox",this.__id+"_millisecondValueTextbox",{"data-tchmi-text":("000"+o).slice(-3),"data-tchmi-text-horizontal-alignment":"Center","data-tchmi-box-shadow":[{blur:5,blurUnit:"px",color:{color:"rgba(0, 0, 0, 0.6)"},offsetX:0,offsetXUnit:"px",offsetY:0,offsetYUnit:"px",spread:0,spreadUnit:"px"}],"data-tchmi-auto-focus-out":!0},this);if(void 0===E)throw new Error("Needed Textbox could not be instantiated");E.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox","tchmi-date-time-picker-time-template-textbox"),H.appendChild(E.getElement()[0]),this.__baseControls[this.__id+"_millisecondValue"]=E;let g=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_millisecondDownButton",{},this);if(void 0===g)throw new Error("Needed Button could not be instantiated");return g.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-button","TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-down-button","tchmi-date-time-picker-time-template-button","tchmi-date-time-picker-time-template-down-button"),H.appendChild(g.getElement()[0]),this.__baseControls[this.__id+"_millisecondDownButton"]=g,s.appendChild(H),a.appendChild(s),a}setValue(valueNew,t=!0){let i=e.ValueConverter.toString(valueNew);null===i&&(i=this.getAttributeDefaultValueInternal("Value")),i!==this.__value&&(this.__value=i,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Value"}),e.EventProvider.raise(this.__id+".onValueChanged",this.__value),t&&this.__processValue())}getValue(){return this.__value}__processValue(){let date;date=this.__value?new Date(this.__value):new Date,this.__internalDateObject=e.Localization.parseDate(date);let t=Date.UTC(this.__internalDateObject.year,this.__internalDateObject.month-1,this.__internalDateObject.day,this.__internalDateObject.hour,this.__internalDateObject.minute,this.__internalDateObject.second,this.__internalDateObject.millisecond);this.__utcOffset=date.valueOf()-t;this.__updateHeaderDate();let i=this.__baseControls[this.__id+"_hourValue"];if(void 0!==i){i.setText(("00"+this.__internalDateObject.hour).slice(-2))}let n=this.__baseControls[this.__id+"_minuteValue"];if(void 0!==n){n.setText(("00"+this.__internalDateObject.minute).slice(-2))}let o=this.__baseControls[this.__id+"_secondValue"];if(void 0!==o){o.setText(("00"+this.__internalDateObject.second).slice(-2))}let a=this.__baseControls[this.__id+"_millisecondValue"];if(void 0!==a){a.setText(("000"+this.__internalDateObject.millisecond).slice(-3))}this.__elementCalendarTemplate.children().hasClass("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-calendar")&&this.__elementCalendarTemplate.empty().append(this.createCalendar(this.__internalDateObject.year,this.__internalDateObject.month,this.__internalDateObject.day))}__processIsEnabled(){super.__processIsEnabled(),this.getIsEnabled()||null!==this.__elementDTPTemplate[0].parentElement&&(e.TopMostLayer.remove(this,this.__elementDTPTemplate),e.EventProvider.raise(this.__id+".onCancel"))}}t.TcHmiDateTimePicker=i}(i=t.Beckhoff||(t.Beckhoff={})),t.registerEx("TcHmiDateTimePicker","TcHmi.Controls.Beckhoff",e.Controls.Beckhoff.TcHmiDateTimePicker)}(t=e.Controls||(e.Controls={}))}(TcHmi||(TcHmi={}));