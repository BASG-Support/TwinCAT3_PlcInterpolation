var TcHmi;!function(e){let t;!function(t){let i;!function(t){class i extends e.Controls.System.TcHmiControl{constructor(e,t,i){super(e,t,i),this.__serverDomainDestroyWatchCallback=null,this.__serverDomainIsValid=!1,this.__buttonActivate=null,this.__buttonTeach=null,this.__topMostButtonOK=null,this.__topMostButtonCancel=null,this.__destroyButtonActivateOnPressed=null,this.__destroyButtonTeachOnPressed=null,this.__destroyTopMostButtonOKOnPressed=null,this.__destroyTopMostButtonCancelPressed=null,this.__currentSelectionFolderTemp=null,this.__currentSelectionRecipeTemp=null,this.__currentSelectionFolder=null,this.__currentSelectionRecipe=null,this.__currentActiveRecipes=null,this.__breadcrumbScrollingMouseDown=!1,this.__topMostLayerOpened=!1,this.__breadcrumbItems=[],this.__subscrIdGetActiveRecipes=null,this.__subscrIdCurrentSelectionFolderRecipes=null;let r=document.createElement("div");r.innerHTML='<div class="TcHmi_Controls_Beckhoff_TcHmiRecipeSelect_topmost_selection"><h1>Recipes</h1><div class="TcHmi_Controls_Beckhoff_TcHmiRecipeSelect_topmost_selection_list"></div></div>',this.__elementTopMostSelection=r.firstElementChild,this.__elementTopMostSelection&&(this.__elementTopMostSelectionList=this.__elementTopMostSelection.querySelector(".TcHmi_Controls_Beckhoff_TcHmiRecipeSelect_topmost_selection_list"))}__previnit(){if(this.__elementTemplateRoot=this.__element[0].querySelector(".TcHmi_Controls_Beckhoff_TcHmiRecipeSelect-template"),!this.__elementTemplateRoot)throw new Error("Invalid Template.html - Missing element with class: 'TcHmi_Controls_Beckhoff_TcHmiRecipeSelect-template'.");if(this.__elementSelectDiv=this.__elementTemplateRoot.querySelector(".TcHmi_Controls_Beckhoff_TcHmiRecipeSelect-table-1-row-1-cell-1"),!this.__elementSelectDiv)throw new Error("Invalid Template.html - Missing element with class: 'TcHmi_Controls_Beckhoff_TcHmiRecipeSelect-table-1-row-1-cell-1'.");if(this.__elementBreadcrumbScrollContainer=this.__elementTemplateRoot.querySelector(".TcHmi_Controls_Beckhoff_TcHmiRecipeSelect-breadcrumb-scroll-container"),!this.__elementBreadcrumbScrollContainer)throw new Error("Invalid Template.html - Missing element with class: 'TcHmi_Controls_Beckhoff_TcHmiRecipeSelect-breadcrumb-scroll-container'.");if(this.__elementBreadcrumbList=this.__elementTemplateRoot.querySelector(".TcHmi_Controls_Beckhoff_TcHmiRecipeSelect-breadcrumb-list"),!this.__elementBreadcrumbList)throw new Error("Invalid Template.html - Missing element with class: 'TcHmi_Controls_Beckhoff_TcHmiRecipeSelect-breadcrumb-list'.");super.__previnit()}__init(){if(!this.__elementTemplateRoot)throw new Error("Invalid Template.html - Missing element with class: 'TcHmi_Controls_Beckhoff_TcHmiRecipeSelect-template'.");if(!this.__elementSelectDiv)throw new Error("Invalid Template.html - Missing element with class: 'TcHmi_Controls_Beckhoff_TcHmiRecipeSelect-table-1-row-1-cell-1'.");if(!this.__elementBreadcrumbScrollContainer)throw new Error("Invalid Template.html - Missing element with class: 'TcHmi_Controls_Beckhoff_TcHmiRecipeSelect-breadcrumb-scroll-container'.");if(!this.__elementBreadcrumbList)throw new Error("Invalid Template.html - Missing element with class: 'TcHmi_Controls_Beckhoff_TcHmiRecipeSelect-breadcrumb-list'.");TCHMI_DESIGNER||(this.__elementSelectDivMouseDownListener=this.__onSelectDivMouseDown(),this.__elementSelectDiv.addEventListener("mousedown",this.__elementSelectDivMouseDownListener,{passive:!1,capture:!1}),this.__elementBreadcrumbScrollContainerMouseDownListener=this.__onBreadcrumbScrollingContainerMouseDown(),this.__elementBreadcrumbScrollContainer.addEventListener("mousedown",this.__elementBreadcrumbScrollContainerMouseDownListener,{passive:!1,capture:!1}),this.__documentMouseUpListener=this.__onDocumentMouseUp(),window.document.addEventListener("mouseup",this.__documentMouseUpListener,{passive:!1,capture:!1}),this.__documentMouseMoveListener=this.__onDocumentMouseMove(),window.document.addEventListener("mousemove",this.__documentMouseMoveListener,{passive:!1,capture:!1}));let t=this.__elementTemplateRoot.querySelector(".TcHmi_Controls_Beckhoff_TcHmiRecipeSelect-table-1-row-1-cell-2");this.__buttonActivate=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_ButtonActivate",{"data-tchmi-left":"0","data-tchmi-top":"0","data-tchmi-right":"0","data-tchmi-bottom":"0","data-tchmi-text":"Activate","data-tchmi-tooltip":"Activate recipe","data-tchmi-text-font-size-unit":"px","data-tchmi-text-font-style":"Auto","data-tchmi-text-font-weight":"Auto"},this),TCHMI_DESIGNER||(this.__destroyButtonActivateOnPressed=e.EventProvider.register(this.__id+"_ButtonActivate.onPressed",this.__onButtonActivePressed())),this.__buttonActivate&&t&&t.appendChild(this.__buttonActivate.getElement()[0]);let i=this.__elementTemplateRoot.querySelector(".TcHmi_Controls_Beckhoff_TcHmiRecipeSelect-table-1-row-1-cell-3");this.__buttonTeach=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_ButtonTeach",{"data-tchmi-left":"0","data-tchmi-top":"0","data-tchmi-right":"0","data-tchmi-bottom":"0","data-tchmi-text":"Teach","data-tchmi-tooltip":"Teach recipe","data-tchmi-text-font-size-unit":"px","data-tchmi-text-font-style":"Auto","data-tchmi-text-font-weight":"Auto"},this),TCHMI_DESIGNER||(this.__destroyButtonTeachOnPressed=e.EventProvider.register(this.__id+"_ButtonTeach.onPressed",this.__onButtonTeachPressed())),this.__buttonTeach&&i&&i.appendChild(this.__buttonTeach.getElement()[0]),this.__topMostButtonOK=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_TopMostButtonOK",{"data-tchmi-text":"Ok","data-tchmi-width":"75","data-tchmi-height":"35","data-tchmi-right":"90"},this),TCHMI_DESIGNER||(this.__destroyTopMostButtonOKOnPressed=e.EventProvider.register(this.__id+"_TopMostButtonOK.onPressed",this.__onTopMostButtonOKPressed())),this.__topMostButtonCancel=e.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_TopMostButtonCancel",{"data-tchmi-text":"Cancel","data-tchmi-width":"75","data-tchmi-height":"35","data-tchmi-right":"10"},this),TCHMI_DESIGNER||(this.__destroyTopMostButtonCancelPressed=e.EventProvider.register(this.__id+"_TopMostButtonCancel.onPressed",this.__onTopMostButtonCancelPressed())),this.__elementTopMostSelection&&this.__topMostButtonOK&&this.__elementTopMostSelection.appendChild(this.__topMostButtonOK.getElement()[0]),this.__elementTopMostSelection&&this.__topMostButtonCancel&&this.__elementTopMostSelection.appendChild(this.__topMostButtonCancel.getElement()[0]),TCHMI_DESIGNER||this.__processSelection(),super.__init()}__attach(){!TCHMI_DESIGNER&&this.__serverDomain&&(this.__serverDomainDestroyWatchCallback=e.Server.Domains.watch(this.__serverDomain,this.__onServerDomainWatchCallback())),super.__attach()}__detach(){this.__serverDomainDestroyWatchCallback&&(this.__serverDomainDestroyWatchCallback(),this.__serverDomainDestroyWatchCallback=null),this.__unwatchActiveRecipes(),this.__serverDomainIsValid=!1,super.__detach()}destroy(){this.__keepAlive||(this.__destroyButtonActivateOnPressed&&(this.__destroyButtonActivateOnPressed(),this.__destroyButtonActivateOnPressed=null),this.__destroyButtonTeachOnPressed&&(this.__destroyButtonTeachOnPressed(),this.__destroyButtonTeachOnPressed=null),this.__destroyTopMostButtonOKOnPressed&&(this.__destroyTopMostButtonOKOnPressed(),this.__destroyTopMostButtonOKOnPressed=null),this.__destroyTopMostButtonCancelPressed&&(this.__destroyTopMostButtonCancelPressed(),this.__destroyTopMostButtonCancelPressed=null),this.__elementSelectDiv&&this.__elementSelectDivMouseDownListener&&(this.__elementSelectDiv.removeEventListener("mousedown",this.__elementSelectDivMouseDownListener),this.__elementSelectDivMouseDownListener=null),this.__elementBreadcrumbScrollContainer&&this.__elementBreadcrumbScrollContainerMouseDownListener&&(this.__elementBreadcrumbScrollContainer.removeEventListener("mousedown",this.__elementBreadcrumbScrollContainerMouseDownListener),this.__elementBreadcrumbScrollContainerMouseDownListener=null),this.__documentMouseUpListener&&(window.document.removeEventListener("mouseup",this.__documentMouseUpListener),this.__documentMouseUpListener=null),this.__documentMouseMoveListener&&(window.document.addEventListener("mousemove",this.__documentMouseMoveListener,{passive:!1,capture:!1}),this.__documentMouseMoveListener=null),this.__serverDomainDestroyWatchCallback&&(this.__serverDomainDestroyWatchCallback(),this.__serverDomainDestroyWatchCallback=null),e.TopMostLayer.remove(this,$(this.__elementTopMostSelection)),super.destroy())}__onServerDomainWatchCallback(){return t=>{t&&t.error===e.Errors.NONE?t.value&&"Initialized"===t.value.state?(this.setIsEnabled(!0),this.__serverDomainIsValid=!0,this.__watchActiveRecipes()):(this.setIsEnabled(!1),this.__serverDomainIsValid=!1,this.__unwatchActiveRecipes(),TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiRecipeSelect, Id="+this.getId()+"] Domain: '"+this.__serverDomain+"' is not loaded. Please make sure the server extension is activated.")):(this.setIsEnabled(!1),this.__serverDomainIsValid=!1,this.__unwatchActiveRecipes(),TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiRecipeSelect, Id="+this.getId()+"] Domain: '"+this.__serverDomain+"' is not known. Please make sure the server extension is loaded and the domain name is correct."))}}__processAccessConfig(){var t,i,r,o;super.__processAccessConfig();let s=e.Access.checkAccess(this,"teachRecipe");null===s&&(s=!1),null===(t=this.__buttonTeach)||void 0===t||t.getElement()[0].classList.toggle("TcHmi_Controls_System_TcHmiControl-operate-disallowed",!s),null===(i=this.__buttonTeach)||void 0===i||i.setIsEnabled(s);let c=e.Access.checkAccess(this,"activateRecipe");null===c&&(c=!1),null===(r=this.__buttonActivate)||void 0===r||r.getElement()[0].classList.toggle("TcHmi_Controls_System_TcHmiControl-operate-disallowed",!c),null===(o=this.__buttonActivate)||void 0===o||o.setIsEnabled(c)}setServerDomain(valueNew){let t=e.ValueConverter.toString(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("ServerDomain")),tchmi_equal(t,this.__serverDomain)||(this.__serverDomain=t,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ServerDomain"}),this.__processServerDomain())}getServerDomain(){return this.__serverDomain}__processServerDomain(){!1!==this.__isAttached&&(this.__unwatchActiveRecipes(),this.__serverDomainDestroyWatchCallback&&(this.__serverDomainDestroyWatchCallback(),this.__serverDomainDestroyWatchCallback=null),!TCHMI_DESIGNER&&this.__serverDomain&&(this.__serverDomainDestroyWatchCallback=e.Server.Domains.watch(this.__serverDomain,this.__onServerDomainWatchCallback())))}setServerInterval(valueNew){let t=e.ValueConverter.toNumber(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("ServerInterval")),tchmi_equal(t,this.__serverInterval)||(this.__serverInterval=t,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ServerInterval"}),this.__processServerInterval())}getServerInterval(){return this.__serverInterval}__processServerInterval(){this.__unwatchActiveRecipes(),this.__watchActiveRecipes()}getSelectedRecipeFullName(){return this.__currentSelectionRecipe&&this.__currentSelectionRecipe.key?this.__currentSelectionRecipe.path?this.__currentSelectionRecipe.path+"::"+this.__currentSelectionRecipe.key:this.__currentSelectionRecipe.key:null}getSelectedRecipeName(){return this.__currentSelectionRecipe&&this.__currentSelectionRecipe.key?this.__currentSelectionRecipe.key:null}getSelectedRecipePath(){return this.__currentSelectionRecipe&&this.__currentSelectionRecipe.path?this.__currentSelectionRecipe.path:null}__processesActiveRecipe(){if(this.__currentSelectionRecipe){let e;this.__currentSelectionRecipe&&this.__currentSelectionRecipe.path&&(e||(e=""),e+=this.__currentSelectionRecipe.path),this.__currentSelectionRecipe&&this.__currentSelectionRecipe.key&&(e?e+="::":e="",e+=this.__currentSelectionRecipe.key),e&&this.__currentActiveRecipes&&this.__currentActiveRecipes.indexOf(e)>-1?this.__elementSelectDiv&&this.__elementSelectDiv.classList.add("TcHmi_Controls_Beckhoff_TcHmiRecipeSelect-table-1-row-1-cell-1-active"):this.__elementSelectDiv&&this.__elementSelectDiv.classList.remove("TcHmi_Controls_Beckhoff_TcHmiRecipeSelect-table-1-row-1-cell-1-active")}else this.__elementSelectDiv&&this.__elementSelectDiv.classList.remove("TcHmi_Controls_Beckhoff_TcHmiRecipeSelect-table-1-row-1-cell-1-active")}__watchActiveRecipes(){if(TCHMI_DESIGNER)return;if(!this.__isAttached)return;if(null!==this.__subscrIdGetActiveRecipes)return;let t=this.__serverDomain;t||(t="TcHmiRecipeManagement");let i=this.__serverInterval;i||(i=0);let r=t+".GetActiveRecipes";this.__subscrIdGetActiveRecipes=e.Server.subscribe([{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:r}],i,i=>{if(i.error===e.Errors.NONE){let o=i.response;if(!o)return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiRecipeSelect, Id="+this.getId()+"] "+t+".GetActiveRecipes: "+e.Log.buildMessage({code:e.Errors.E_SERVER_RESPONSE_MISSING,message:e.Errors[e.Errors.E_SERVER_RESPONSE_MISSING],reason:"Missing response from server.",domain:"TcHmi.Controls.Beckhoff.TcHmiRecipeSelect"})));if(o.error)return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiRecipeSelect, Id="+this.getId()+"] "+t+".GetActiveRecipes: "+e.Log.buildMessage({code:e.Errors.E_SERVER_RESPONSE_ERROR,message:e.Errors[e.Errors.E_SERVER_RESPONSE_ERROR],reason:"Error in response from server with id: '"+o.id+"'.",domain:"TcHmi.Controls.Beckhoff.TcHmiRecipeSelect",errors:[o.error]})));let s=o.commands;if(!s)return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiRecipeSelect, Id="+this.getId()+"] "+t+".GetActiveRecipes: "+e.Log.buildMessage({code:e.Errors.E_SERVER_COMMANDS_MISSING,message:e.Errors[e.Errors.E_SERVER_COMMANDS_MISSING],reason:"Missing commands in response from server with id: '"+o.id+"'.",domain:"TcHmi.Controls.Beckhoff.TcHmiRecipeSelect"})));let c=null;for(let i=0,n=s.length;i<n;i++){if(c=s[i],c.symbol===r){if(c.error)return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiRecipeSelect, Id="+this.getId()+"] "+t+".GetActiveRecipes: "+e.Log.buildMessage({code:e.Errors.E_SERVER_COMMAND_ERROR,message:e.Errors[e.Errors.E_SERVER_COMMAND_ERROR],reason:"Error in command for symbol: '"+t+".GetActiveRecipes' in response from server with id: '"+o.id+"'.",domain:"TcHmi.Controls.Beckhoff.TcHmiRecipeSelect",errors:[c.error]})));break}c=null}if(!c)return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiRecipeSelect, Id="+this.getId()+"] "+t+".GetActiveRecipes: "+e.Log.buildMessage({code:e.Errors.E_SERVER_COMMAND_MISSING,message:e.Errors[e.Errors.E_SERVER_COMMAND_MISSING],reason:"Missing command for symbol: '"+r+"' in response from server with id: '"+o.id+"'.",domain:"TcHmi.Controls.Beckhoff.TcHmiRecipeSelect"})));let n=c.readValue;if(!n)return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiRecipeSelect, Id="+this.getId()+"] "+t+".GetActiveRecipes: "+e.Log.buildMessage({code:e.Errors.E_SERVER_READVALUE_MISSING,message:e.Errors[e.Errors.E_SERVER_READVALUE_MISSING],reason:"Missing property: 'readValue' in command for symbol: '"+r+"' in response from server with id: '"+o.id+"'.",domain:"TcHmi.Controls.Beckhoff.TcHmiRecipeSelect"})));this.__currentActiveRecipes=n,this.__processesActiveRecipe()}})}__unwatchActiveRecipes(){null!==this.__subscrIdGetActiveRecipes&&(e.Server.unsubscribe(this.__subscrIdGetActiveRecipes),this.__subscrIdGetActiveRecipes=null)}__watchCurrentSelectionFolderRecipes(){if(TCHMI_DESIGNER)return;if(!this.__isAttached)return;if(null!==this.__subscrIdCurrentSelectionFolderRecipes)return;let t=this.__serverDomain;t||(t="TcHmiRecipeManagement");let i=this.__serverInterval;i||(i=0);let path=null;this.__currentSelectionFolder&&(path="",this.__currentSelectionFolder.path&&(path+=this.__currentSelectionFolder.path+"::"),this.__currentSelectionFolder.key&&(path+=this.__currentSelectionFolder.key));let r=t+".Config::recipeList";path&&(r+="::"+path),this.__subscrIdCurrentSelectionFolderRecipes=e.Server.subscribe([{commandOptions:["SendErrorMessage","SendWriteValue"],symbol:r}],i,t=>{if(t.error===e.Errors.NONE){let i=t.response;if(!i)return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiRecipeSelect, Id="+this.getId()+"] Current folder recipe watching failed with error: "+e.Log.buildMessage({code:e.Errors.E_SERVER_RESPONSE_MISSING,message:e.Errors[e.Errors.E_SERVER_RESPONSE_MISSING],reason:"Missing response from server.",domain:"TcHmi.Controls.Beckhoff.TcHmiRecipeSelect"})));if(i.error)return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiRecipeSelect, Id="+this.getId()+"] Current folder recipe watching failed with error: "+e.Log.buildMessage({code:e.Errors.E_SERVER_RESPONSE_ERROR,message:e.Errors[e.Errors.E_SERVER_RESPONSE_ERROR],reason:"Error in response from server with id: '"+i.id+"'.",domain:"TcHmi.Controls.Beckhoff.TcHmiRecipeSelect",errors:[i.error]})));let o=i.commands;if(!o)return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiRecipeSelect, Id="+this.getId()+"] Current folder recipe watching failed with error: "+e.Log.buildMessage({code:e.Errors.E_SERVER_COMMANDS_MISSING,message:e.Errors[e.Errors.E_SERVER_COMMANDS_MISSING],reason:"Missing commands in response from server with id: '"+i.id+"'.",domain:"TcHmi.Controls.Beckhoff.TcHmiRecipeSelect"})));let s=null;for(let t=0,c=o.length;t<c;t++){if(s=o[t],s.symbol===r){if(s.error&&512!==s.error.code)return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiRecipeSelect, Id="+this.getId()+"] Current folder recipe watching failed with error: "+e.Log.buildMessage({code:e.Errors.E_SERVER_COMMAND_ERROR,message:e.Errors[e.Errors.E_SERVER_COMMAND_ERROR],reason:"Error in command for symbol: '"+r+"' in response from server with id: '"+i.id+"'.",domain:"TcHmi.Controls.Beckhoff.TcHmiRecipeSelect",errors:[s.error]})));s.error&&512===s.error.code&&(this.__currentSelectionFolder=null,this.__currentSelectionRecipe=null,this.__processSelection());break}s=null}if(!s)return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiRecipeSelect, Id="+this.getId()+"] Current folder recipe watching failed with error: "+e.Log.buildMessage({code:e.Errors.E_SERVER_COMMAND_MISSING,message:e.Errors[e.Errors.E_SERVER_COMMAND_MISSING],reason:"Missing command for symbol: '"+r+"' in response from server with id: '"+i.id+"'.",domain:"TcHmi.Controls.Beckhoff.TcHmiRecipeSelect"})));let c=s.readValue;if(!c)return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiRecipeSelect, Id="+this.getId()+"] Current folder recipe watching failed with error: "+e.Log.buildMessage({code:e.Errors.E_SERVER_READVALUE_MISSING,message:e.Errors[e.Errors.E_SERVER_READVALUE_MISSING],reason:"Missing property: 'readValue' in command for symbol: '"+r+"' in response from server with id: '"+i.id+"'.",domain:"TcHmi.Controls.Beckhoff.TcHmiRecipeSelect"})));this.__currentSelectionRecipe&&this.__currentSelectionRecipe.key&&t&&c&&!c[this.__currentSelectionRecipe.key]&&(this.__currentSelectionRecipe=null,this.__processSelection())}else TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiRecipeSelect, Id="+this.getId()+"] Current folder recipe watching failed with error: "+e.Log.buildMessage(t.details))})}__unwatchCurrentSelectionFolderRecipes(){null!==this.__subscrIdCurrentSelectionFolderRecipes&&(e.Server.unsubscribe(this.__subscrIdCurrentSelectionFolderRecipes),this.__subscrIdCurrentSelectionFolderRecipes=null)}__processSelection(){if(TCHMI_DESIGNER)return;this.__currentSelectionFolder&&this.__currentSelectionRecipe?this.__elementSelectDiv&&this.__currentSelectionRecipe.key&&(this.__elementSelectDiv.innerText=this.__currentSelectionRecipe.key):this.__elementSelectDiv&&(this.__elementSelectDiv.innerText="Select");let e=this.__breadcrumbItems;for(let t=0,i=e.length;t<i;t++){let i=e[t];i&&i.breadcrumbElement&&i.breadcrumbEventListenerClick&&i.breadcrumbElement.removeEventListener("click",i.breadcrumbEventListenerClick)}e.splice(0,e.length);let t=document.createElement("ul");t.innerHTML="<li><a>/</a></li>";let r={type:i.RecipeItemType.Folder,breadcrumbElement:t.firstElementChild};if(r.breadcrumbEventListenerClick=this.__onBreadcrumbItemClicked(r),r.breadcrumbElement&&r.breadcrumbElement.addEventListener("click",r.breadcrumbEventListenerClick),e.push(r),this.__currentSelectionFolder&&this.__elementBreadcrumbList){for(;this.__elementBreadcrumbList.firstChild;)this.__elementBreadcrumbList.removeChild(this.__elementBreadcrumbList.firstChild);let path=this.__currentSelectionFolder.path,t=this.__currentSelectionFolder.key,r="";if(path){let t=path.split("::");for(let o=0,s=t.length;o<s;o++){let s=t[o],c=document.createElement("ul");c.innerHTML="<li><a>"+s+"</a></li>";let n={type:i.RecipeItemType.Folder,path:r,key:s,breadcrumbElement:c.firstElementChild};n.breadcrumbEventListenerClick=this.__onBreadcrumbItemClicked(n),n.breadcrumbElement&&n.breadcrumbElement.addEventListener("click",n.breadcrumbEventListenerClick),e.push(n),r.length>0?r+="::"+s:r+=s}}if(t){let o=document.createElement("ul");o.innerHTML="<li><a>"+t+"</a></li>";let s={type:i.RecipeItemType.Folder,path:r,key:t,breadcrumbElement:o.firstElementChild};s.breadcrumbEventListenerClick=this.__onBreadcrumbItemClicked(s),s.breadcrumbElement&&s.breadcrumbElement.addEventListener("click",s.breadcrumbEventListenerClick),e.push(s)}}if(this.__elementBreadcrumbList){let t=document.createDocumentFragment();for(let i=0,r=e.length;i<r;i++){let r=e[i];r.breadcrumbElement&&t.appendChild(r.breadcrumbElement)}for(;this.__elementBreadcrumbList&&this.__elementBreadcrumbList.firstChild;)this.__elementBreadcrumbList.removeChild(this.__elementBreadcrumbList.firstChild);this.__elementBreadcrumbList.append(t),this.__elementBreadcrumbScrollContainer&&(this.__elementBreadcrumbScrollContainer.scrollLeft=this.__elementBreadcrumbScrollContainer.clientWidth+1024)}this.__processesActiveRecipe(),this.__unwatchCurrentSelectionFolderRecipes(),this.__watchCurrentSelectionFolderRecipes()}__displayTopMostSelectionFolder(t,path){if(TCHMI_DESIGNER)return;if(!this.__elementTopMostSelection)return;if(!this.__elementTopMostSelectionList)return;if(!t)return;let r=!1;if(path){let e,r=path.split("::"),o=r.pop();r.length>0&&(e=r.join("::")),this.__currentSelectionFolderTemp={type:i.RecipeItemType.Folder,path:e,key:o,payload:t}}else this.__currentSelectionFolderTemp={type:i.RecipeItemType.Folder,payload:t};for(;this.__elementTopMostSelectionList.firstChild;)this.__elementTopMostSelectionList.removeChild(this.__elementTopMostSelectionList.firstChild);let o=document.createElement("ul");this.__elementTopMostSelectionList.appendChild(o);let s=[],c=[];for(let e in this.__currentSelectionFolderTemp.payload){let t=this.__currentSelectionFolderTemp.payload[e];if(t&&void 0!==t.recipeTypeName){let o=document.createElement("div");o.innerHTML='<li class="TcHmi_Controls_Beckhoff_TcHmiRecipeSelect_topmost_selection_item TcHmi_Controls_Beckhoff_TcHmiRecipeSelect_topmost_selection_item_recipe">'+e+"</li>";let s={type:i.RecipeItemType.Recipe,key:e,payload:t,selectionElement:o.firstElementChild};path&&(s.path=path),s.selectionEventListenerClick=this.__onTopMostRecipeItemClicked(s),s.selectionElement&&(s.selectionElement.addEventListener("click",s.selectionEventListenerClick),this.__currentSelectionRecipe&&this.__currentSelectionRecipe.path===s.path&&this.__currentSelectionRecipe.key===s.key&&(s.selectionElement.classList.add("TcHmi_Controls_Beckhoff_TcHmiRecipeSelect_topmost_selected"),this.__currentSelectionRecipe=s,r=!0)),c.push(s)}else{let r=document.createElement("div");r.innerHTML='<li class="TcHmi_Controls_Beckhoff_TcHmiRecipeSelect_topmost_selection_item TcHmi_Controls_Beckhoff_TcHmiRecipeSelect_topmost_selection_item_folder">'+e+"</li>";let o={type:i.RecipeItemType.Folder,key:e,payload:t,selectionElement:r.firstElementChild};path&&(o.path=path),o.selectionEventListenerClick=this.__onTopMostRecipeItemClicked(o),o.selectionElement&&o.selectionElement.addEventListener("click",o.selectionEventListenerClick),s.push(o)}}if(this.__currentSelectionFolderTemp.key){let e=document.createElement("div");e.innerHTML='<li class="TcHmi_Controls_Beckhoff_TcHmiRecipeSelect_topmost_selection_item TcHmi_Controls_Beckhoff_TcHmiRecipeSelect_topmost_selection_item_folder">..</li>';let t=path?path.split("::"):[];t.pop();let r=t.pop(),s=t.join("::"),c={type:i.RecipeItemType.Folder,key:r,path:s,selectionElement:e.firstElementChild};c.selectionElement&&(o.append(c.selectionElement),c.selectionElement.addEventListener("click",this.__onTopMostRecipeItemClicked(c)))}for(let e=0,t=s.length;e<t;e++){let t=s[e];t.selectionElement&&o.append(t.selectionElement)}for(let e=0,t=c.length;e<t;e++){let t=c[e];t.selectionElement&&o.append(t.selectionElement)}r&&(e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"SelectedRecipeFullName"}),e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"SelectedRecipeName"}),e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"SelectedRecipePath"}))}__openTopMostSelectionFolder(path){this.__serverDomainIsValid&&e.Server.RecipeManagement.listRecipesEx({path:path,domain:this.__serverDomain},null,t=>{t.error===e.Errors.NONE?t.value&&this.__displayTopMostSelectionFolder(t.value,path):TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiRecipeSelect, Id="+this.getId()+"] TcHmi.Server.RecipeManagement.listRecipesEx failed. "+e.Log.buildMessage(t.details))})}__onTopMostRecipeItemClicked(e){return t=>{var r,o,s,c,n,l;if(e.type===i.RecipeItemType.Folder)e.path?this.__openTopMostSelectionFolder(e.path+"::"+e.key):e.key?this.__openTopMostSelectionFolder(e.key):this.__openTopMostSelectionFolder();else if(e.type===i.RecipeItemType.Recipe){this.__currentSelectionRecipeTemp=e;for(let t=0,i=null===(s=null===(o=null===(r=null==e?void 0:e.selectionElement)||void 0===r?void 0:r.parentElement)||void 0===o?void 0:o.children)||void 0===s?void 0:s.length;t<i;t++){let i=null===(n=null===(c=null==e?void 0:e.selectionElement)||void 0===c?void 0:c.parentElement)||void 0===n?void 0:n.children[t];null==i||i.classList.remove("TcHmi_Controls_Beckhoff_TcHmiRecipeSelect_topmost_selected")}null===(l=null==e?void 0:e.selectionElement)||void 0===l||l.classList.add("TcHmi_Controls_Beckhoff_TcHmiRecipeSelect_topmost_selected")}}}__onSelectDivMouseDown(){return t=>{if(!this.getIsEnabled())return;if(!e.Access.checkAccess(this,"operate"))return;if(t&&0!==t.button)return;let path;this.__currentSelectionFolder&&this.__currentSelectionFolder.path&&this.__currentSelectionFolder.key?path=this.__currentSelectionFolder.path+"::"+this.__currentSelectionFolder.key:this.__currentSelectionFolder&&this.__currentSelectionFolder.key&&(path=this.__currentSelectionFolder.key),this.__topMostLayerOpened||(this.__topMostLayerOpened=!0,e.TopMostLayer.add(this,$(this.__elementTopMostSelection),{removeCb:e=>{this.__topMostLayerOpened=!1},centerHorizontal:!0,centerVertical:!0})),this.__openTopMostSelectionFolder(path)}}__onBreadcrumbItemClicked(t){return i=>{if(!this.__serverDomainIsValid)return;let path;t.path?path=t.path+"::"+t.key:t.key&&(path=t.key),this.__topMostLayerOpened||(this.__topMostLayerOpened=!0,e.TopMostLayer.add(this,$(this.__elementTopMostSelection),{removeCb:e=>{this.__topMostLayerOpened=!1},centerHorizontal:!0,centerVertical:!0})),this.__openTopMostSelectionFolder(path)}}__onBreadcrumbScrollingContainerMouseDown(){return t=>{this.__serverDomainIsValid&&this.getIsEnabled()&&e.Access.checkAccess(this,"operate")&&(t&&0!==t.button||(this.__breadcrumbScrollingMouseDown=!0))}}__onDocumentMouseUp(){return t=>{if(this.__serverDomainIsValid&&this.getIsEnabled()&&e.Access.checkAccess(this,"operate")&&(!t||0===t.button)){if(this.__elementBreadcrumbScrollContainer&&this.__breadcrumbScrollingMouseDown){(e=>{setTimeout(()=>{for(let t=0,i=e.length;t<i;t++){let i=e[t];i&&i.breadcrumbElement&&i.breadcrumbEventListenerClick&&i.breadcrumbElement.addEventListener("click",i.breadcrumbEventListenerClick)}},300)})(this.__breadcrumbItems)}this.__breadcrumbScrollingMouseDown=!1}}}__onDocumentMouseMove(){return t=>{if(this.__serverDomainIsValid&&this.getIsEnabled()&&e.Access.checkAccess(this,"operate")&&(!t||0===t.button)&&this.__elementBreadcrumbScrollContainer&&this.__breadcrumbScrollingMouseDown){this.__elementBreadcrumbScrollContainer.scrollLeft=this.__elementBreadcrumbScrollContainer.scrollLeft+-t.movementX;let e=this.__breadcrumbItems;for(let t=0,i=e.length;t<i;t++){let i=e[t];i&&i.breadcrumbElement&&i.breadcrumbEventListenerClick&&i.breadcrumbElement.removeEventListener("click",i.breadcrumbEventListenerClick)}}}}__onTopMostButtonOKPressed(){return(t,i)=>{this.__serverDomainIsValid&&this.getIsEnabled()&&e.Access.checkAccess(this,"operate")&&(this.__currentSelectionFolder=this.__currentSelectionFolderTemp,this.__currentSelectionRecipe=this.__currentSelectionRecipeTemp,this.__processSelection(),e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"SelectedRecipeFullName"}),e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"SelectedRecipeName"}),e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"SelectedRecipePath"}),e.TopMostLayer.remove(this,$(this.__elementTopMostSelection)))}}__onTopMostButtonCancelPressed(){return(t,i)=>{this.__serverDomainIsValid&&this.getIsEnabled()&&e.Access.checkAccess(this,"operate")&&e.TopMostLayer.remove(this,$(this.__elementTopMostSelection))}}__onButtonActivePressed(){return(t,i)=>{this.__serverDomainIsValid&&this.getIsEnabled()&&e.Access.checkAccess(this,"operate")&&e.Access.checkAccess(this,"activateRecipe")&&this.__currentSelectionRecipe&&this.__currentSelectionRecipe.key&&e.Server.RecipeManagement.activateEx(this.__currentSelectionRecipe.key,this.__currentSelectionRecipe.path?this.__currentSelectionRecipe.path:null,{domain:this.__serverDomain},null,t=>{t.error!==e.Errors.NONE&&TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiRecipeSelect, Id="+this.getId()+"] TcHmi.Server.RecipeManagement.activateEx failed. "+e.Log.buildMessage(t.details))})}}__onButtonTeachPressed(){return(t,i)=>{this.__serverDomainIsValid&&this.getIsEnabled()&&e.Access.checkAccess(this,"operate")&&e.Access.checkAccess(this,"teachRecipe")&&this.__currentSelectionRecipe&&this.__currentSelectionRecipe.key&&e.Server.RecipeManagement.teachEx(this.__currentSelectionRecipe.key,this.__currentSelectionRecipe.path?this.__currentSelectionRecipe.path:null,{domain:this.__serverDomain},null,t=>{t.error!==e.Errors.NONE&&TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiRecipeSelect, Id="+this.getId()+"] TcHmi.Server.RecipeManagement.teachEx failed. "+e.Log.buildMessage(t.details))})}}}t.TcHmiRecipeSelect=i,function(e){let t;!function(e){e[e.Invalid=0]="Invalid",e[e.Recipe=1]="Recipe",e[e.Folder=2]="Folder"}(t=e.RecipeItemType||(e.RecipeItemType={}))}(i=t.TcHmiRecipeSelect||(t.TcHmiRecipeSelect={}))}(i=t.Beckhoff||(t.Beckhoff={})),t.registerEx("TcHmiRecipeSelect","TcHmi.Controls.Beckhoff",e.Controls.Beckhoff.TcHmiRecipeSelect)}(t=e.Controls||(e.Controls={}))}(TcHmi||(TcHmi={}));