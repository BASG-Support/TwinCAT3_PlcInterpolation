var TcHmi;!function(e){let t;!function(t){let i;!function(t){class i extends e.Controls.System.TcHmiControl{constructor(t,i,o){super(t,i,o),this.__layouts=null,this.__currentLayout={name:"empty",dimensions:{width:1,height:1},keys:[]},this.__fixedTargetInputElements=null,this.__fixedTargetTextareaElements=null,this.__modifiers={Shift:!1,Control:!1,Alt:!1,Meta:!1,CapsLock:!1,NumLock:!0,Insert:!1},this.__keys=new Map,this.__additionalKeys=new Map,this.__pressedKeyMouse=null,this.__pressedKeysTouch=[],this.__pressedKeys=[],this.__keyActions={KeyChar:{press:(e,t,i)=>{if(null===t)return;let text=t.value;null==text&&(text="");let o=this.__specialKeys[e.key[i]],s=void 0!==o?o:e.key[i];s=this.__unescape(s),null!==this.__compositionKey&&void 0!==this.__compositionKey.composition[s]&&(s=this.__compositionKey.composition[s]),this.__compositionKey=null;let n=this.__getSelectionStartOrEnd(t,"selectionStart"),r=this.__getSelectionStartOrEnd(t,"selectionEnd");t.value=text.substring(0,n)+s+text.substring(this.__modifiers.Insert?r+1:r),this.__setCaretPosition(t,n+s.length)},release:(e,t,i)=>{e.ignoreModifiers||this.__unstickAllKeys()}},Shift:{press:(e,t,i)=>this.__toggleModifier("Shift",!0),release:(e,t,i)=>this.__toggleModifier("Shift",!1)},Control:{press:(e,t,i)=>this.__toggleModifier("Control",!0),release:(e,t,i)=>this.__toggleModifier("Control",!1)},Alt:{press:(e,t,i)=>this.__toggleModifier("Alt",!0),release:(e,t,i)=>this.__toggleModifier("Alt",!1)},Meta:{press:(e,t,i)=>this.__toggleModifier("Meta",!0),release:(e,t,i)=>this.__toggleModifier("Meta",!1)},CapsLock:{press:(e,t,i)=>this.__toggleModifier("CapsLock")},NumLock:{press:(e,t,i)=>this.__toggleModifier("NumLock")},Insert:{press:(e,t,i)=>this.__toggleModifier("Insert")},ArrowLeft:{press:(e,t,i)=>{if(null===t)return;let o=this.__getSelectionStartOrEnd(t,"selectionStart"),s=this.__getSelectionStartOrEnd(t,"selectionEnd");this.__modifiers.Shift||o===s?this.__moveCaret(t,"backward",i=>this.__caretPositionLeft(i,t.value,e.ignoreModifiers),e.ignoreModifiers):this.__setCaretPosition(t,o),this.__arrowUpDownTarget=null}},ArrowRight:{press:(e,t,i)=>{if(null===t)return;let o=this.__getSelectionStartOrEnd(t,"selectionStart"),s=this.__getSelectionStartOrEnd(t,"selectionEnd");this.__modifiers.Shift||o===s?this.__moveCaret(t,"forward",i=>this.__caretPositionRight(i,t.value,e.ignoreModifiers),e.ignoreModifiers):this.__setCaretPosition(t,s),this.__arrowUpDownTarget=null}},ArrowUp:{press:(e,t,i)=>{if(null===t)return;this.__moveCaret(t,"backward",e=>{let i=this.__getMirrorElement(t),o=this.__getCaretCoordinates(i,t.value,e),s=o,n=e-1,r=this.__getCaretCoordinates(i,t.value,n),l=this.__getSelectionStartOrEnd(t,"selectionStart"),a=this.__getSelectionStartOrEnd(t,"selectionEnd");for(null!==this.__arrowUpDownTarget&&this.__arrowUpDownTarget.input===t&&this.__arrowUpDownTarget.selectionStart===l&&this.__arrowUpDownTarget.selectionEnd===a||(this.__arrowUpDownTarget={left:o.left,input:t,selectionStart:l,selectionEnd:a});n>=0&&(r.top===o.top||r.left>this.__arrowUpDownTarget.left);)s=r,n--,r=this.__getCaretCoordinates(i,t.value,n);return i.parentNode.removeChild(i),n<0?0:this.__arrowUpDownTarget.left-r.left<=s.left-this.__arrowUpDownTarget.left||s.top===o.top?n:n+1},e.ignoreModifiers),null!==this.__arrowUpDownTarget&&(this.__arrowUpDownTarget.selectionStart=this.__getSelectionStartOrEnd(t,"selectionStart"),this.__arrowUpDownTarget.selectionEnd=this.__getSelectionStartOrEnd(t,"selectionEnd"))}},ArrowDown:{press:(e,t,i)=>{if(null===t)return;this.__moveCaret(t,"forward",e=>{let i=this.__getMirrorElement(t),o=this.__getCaretCoordinates(i,t.value,e),s=o,n=e+1,r=this.__getCaretCoordinates(i,t.value,n),l=0,a=this.__getSelectionStartOrEnd(t,"selectionStart"),_=this.__getSelectionStartOrEnd(t,"selectionEnd");for(null!==this.__arrowUpDownTarget&&this.__arrowUpDownTarget.input===t&&this.__arrowUpDownTarget.selectionStart===a&&this.__arrowUpDownTarget.selectionEnd===_||(this.__arrowUpDownTarget={left:o.left,input:t,selectionStart:a,selectionEnd:_});n<=t.value.length&&(r.top===o.top||r.left<this.__arrowUpDownTarget.left)&&(0===l||r.top-o.top<=l);)l=r.top-o.top,s=r,n++,r=this.__getCaretCoordinates(i,t.value,n);return i.parentNode.removeChild(i),n>t.value.length?t.value.length:0!==l&&r.top-o.top>l?n-1:r.left-this.__arrowUpDownTarget.left<this.__arrowUpDownTarget.left-s.left||s.top===o.top?n:n-1},e.ignoreModifiers),null!==this.__arrowUpDownTarget&&(this.__arrowUpDownTarget.selectionStart=this.__getSelectionStartOrEnd(t,"selectionStart"),this.__arrowUpDownTarget.selectionEnd=this.__getSelectionStartOrEnd(t,"selectionEnd"))}},Home:{press:(e,t,i)=>{if(null===t)return;this.__moveCaret(t,"backward",i=>{if(this.__modifiers.Control&&!e.ignoreModifiers)return 0;let o=this.__getMirrorElement(t),s=this.__getCaretCoordinates(o,t.value,i),n=i-1,r=this.__getCaretCoordinates(o,t.value,n);for(;n>=0&&r.top===s.top;)n--,r=this.__getCaretCoordinates(o,t.value,n);return o.parentNode.removeChild(o),n<0?0:n+1},e.ignoreModifiers)}},End:{press:(e,t,i)=>{if(null===t)return;this.__moveCaret(t,"forward",i=>{if(this.__modifiers.Control&&!e.ignoreModifiers)return t.value.length;let o=this.__getMirrorElement(t),s=this.__getCaretCoordinates(o,t.value,i),n=i+1,r=this.__getCaretCoordinates(o,t.value,n);for(;n<=t.value.length&&r.top===s.top;)n++,r=this.__getCaretCoordinates(o,t.value,n);return o.parentNode.removeChild(o),n>t.value.length?t.value.length:n-1},e.ignoreModifiers)}},Backspace:{press:(e,t,i)=>{if(null===t)return;let o=this.__getSelectionStartOrEnd(t,"selectionStart"),s=this.__getSelectionStartOrEnd(t,"selectionEnd"),text=t.value;o===s&&(o=this.__caretPositionLeft(o,text,e.ignoreModifiers)),text=text.substring(0,o)+text.substring(s),t.value=text,this.__setCaretPosition(t,o)}},Delete:{press:(e,t,i)=>{if(null===t)return;let o=this.__getSelectionStartOrEnd(t,"selectionStart"),s=this.__getSelectionStartOrEnd(t,"selectionEnd"),text=t.value;o===s&&(s=this.__caretPositionRight(s,text,e.ignoreModifiers)),text=text.substring(0,o)+text.substring(s),t.value=text,this.__setCaretPosition(t,o)}},SelectAll:{press:(t,i,o)=>{if(null!==i){this.__setSelectionStartOrEnd(i,"selectionStart",0),this.__setSelectionStartOrEnd(i,"selectionEnd",i.value.length);try{i.selectionDirection="forward"}catch(t){TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error(`[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id=${this.getId()}] Tried to set selectionDirection on an input element that does not support this. Try using an <input type="text" /> element.`)}}},release:(e,t,i)=>{e.ignoreModifiers||this.__unstickAllKeys()}}},this.__keyCodes={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Escape:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Delete:46,";":186,":":186,"=":187,"+":187,",":188,"<":188,"-":189,_:189,".":190,">":190,"/":191,"?":191,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222,"^":220,"´":221,"`":221},this.__specialKeys={Tab:"\t",Enter:"\n"},this.__stickiedKeys=[],this.__keysToStick=[],this.__compositionKey=null,this.__interactedKeys=[],this.__additionalKeysBaseKey=null,this.__arrowUpDownTarget=null,this.__shownLabels=[],this.__hiddenLabels=[],this.__indirectInputElement=null,this.__activeElements=[],this.__fixedTargetObserver=null,this.__resizedEventDestroyEvent=null,this.__onResized=(e,t)=>{this.__processScaleMode()},this.__onFocusIn=e=>{this.__layouts&&this.__layouts.useIndirectInput&&!this.__fixedTarget&&e.target!==this.__indirectInputElement&&this.__setActiveElements(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement?[e.target]:[])},this.__onFocusOut=e=>{this.__layouts&&this.__layouts.useIndirectInput&&!this.__fixedTarget&&e.relatedTarget!==this.__indirectInputElement&&this.__setActiveElements([])},this.__onRootMouseDownOrTouchStart=e=>{"mousedown"===e.type&&0!==e.button||this.__layouts&&this.__layouts.useIndirectInput&&e.target===this.__indirectInputElement||e.preventDefault()},this.__onDocumentMouseDownOrTouchStart=e=>{if(null!==this.__additionalKeysBaseKey&&e.target!==this.__additionalKeysBaseKey.element&&e.target instanceof Element){let t=this.__additionalKeys.get(this.__additionalKeysBaseKey.element);t&&!t.contains(e.target)&&this.__hideAdditionalKeys()}},this.__onMouseDown=t=>{if(!(0===t.button&&t.target instanceof HTMLElement&&this.getIsEnabled()&&e.Access.checkAccess(this,"operate")))return;let i=t.target;for(;i&&(!i.classList.contains("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key")||!i.classList.contains("tchmi-keyboard-template-key"));){if(i===t.currentTarget)return;i=i.parentElement}i&&this.__pressedKeyMouse!==i&&(i.classList.add("down"),this.__pressedKeyMouse=i,this.__keyInteractionStarted(i),this.__raiseKeyPressStarted(i))},this.__onMouseOver=t=>{if(!(t.target instanceof HTMLElement&&this.getIsEnabled()&&e.Access.checkAccess(this,"operate")))return;let i=t.target;for(;i&&(!i.classList.contains("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key")||!i.classList.contains("tchmi-keyboard-template-key"));){if(i===t.currentTarget)return;i=i.parentElement}i&&(i.classList.add("hover"),t.buttons>0&&null!==this.__additionalKeysBaseKey&&this.__additionalKeysBaseKey.dragging&&this.__additionalKeys.get(this.__additionalKeysBaseKey.element)===i.parentElement&&!i.classList.contains("down")&&(i.classList.add("down"),this.__raiseKeyPressStarted(i)))},this.__onMouseOut=t=>{if(!(t.target instanceof HTMLElement&&this.getIsEnabled()&&e.Access.checkAccess(this,"operate")))return;let i=t.target;for(;i&&(!i.classList.contains("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key")||!i.classList.contains("tchmi-keyboard-template-key"));){if(i===t.currentTarget)return;i=i.parentElement}i&&(this.__handleMouseOrTouchLeave(i,{x:t.clientX,y:t.clientY}),this.__pressedKeyMouse=null,this.__raiseKeyPressEnded(i,"Canceled"))},this.__onMouseUp=t=>{if(!(t.target instanceof HTMLElement&&this.getIsEnabled()&&e.Access.checkAccess(this,"operate")))return;let i=t.target;for(;i&&(!i.classList.contains("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key")||!i.classList.contains("tchmi-keyboard-template-key"));){if(i===t.currentTarget)return;i=i.parentElement}i&&(i.classList.remove("down"),null!==this.__additionalKeysBaseKey&&(this.__additionalKeysBaseKey.dragging&&this.__additionalKeys.get(this.__additionalKeysBaseKey.element)===i.parentElement&&(this.__pressedKeyMouse=i,this.__keyInteractionStarted(i)),this.__additionalKeysBaseKey.dragging=!1),i===this.__pressedKeyMouse&&(this.__pressedKeyMouse=null,this.__keyInteractionEnded(i),this.__raiseKeyPressEnded(i,"Finished")))},this.__onTouchStart=t=>{if(this.getIsEnabled()&&e.Access.checkAccess(this,"operate"))for(let e=0,i=t.changedTouches.length;e<i;e++){let i=t.changedTouches[e];if(!(i.target instanceof HTMLElement))continue;let o=i.target;for(;o&&(!o.classList.contains("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key")||!o.classList.contains("tchmi-keyboard-template-key"));){if(o===t.currentTarget){o=null;break}o=o.parentElement}o&&(this.__pressedKeysTouch.filter(e=>e.keyElement===o).length>0||(o.classList.add("hover","down"),this.__pressedKeysTouch.push({touchID:i.identifier,keyElement:o}),this.__keyInteractionStarted(o),this.__raiseKeyPressStarted(o)))}},this.__onTouchMove=t=>{if(this.getIsEnabled()&&e.Access.checkAccess(this,"operate"))for(let e=0,i=t.changedTouches.length;e<i;e++){let i=this.__pressedKeysTouch.filter(i=>i.touchID===t.changedTouches[e].identifier)[0];if(!i)continue;let o=t.changedTouches[e],s=document.elementFromPoint(o.clientX,o.clientY);if(null!==s&&(s.classList.contains("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label")||s.classList.contains("tchmi-keyboard-template-label"))&&(s=s.parentElement),null===s||s.classList.contains("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key")&&s.classList.contains("tchmi-keyboard-template-key")||(s=null),s!==i.keyElement&&null!==i.keyElement){let e=this.__handleMouseOrTouchLeave(i.keyElement,{x:o.clientX,y:o.clientY});if(this.__raiseKeyPressEnded(i.keyElement,"Canceled"),i.keyElement=null,!e)continue}null!==s&&null===i.keyElement&&(s.classList.add("hover"),null!==this.__additionalKeysBaseKey&&this.__additionalKeysBaseKey.dragging&&this.__additionalKeys.get(this.__additionalKeysBaseKey.element)===s.parentElement&&(s.classList.add("down"),this.__raiseKeyPressStarted(s)),i.keyElement=s)}},this.__onTouchEndOrCancel=t=>{if(this.getIsEnabled()&&e.Access.checkAccess(this,"operate"))for(let e=0,i=t.changedTouches.length;e<i;e++){let i=t.changedTouches[e],o=this.__pressedKeysTouch.filter(e=>e.touchID===i.identifier)[0];if(!(o&&i.target instanceof HTMLElement))continue;let s=i.target;for(;s&&(s.classList.contains(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key")||s.classList.contains(".tchmi-keyboard-template-key"));){if(s===t.currentTarget){s=null;break}s=s.parentElement}if(!s)continue;s.classList.remove("hover"),s.classList.remove("down"),this.__pressedKeysTouch.splice(this.__pressedKeysTouch.indexOf(o),1);let n=document.elementFromPoint(i.clientX,i.clientY);null!==n&&(n.classList.contains("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label")||n.classList.contains("tchmi-keyboard-template-label"))&&(n=n.parentElement),null!==n&&(n.classList.remove("hover"),n.classList.remove("down")),null===n||n.classList.contains("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key")&&n.classList.contains("tchmi-keyboard-template-key")||(n=null),null===n||n!==t.target&&n.parentElement!==t.target||(null!==this.__additionalKeysBaseKey&&(this.__additionalKeysBaseKey.dragging&&this.__additionalKeys.get(this.__additionalKeysBaseKey.element)===n.parentElement&&this.__keyInteractionStarted(n),this.__additionalKeysBaseKey.dragging=!1),this.__keyInteractionEnded(n),this.__raiseKeyPressEnded(n,"Finished"))}},this.__onResolverForIndirectInputPaddingWatchCallback=t=>{!1===this.__isAttached&&this.__suspendObjectResolver("indirectInputPadding"),t.error===e.Errors.NONE?tchmi_equal(t.value,this.__indirectInputPadding)||(this.__indirectInputPadding=t.value,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"IndirectInputPadding"}),this.__processIndirectInputPadding()):TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+", Attribute=IndirectInputPadding] Resolving symbols from object failed with error: "+e.Log.buildMessage(t.details))},this.__onResolverForKeyboardPaddingWatchCallback=t=>{!1===this.__isAttached&&this.__suspendObjectResolver("keyboardPadding"),t.error===e.Errors.NONE?tchmi_equal(t.value,this.__keyboardPadding)||(this.__keyboardPadding=t.value,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"KeyboardPadding"}),this.__processKeyboardPadding()):TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+", Attribute=KeyboardPadding] Resolving symbols from object failed with error: "+e.Log.buildMessage(t.details))},this.__onResolverForKeyPaddingWatchCallback=t=>{!1===this.__isAttached&&this.__suspendObjectResolver("keyPadding"),t.error===e.Errors.NONE?tchmi_equal(t.value,this.__keyPadding)||(this.__keyPadding=t.value,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"KeyPadding"}),this.__processKeyPadding()):TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+", Attribute=KeyPadding] Resolving symbols from object failed with error: "+e.Log.buildMessage(t.details))},this.__onResolverForAdditionalKeyBackdropPaddingWatchCallback=t=>{!1===this.__isAttached&&this.__suspendObjectResolver("additionalKeyBackdropPadding"),t.error===e.Errors.NONE?tchmi_equal(t.value,this.__additionalKeyBackdropPadding)||(this.__additionalKeyBackdropPadding=t.value,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"AdditionalKeyBackdropPadding"}),this.__processAdditionalKeyBackdropPadding()):TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+", Attribute=AdditionalKeyBackdropPadding] Resolving symbols from object failed with error: "+e.Log.buildMessage(t.details))},this.__onResolverForKeyBackgroundColorWatchCallback=t=>{!1===this.__isAttached&&this.__suspendObjectResolver("keyBackgroundColor"),t.error===e.Errors.NONE?tchmi_equal(t.value,this.__keyBackgroundColor)||(this.__keyBackgroundColor=t.value,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"KeyBackgroundColor"}),this.__processKeyBackgroundColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+", Attribute=KeyBackgroundColor] Resolving symbols from object failed with error: "+e.Log.buildMessage(t.details))},this.__onResolverForLabelColorWatchCallback=t=>{!1===this.__isAttached&&this.__suspendObjectResolver("labelColor"),t.error===e.Errors.NONE?tchmi_equal(t.value,this.__labelColor)||(this.__labelColor=t.value,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"LabelColor"}),this.__processLabelColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+", Attribute=LabelColor] Resolving symbols from object failed with error: "+e.Log.buildMessage(t.details))},this.__onResolverForLabelStrokeColorWatchCallback=t=>{!1===this.__isAttached&&this.__suspendObjectResolver("labelStrokeColor"),t.error===e.Errors.NONE?tchmi_equal(t.value,this.__labelStrokeColor)||(this.__labelStrokeColor=t.value,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"LabelStrokeColor"}),this.__processLabelStrokeColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+", Attribute=LabelStrokeColor] Resolving symbols from object failed with error: "+e.Log.buildMessage(t.details))},this.__onResolverForLabelFillColorWatchCallback=t=>{!1===this.__isAttached&&this.__suspendObjectResolver("labelFillColor"),t.error===e.Errors.NONE?tchmi_equal(t.value,this.__labelFillColor)||(this.__labelFillColor=t.value,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"LabelFillColor"}),this.__processLabelFillColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+", Attribute=LabelFillColor] Resolving symbols from object failed with error: "+e.Log.buildMessage(t.details))},this.__onResolverForAdditionalKeyBackdropColorWatchCallback=t=>{!1===this.__isAttached&&this.__suspendObjectResolver("additionalKeyBackdropColor"),t.error===e.Errors.NONE?tchmi_equal(t.value,this.__additionalKeyBackdropColor)||(this.__additionalKeyBackdropColor=t.value,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"AdditionalKeyBackdropColor"}),this.__processAdditionalKeyBackdropColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+", Attribute=AdditionalKeyBackdropColor] Resolving symbols from object failed with error: "+e.Log.buildMessage(t.details))}}__previnit(){if(this.__elementTemplateRoot=this.__element.find(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template"),0===this.__elementTemplateRoot.length&&(this.__elementTemplateRoot=this.__element.find(".tchmi-keyboard-template")),this.__elementPaddingContainer=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-padding-container"),0===this.__elementPaddingContainer.length&&(this.__elementPaddingContainer=this.__elementTemplateRoot.find(".tchmi-keyboard-template-padding-container")),0===this.__elementTemplateRoot.length||0===this.__elementPaddingContainer.length)throw new Error("Invalid Template.html");super.__previnit()}__init(){if(super.__init(),!this.__layoutFile){let e=this.__attrs["data-tchmi-layout"];e&&this.setLayout(e.value)}const e=!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!0,capture:!1},t=!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!1,capture:!1};this.__element[0].addEventListener("mousedown",this.__onRootMouseDownOrTouchStart,t),this.__element[0].addEventListener("touchstart",this.__onRootMouseDownOrTouchStart,t),this.__element[0].addEventListener("mousedown",this.__onMouseDown,e),this.__element[0].addEventListener("mouseover",this.__onMouseOver,e),this.__element[0].addEventListener("mouseout",this.__onMouseOut,e),this.__element[0].addEventListener("mouseup",this.__onMouseUp,e),this.__element[0].addEventListener("touchstart",this.__onTouchStart,e),this.__element[0].addEventListener("touchmove",this.__onTouchMove,e),this.__element[0].addEventListener("touchend",this.__onTouchEndOrCancel,e),this.__element[0].addEventListener("touchcancel",this.__onTouchEndOrCancel,e)}__attach(){super.__attach(),this.__resizedEventDestroyEvent=e.EventProvider.register(this.__id+".onResized",this.__onResized);const t=!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!0,capture:!1};document.addEventListener("focusin",this.__onFocusIn,t),document.addEventListener("focusout",this.__onFocusOut,t),document.addEventListener("mousedown",this.__onDocumentMouseDownOrTouchStart,t),document.addEventListener("touchstart",this.__onDocumentMouseDownOrTouchStart,t),this.__processFixedTarget()}__detach(){super.__detach(),null!==this.__resizedEventDestroyEvent&&(this.__resizedEventDestroyEvent(),this.__resizedEventDestroyEvent=null),document.removeEventListener("focusin",this.__onFocusIn),document.removeEventListener("focusout",this.__onFocusOut),document.removeEventListener("mousedown",this.__onDocumentMouseDownOrTouchStart),document.removeEventListener("touchstart",this.__onDocumentMouseDownOrTouchStart)}destroy(){this.__keepAlive||(this.__element[0].removeEventListener("mousedown",this.__onRootMouseDownOrTouchStart),this.__element[0].removeEventListener("touchstart",this.__onRootMouseDownOrTouchStart),this.__element[0].removeEventListener("mousedown",this.__onMouseDown),this.__element[0].removeEventListener("mouseenter",this.__onMouseOver),this.__element[0].removeEventListener("mouseleave",this.__onMouseOut),this.__element[0].removeEventListener("mouseup",this.__onMouseUp),this.__element[0].removeEventListener("touchstart",this.__onTouchStart),this.__element[0].removeEventListener("touchmove",this.__onTouchMove),this.__element[0].removeEventListener("touchend",this.__onTouchEndOrCancel),this.__element[0].removeEventListener("touchcancel",this.__onTouchEndOrCancel),this.__layoutFileXhr&&(this.__layoutFileXhr.abort(),this.__layoutFileXhr=void 0),super.destroy())}__handleMouseOrTouchLeave(e,t){e.classList.remove("hover"),e.classList.remove("down");let o=this.__interactedKeys.filter(t=>t.element===e)[0];if(void 0===o)return!1;if(o.key.longpressAction===i.LongpressAction.ADDITIONALKEYS&&!o.timedOut){let i=e.getBoundingClientRect(),s={x:i.left+i.width/2,y:i.top+i.height/2},n=e.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-backdrop")[0].getBoundingClientRect(),r={x:Math.round((t.x-s.x)/i.width),y:Math.round((t.y-s.y)/i.height)},l=!1;if((n.top<s.y&&n.left<s.x&&n.right>s.x&&r.y<=-1||n.bottom>s.y&&n.left<s.x&&n.right>s.x&&r.y>=1||n.left<s.x&&n.top<s.y&&n.bottom>s.y&&r.x<=-1||n.right>s.x&&n.top<s.y&&n.bottom>s.y&&r.x>=1)&&(l=!0),l)return-1!==o.timeoutID&&(window.clearTimeout(o.timeoutID),o.timeoutID=-1),o.timedOut=!0,this.__showAdditionalKeys(o.element),!1}return this.__interactedKeys=this.__interactedKeys.filter(e=>e.element!==o.element),-1!==o.timeoutID&&(window.clearTimeout(o.timeoutID),o.timeoutID=-1),!0}__showAdditionalKeys(t){let i=this.__additionalKeys.get(t);if(!i)return;let o=t.getBoundingClientRect();i.style.width=o.width+"px",i.style.height=o.height+"px",i.style.left=o.left+"px",i.style.top=o.top+"px";const s=!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!0,capture:!1},n=!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!1,capture:!1};i.addEventListener("mousedown",this.__onRootMouseDownOrTouchStart,n),i.addEventListener("touchstart",this.__onRootMouseDownOrTouchStart,n),i.addEventListener("mousedown",this.__onMouseDown,s),i.addEventListener("mouseover",this.__onMouseOver,s),i.addEventListener("mouseout",this.__onMouseOut,s),i.addEventListener("mouseup",this.__onMouseUp,s),i.addEventListener("touchstart",this.__onTouchStart,s),i.addEventListener("touchmove",this.__onTouchMove,s),i.addEventListener("touchend",this.__onTouchEndOrCancel,s),i.addEventListener("touchcancel",this.__onTouchEndOrCancel,s),e.TopMostLayer.addEx($(i),{dimBackground:!1,modal:!1,removeCb:()=>t.appendChild(i)}),t.classList.add("show-additional-keys"),this.__additionalKeysBaseKey={element:t,dragging:!0}}__hideAdditionalKeys(){if(null===this.__additionalKeysBaseKey)return;let t=this.__additionalKeys.get(this.__additionalKeysBaseKey.element);t&&(t.removeEventListener("mousedown",this.__onRootMouseDownOrTouchStart),t.removeEventListener("touchstart",this.__onRootMouseDownOrTouchStart),t.removeEventListener("mousedown",this.__onMouseDown),t.removeEventListener("mouseover",this.__onMouseOver),t.removeEventListener("mouseout",this.__onMouseOut),t.removeEventListener("mouseup",this.__onMouseUp),t.removeEventListener("touchstart",this.__onTouchStart),t.removeEventListener("touchmove",this.__onTouchMove),t.removeEventListener("touchend",this.__onTouchEndOrCancel),t.removeEventListener("touchcancel",this.__onTouchEndOrCancel),e.TopMostLayer.removeEx($(t)),this.__additionalKeysBaseKey.element.classList.remove("show-additional-keys"),this.__interactedKeys=this.__interactedKeys.filter(e=>e.element!==this.__additionalKeysBaseKey.element),this.__additionalKeysBaseKey=null)}__keyInteractionStarted(e){null!==this.__additionalKeysBaseKey&&this.__additionalKeysBaseKey.element!==e&&this.__additionalKeys.get(this.__additionalKeysBaseKey.element)!==e.parentElement&&this.__hideAdditionalKeys();let t=this.__interactedKeys.filter(t=>t.element===e)[0];if(void 0===t){if(t={element:e,key:this.__getKey(e),pressed:!1,timeoutID:-1,timedOut:!1},null!==this.__additionalKeysBaseKey&&this.__additionalKeysBaseKey.element===t.element)t.hideAdditionalKeys=!0;else if(i.isStandardKey(t.key)){let e=t.key;switch(e.longpressAction){case i.LongpressAction.REPEAT:t.timeoutID=window.setTimeout(()=>{let i=()=>{this.__pressKey(e,!0),t.pressed=!0,t.timeoutID=window.setTimeout(i,this.__repetitionDelay)};this.__pressKey(e),t.pressed=!0,t.timedOut=!0,t.timeoutID=window.setTimeout(i,this.__repetitionDelay)},this.__longpressDelay);break;case i.LongpressAction.ADDITIONALKEYS:t.timeoutID=window.setTimeout(()=>{this.__showAdditionalKeys(t.element),t.timedOut=!0,t.timeoutID=-1},this.__longpressDelay);break;case i.LongpressAction.LOCK:if(e.mode===i.KeyMode.STICKY){if(e.active&&!e.locked){let t=this.__getStickiedKey(e,this.__stickiedKeys);if(void 0!==t&&void 0!==this.__longpressDelay&&Date.now()-t.stickTime<=this.__longpressDelay){let t=this.__getStickiedKey(e,this.__keysToStick);if(void 0===t){let t=this.__keyToStickiedKey(e,!0);this.__keysToStick.push(t)}else t.locked=!0;break}}t.timeoutID=window.setTimeout(()=>{let i=this.__getStickiedKey(e,this.__keysToStick);void 0!==i&&(i.locked=!0),t.timedOut=!0,t.timeoutID=-1},this.__longpressDelay)}case i.LongpressAction.NONE:if(e.mode===i.KeyMode.STICKY&&(this.__pressKey(e),t.pressed=!0,void 0===this.__getStickiedKey(e,this.__keysToStick))){let t=this.__keyToStickiedKey(e,!1);this.__keysToStick.push(t)}}}this.__interactedKeys.push(t)}else t.hideAdditionalKeys=!0}__keyInteractionEnded(e){let t=this.__interactedKeys.filter(t=>t.element===e)[0];if(void 0===t)return;if(null!==this.__additionalKeysBaseKey&&this.__additionalKeysBaseKey.element===t.element)return void(t.hideAdditionalKeys&&this.__hideAdditionalKeys());t.element.classList.contains("additional-key")&&this.__hideAdditionalKeys();let o=t.key;if(this.__interactedKeys.splice(this.__interactedKeys.indexOf(t),1),t.pressed||(this.__pressKey(o),t.pressed=!0),-1!==t.timeoutID&&(window.clearTimeout(t.timeoutID),t.timeoutID=-1),i.isStandardKey(o))if(o.mode===i.KeyMode.STICKY){let e=this.__getStickiedKey(o,this.__keysToStick);!o.active||!o.locked&&void 0!==e&&e.locked?void 0!==e?(this.__stickKey(o,e.locked),this.__keysToStick.splice(this.__keysToStick.indexOf(e),1)):this.__releaseKey(o):this.__unstickKey(o,!0)}else this.__releaseKey(o),o.mode===i.KeyMode.TOGGLE&&this.__keys.forEach((e,t)=>{i.isStandardKey(o)&&(o.specialCapslock&&i.isStandardKeyDefinition(e)?e.capsLock&&e.capsLock[o.keyPath.join("")]===o.key.join(",")&&t.classList.toggle("active"):e[o.keyPath.join("")]===o.key.join(",")&&t.classList.toggle("active"))});else this.__releaseKey(o)}__pressKey(e,t=!1){if(!i.isStandardKey(e)||e.mode===i.KeyMode.STICKY&&e.active)return;this.__layouts&&this.__layouts.useIndirectInput&&this.__indirectInputElement&&document.activeElement!==this.__indirectInputElement&&this.__startIndirectInput();let o=this.__getTargetElements();for(let s=0,n=o.length;s<n;s++){let n=o[s];for(let o=0,s=e.code.length;o<s;o++){let s=!this.__dispatchKeyEvent(n,"keydown",e,o,t),r=!1;if(void 0!==e.composition&&(r=null===this.__compositionKey,r&&(this.__compositionKey=e)),null!==this.__compositionKey&&e.type===i.KeyType.CHARACTER&&!r&&void 0===this.__compositionKey.composition[e.key[o]]&&this.__dispatchKeyEvent(n,"keypress",this.__compositionKey,0,t)){let e=this.__keyActions.KeyChar;void 0!==e&&(this.__isSuitableElement(n)?e.press(this.__compositionKey,n,0):e.press(this.__compositionKey,null,0))}if(e.valid&&!s&&!r){e.type===i.KeyType.CHARACTER&&(s=!this.__dispatchKeyEvent(n,"keypress",e,o,t));let r=this.__keyActions[e.type===i.KeyType.CHARACTER?"KeyChar":e.key[o]||""];if(void 0!==r&&!s&&(this.__isSuitableElement(n)?r.press(e,n,o):r.press(e,null,o),e.type===i.KeyType.CHARACTER||e.type===i.KeyType.EDIT)){let e;"function"==typeof Event?e=new Event("input",{bubbles:!0}):(e=document.createEvent("event"),e.initEvent("input",!0,!1)),n.dispatchEvent(e)}}}}}__releaseKey(e){if(e.type===i.KeyType.LAYOUTSWITCH){if(null!==this.__layouts){let t=this.__layouts.layouts.filter(t=>t.name===e.layoutName)[0];void 0!==t&&this.__activateLayout(t)}}else if(e.type===i.KeyType.INDIRECTINPUT){if(this.__indirectInputElement)switch(e.component){case i.IndirectInputComponent.ACCEPT:this.__endIndirectInput();break;case i.IndirectInputComponent.CANCEL:this.__endIndirectInput(!0)}}else{this.__layouts&&this.__layouts.useIndirectInput&&this.__indirectInputElement&&document.activeElement!==this.__indirectInputElement&&this.__startIndirectInput();let t=this.__getTargetElements();for(let o=0,s=t.length;o<s;o++){let s=t[o];for(let t=0,o=e.code.length;t<o;t++){let o=!this.__dispatchKeyEvent(s,"keyup",e,t);if(e.valid&&!o){let o=this.__keyActions[e.type===i.KeyType.CHARACTER?"KeyChar":e.key[t]||""];void 0!==o&&void 0!==o.release&&(this.__isSuitableElement(s)?o.release(e,s,t):o.release(e,null,t))}}}}}__getKey(t){function o(e,t){if(void 0===e)return[];let i=0,o=e.indexOf(t,i+1),s=[];for(;o>-1;)s.push(e.substring(i,o)),i=o+t.length,o=e.indexOf(t,i+1);return i<e.length&&s.push(e.substring(i)),s}let s=this.__keys.get(t);if(!s)throw new Error("Invalid key");if("layout-switch"===s.type)return{type:i.KeyType.LAYOUTSWITCH,layoutName:s.layoutName};if("indirect-input"===s.type){let t=e.ValueConverter.toEnum(s.component,i.IndirectInputComponent);if(null===t)throw new Error("Invalid value for component in indirect input definition");return{type:i.KeyType.INDIRECTINPUT,component:t}}let n={code:o(s.code,","),key:[],keyPath:[],unmodifiedKey:o(s.key,","),type:e.ValueConverter.toEnum(s.type,i.KeyType,i.KeyType.CHARACTER),mode:e.ValueConverter.toEnum(s.mode,i.KeyMode,i.KeyMode.NORMAL),location:(s.location||"").split(",").map(t=>e.ValueConverter.toEnum(t,i.KeyLocation,i.KeyLocation.STANDARD)),active:t.classList.contains("active"),locked:t.classList.contains("locked"),noCapsLock:s.noCapsLock||!1,ignoreModifiers:s.ignoreModifiers||!1,valid:!0,longpressAction:e.ValueConverter.toEnum(s.longpressAction,i.LongpressAction,i.LongpressAction.NONE),specialCapslock:!1},path=[];if(!n.ignoreModifiers){if(this.__modifiers.Shift&&path.push("Shift"),this.__modifiers.Control&&path.push("Ctrl"),this.__modifiers.Alt&&path.push("Alt"),this.__modifiers.CapsLock&&!n.noCapsLock){if(s.capsLock){let e=path.join("")+"Key";e=e.substr(0,1).toLowerCase()+e.substr(1),void 0!==s.capsLock[e]&&(n.specialCapslock=!0)}n.specialCapslock||(-1===path.indexOf("Shift")?path.unshift("Shift"):path.shift())}this.__modifiers.NumLock&&Object.keys(s).filter(e=>e.startsWith("numlock")).length>0&&path.unshift("Numlock"),path.length>0&&(path[0]=path[0].toLowerCase())}let r=(n.specialCapslock?s.capsLock:s)[path.length>0?path.concat(["Type"]).join(""):"type"];void 0!==r&&path.length>0?n.type=e.ValueConverter.toEnum(r,i.KeyType,i.KeyType.CHARACTER):n.type!==i.KeyType.CHARACTER&&(path=[]);let l=(n.specialCapslock?s.capsLock:s)[path.length>0?path.concat(["Key"]).join(""):"key"],a=path.length>0?path.concat(["Composition"]).join(""):"composition";if(void 0!==(n.specialCapslock?s.capsLock:s)[a]&&(n.composition=e.ValueConverter.toObject((n.specialCapslock?s.capsLock:s)[a],void 0)),void 0===l&&(n.valid=!1,l=s.key),n.key=o(l,","),"Any"===n.key[0]&&(void 0===this.__getKey.__anyKey?(n.unmodifiedKey[0]=n.key[0]=String.fromCharCode(Math.floor(95*Math.random()+32)),this.__getKey.__anyKey=n.key[0]):(n.unmodifiedKey[0]=n.key[0]=this.__getKey.__anyKey,delete this.__getKey.__anyKey)),n.keyPath=path.length>0?path.concat(["Key"]):["key"],n.code.length>n.key.length?n.code.splice(n.key.length,n.code.length-n.key.length):n.key.length>n.code.length&&n.key.splice(n.code.length,n.key.length-n.code.length),n.location.length<n.code.length)for(let e=n.location.length,t=n.code.length;e<t;e++)n.location.push(i.KeyLocation.STANDARD);else n.location.length>n.code.length&&n.location.splice(n.code.length,n.location.length-n.code.length);return n}__getTargetElements(){if(this.__layouts&&this.__layouts.useIndirectInput&&this.__indirectInputElement)return[this.__indirectInputElement];if(this.__fixedTarget){let t=[];null!==this.__fixedTargetInputElements&&(t=t.concat(Array.prototype.slice.apply(this.__fixedTargetInputElements))),null!==this.__fixedTargetTextareaElements&&(t=t.concat(Array.prototype.slice.apply(this.__fixedTargetTextareaElements)));let i=e.Controls.get(this.__fixedTarget);return 0===t.length&&void 0!==i&&t.push(i.getElement()[0]),t}return document.activeElement?[document.activeElement]:[]}__dispatchKeyEvent(e,t,o,s,n=!1){let r,l={key:void 0!==o.composition&&"keypress"!==t?"Dead":o.key[s],code:o.code[s],location:o.location[s],shiftKey:this.__modifiers.Shift,ctrlKey:this.__modifiers.Control,altKey:this.__modifiers.Alt,metaKey:this.__modifiers.Meta,bubbles:!0,cancelable:!0,repeat:n};if(null!==this.__compositionKey&&void 0!==this.__compositionKey.composition[l.key]&&(l.key=this.__compositionKey.composition[l.key]),"keypress"===t&&o.type===i.KeyType.CHARACTER){if(void 0!==o.key[s]){let e=this.__specialKeys[o.key[s]],t=void 0!==e?e:o.key[s];t=this.__unescape(t),null!==this.__compositionKey&&void 0!==this.__compositionKey.composition[t]&&(t=this.__compositionKey.composition[t]),l.charCode=t.charCodeAt(0),l.keyCode=l.charCode,l.which=l.charCode}}else void 0!==this.__keyCodes[o.key[s]]?(l.keyCode=this.__keyCodes[o.key[s]],l.which=l.keyCode):o.type===i.KeyType.CHARACTER&&(void 0!==o.unmodifiedKey[s]?l.keyCode=this.__unescape(o.unmodifiedKey[s]).toUpperCase().charCodeAt(0):void 0!==o.key[s]&&(l.keyCode=this.__unescape(o.key[s]).toUpperCase().charCodeAt(0)),l.which=l.keyCode);if("function"==typeof KeyboardEvent)r=new KeyboardEvent(t,l);else{let e=[];l.altKey&&e.push("Alt"),l.altKey&&l.ctrlKey&&e.push("AltGraph"),this.__modifiers.CapsLock&&e.push("CapsLock"),l.ctrlKey&&e.push("Control"),l.metaKey&&e.push("Meta"),this.__modifiers.NumLock&&e.push("NumLock"),l.shiftKey&&e.push("Shift"),r=document.createEvent("KeyboardEvent"),r.initKeyboardEvent(t,l.bubbles||!1,l.cancelable||!1,window,l.key||"",l.location||0,e.join(" "),l.repeat||!1,"")}return r.which!==l.which&&void 0!==l.which&&(Object.defineProperty(r,"which",{get:function(){return this.whichVal}}),r.whichVal=l.which,void 0!==l.charCode&&(Object.defineProperty(r,"charCode",{get:function(){return this.charCodeVal}}),r.charCodeVal=l.charCode),void 0!==l.keyCode&&(Object.defineProperty(r,"keyCode",{get:function(){return this.keyCodeVal}}),r.keyCodeVal=l.keyCode)),e.dispatchEvent(r)}__toggleModifier(e,t){this.__modifiers[e]=void 0===t?!this.__modifiers[e]:t,this.__updateActiveModifiers()}__updateActiveModifiers(){let e=[];if(this.__element[0].classList.forEach(t=>{-1!==t.indexOf("-active")&&e.push(t)}),this.__element[0].classList.remove(...e),this.__shownLabels.forEach(e=>e.classList.remove("show")),this.__hiddenLabels.forEach(e=>e.classList.remove("hide")),this.__shownLabels=[],this.__hiddenLabels=[],this.__modifiers.Shift||this.__modifiers.Control||this.__modifiers.Alt||this.__modifiers.Meta||this.__modifiers.CapsLock){let e="";this.__modifiers.Shift&&(e+="shift"),this.__modifiers.Control&&this.__modifiers.Alt?e+="altgr":this.__modifiers.Control?e+="control":this.__modifiers.Alt&&(e+="alt"),this.__modifiers.Meta&&(e+="meta"),e.length>0&&this.__element[0].classList.add(e+"-active");let t=e.length>0?e:"default";if(this.__modifiers.CapsLock){this.__element[0].classList.add("capslock-active");let i=".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key.no-caps-lock .TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.show-"+t,o=".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key.no-caps-lock .TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.hide-"+t,s=e;this.__modifiers.Shift?(s=s.replace("shift",""),0===s.length&&(s="default")):s="shift"+s,i+=", .TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key:not(.no-caps-lock) .TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.show-"+s,o+=", .TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key:not(.no-caps-lock) .TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.hide-"+s,e="capslock"+e,i+=", .TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key:not(.no-caps-lock) .TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.show-"+e,o+=", .TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key:not(.no-caps-lock) .TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.hide-"+e,this.__shownLabels.push(...Array.from(this.__elementPaddingContainer[0].querySelectorAll(i))),this.__hiddenLabels.push(...Array.from(this.__elementPaddingContainer[0].querySelectorAll(o)))}else this.__shownLabels.push(...Array.from(this.__elementPaddingContainer[0].querySelectorAll(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.show-"+t))),this.__hiddenLabels.push(...Array.from(this.__elementPaddingContainer[0].querySelectorAll(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.hide-"+t)))}else this.__element[0].classList.add("default-active"),this.__shownLabels.push(...Array.from(this.__elementPaddingContainer[0].querySelectorAll(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.show-default"))),this.__hiddenLabels.push(...Array.from(this.__elementPaddingContainer[0].querySelectorAll(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.hide-default")));this.__modifiers.NumLock&&(this.__element[0].classList.add("numlock-active"),this.__shownLabels.push(...Array.from(this.__elementPaddingContainer[0].querySelectorAll(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.show-numlock"))),this.__hiddenLabels.push(...Array.from(this.__elementPaddingContainer[0].querySelectorAll(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.hide-numlock")))),this.__modifiers.Insert&&(this.__element[0].classList.add("insert-active"),this.__shownLabels.push(...Array.from(this.__elementPaddingContainer[0].querySelectorAll(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.show-insert"))),this.__hiddenLabels.push(...Array.from(this.__elementPaddingContainer[0].querySelectorAll(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label.hide-insert")))),this.__shownLabels.forEach(e=>e.classList.add("show")),this.__hiddenLabels.forEach(e=>e.classList.add("hide"))}__stickKey(e,t=!1){if(e.mode!==i.KeyMode.STICKY)return;let o=this.__getStickiedKey(e,this.__stickiedKeys);void 0===o?(o=this.__keyToStickiedKey(e,t),o.stickTime=Date.now(),this.__stickiedKeys.push(o)):o.locked=t,this.__keys.forEach((o,s)=>{e.specialCapslock&&i.isStandardKeyDefinition(o)?o.capsLock&&o.capsLock[e.keyPath.join("")]===e.key.join(",")&&(s.classList.add("active"),s.classList.toggle("locked",t)):o[e.keyPath.join("")]===e.key.join(",")&&(s.classList.add("active"),s.classList.toggle("locked",t))})}__unstickKey(e,t=!1){if(e.mode!==i.KeyMode.STICKY)return;let o=this.__stickiedKeys.indexOf(e);if(-1===o)for(let t=0,i=this.__stickiedKeys.length;t<i;t++)if(this.__stickiedKeys[t].key.join(",")===e.key.join(",")&&this.__stickiedKeys[t].keyPath.join("-")===e.keyPath.join("-")){o=t;break}if(-1!==o){if(!this.__stickiedKeys[o].locked||t)return this.__releaseKey(this.__stickiedKeys[o]),this.__stickiedKeys.splice(o,1),this.__keys.forEach((t,o)=>{e.specialCapslock&&i.isStandardKeyDefinition(t)?t.capsLock&&t.capsLock[e.keyPath.join("")]===e.key.join(",")&&o.classList.remove("active","locked"):t[e.keyPath.join("")]===e.key.join(",")&&o.classList.remove("active","locked")}),!0}return!1}__unstickAllKeys(){if(!this.__releaseStickyKeysManually){let e=0;for(let t=0,i=this.__stickiedKeys.length;t<i;t++){this.__unstickKey(this.__stickiedKeys[e])||e++}}this.__keysToStick=[]}__getStickiedKey(e,t){return t.filter(t=>t.key.join(",")===e.key.join(",")&&t.keyPath.join("-")===e.keyPath.join("-"))[0]}__keyToStickiedKey(e,t){return{code:e.code,key:e.key,keyPath:e.keyPath,unmodifiedKey:e.unmodifiedKey,type:e.type,mode:e.mode,location:e.location,active:e.active,noCapsLock:e.noCapsLock,ignoreModifiers:e.ignoreModifiers,valid:e.valid,longpressAction:e.longpressAction,composition:e.composition,specialCapslock:e.specialCapslock,locked:t,stickTime:-1}}__caretPositionLeft(e,text,t){if(e<=0)return 0;if(this.__modifiers.Control&&!t){let t=/\b\S/g,i=t.exec(text),o=0;for(;i&&!(i.index>=e);)o=i.index,i=t.exec(text);return o}{if(1===e)return 0;let t=text.charCodeAt(e-1),i=text.charCodeAt(e-2);return t>=56320&&t<=57343&&i>=55296&&i<=56319?e-2:e-1}}__caretPositionRight(e,text,t){if(e>=text.length)return text.length;if(this.__modifiers.Control&&!t){let t=/\S\s*\b/g,i=t.exec(text);for(;i&&!(i.index+1>e);)i=t.exec(text);return null!==i?i.index+1:text.length}{if(e===text.length-1)return text.length;let t=text.charCodeAt(e),i=text.charCodeAt(e+1);return t>=55296&&t<=56319&&i>=56320&&i<=57343?e+2:e+1}}__moveCaret(t,i,o,s){let n=this.__getSelectionStartOrEnd(t,"selectionStart"),r=this.__getSelectionStartOrEnd(t,"selectionEnd");if(this.__modifiers.Shift&&!s){if(n===r||t.selectionDirection===i){"forward"===i?this.__setSelectionStartOrEnd(t,"selectionEnd",o(r)):this.__setSelectionStartOrEnd(t,"selectionStart",o(n));try{t.selectionDirection=i}catch(t){TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error(`[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id=${this.getId()}] Tried to set selectionDirection on an input element that does not support this. Try using an <input type="text" /> element.`)}}else if("forward"===i){let s=o(n);if(s<r)this.__setSelectionStartOrEnd(t,"selectionStart",s);else{this.__setSelectionStartOrEnd(t,"selectionStart",r),this.__setSelectionStartOrEnd(t,"selectionEnd",s);try{t.selectionDirection=i}catch(t){TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error(`[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id=${this.getId()}] Tried to set selectionDirection on an input element that does not support this. Try using an <input type="text" /> element.`)}}}else{let s=o(r);if(s>=n)this.__setSelectionStartOrEnd(t,"selectionEnd",s);else{this.__setSelectionStartOrEnd(t,"selectionEnd",n),this.__setSelectionStartOrEnd(t,"selectionStart",s);try{t.selectionDirection=i}catch(t){TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error(`[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id=${this.getId()}] Tried to set selectionDirection on an input element that does not support this. Try using an <input type="text" /> element.`)}}}this.__scrollCaretIntoViewbox(t)}else this.__setCaretPosition(t,o(n))}__setCaretPosition(t,i){this.__setSelectionStartOrEnd(t,"selectionStart",i),this.__setSelectionStartOrEnd(t,"selectionEnd",i);try{t.selectionDirection="forward"}catch(t){TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error(`[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id=${this.getId()}] Tried to set selectionDirection on an input element that does not support this. Try using an <input type="text" /> element.`)}this.__scrollCaretIntoViewbox(t)}__setSelectionStartOrEnd(t,i,o){if(o<0?o=0:o>t.value.length&&(o=t.value.length),t[i]!==o)try{t[i]=o}catch(t){TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error(`[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id=${this.getId()}] Tried to set selection or caret position on an input element that does not support this. Try using an <input type="text" /> element.`)}}__getSelectionStartOrEnd(e,t){let i=e[t]||0;return i<0?i=0:i>e.value.length&&(i=e.value.length),i}__scrollCaretIntoViewbox(e){let t="backward"===e.selectionDirection?this.__getSelectionStartOrEnd(e,"selectionStart"):this.__getSelectionStartOrEnd(e,"selectionEnd"),i=this.__getMirrorElement(e),o=this.__getCaretCoordinates(i,e.value,t);i.style.width="auto",i.style.height="auto",i.style.padding="",i.style.overflow="hidden",i.textContent=".";let s=i.clientHeight;i.parentNode.removeChild(i);let n=window.getComputedStyle(e),r=parseInt(n.paddingTop||"0",10),l=parseInt(n.paddingRight||"0",10),a=parseInt(n.paddingBottom||"0",10),_=parseInt(n.paddingLeft||"0",10);o.left<e.scrollLeft+_?e.scrollLeft=o.left-_:o.left+1>e.scrollLeft+e.clientWidth-_-l&&(e.scrollLeft=o.left+1-(e.clientWidth-_-l)),o.top<e.scrollTop+r?e.scrollTop=o.top-r:o.top+s>e.scrollTop+e.clientHeight-r-a&&(e.scrollTop=o.top+s-(e.clientHeight-r-a))}__getMirrorElement(e){let t=document.createElement("div"),i=t.style,o=window.getComputedStyle(e);return i.position="absolute",i.visibility="hidden",["whiteSpace","wordWrap","direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"].forEach((function(e){i[e]=o[e]})),null!==window.mozInnerScreenX?e.scrollHeight>parseInt(o.height||"0",10)&&(i.overflowY="scroll"):i.overflow="hidden",document.body.appendChild(t),t}__getCaretCoordinates(e,text,t){let i=e.getElementsByTagName("span")[0]||document.createElement("span");return e.textContent=text.substring(0,t).replace(/  /g,"  "),i.textContent=text.substring(t)||".",e.appendChild(i),{top:i.offsetTop,left:i.offsetLeft}}__unescape(e){return e.replace(/\\b/g,"\b").replace(/\\t/g,"\t").replace(/\\n/g,"\n").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\r/g,"\r").replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\\\/g,"\\")}__isSuitableElement(e){return e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&-1!==["password","search","tel","text","url"].indexOf(e.type)}__mapLayoutNameToLayoutFileName(e){let t="";switch(e){case"DE-DE_QWERTZ_full":t="German - with NumPad";break;case"DE-DE_QWERTZ_standard":t="German - basic";break;case"EN-US_QWERTY_full":t="US - with NumPad";break;case"EN-US_QWERTY_standard":t="US - basic";break;case"DE-DE_QWERTZ_compact":t="German - compact";break;case"EN-US_QWERTY_compact":t="US - compact";break;case"Calculator":case"Numpad":case"PINpad":t=e;break;default:return null}return"KeyboardLayouts/"+t+".keyboard.json"}setLayout(valueNew){let t=e.ValueConverter.toString(valueNew),i=this.__mapLayoutNameToLayoutFileName(t);if(null!==i)return this.setLayoutFile(i)}getLayout(){return null}setLayoutFile(valueNew){let t=e.ValueConverter.toString(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("LayoutFile")),t!==this.__layoutFile&&(this.__layoutFile=t,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"LayoutFile"}),this.__processLayoutFile())}getLayoutFile(){return this.__layoutFile}__processLayoutFile(){if(!this.__layoutFile)return void(TCHMI_DESIGNER?this.__elementPaddingContainer[0].innerHTML='<div class="TcHmi_Controls_Beckhoff_TcHmiKeyboard-designer-info" style="font-style:italic;">No configured LayoutFile.<br>Please add a LayoutFile to the Project and set the LayoutFile Attribute.<div>':this.__elementPaddingContainer[0].innerText="");if(TCHMI_DESIGNER){const e=this.__elementPaddingContainer[0].querySelector(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-designer-info");e&&e.remove()}let path=tchmi_path(this.__layoutFile),t=i.LayoutCache.get(path),o=o=>{o.error===e.Errors.NONE?(t=i.LayoutCache.get(path),t?(this.__layouts=t.layouts,this.__processLayoutJsonFile()):(this.__layouts=null,TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+', Attribute=LayoutPath] Loading layout file "'+this.__layoutFile+'" from shared static cache failed because: '+e.Log.buildMessage(o.details)),this.__processLayoutJsonFile())):TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+', Attribute=LayoutPath] Loading layout file "'+this.__layoutFile+'" from shared static cache failed because: '+e.Log.buildMessage(o.details))};if(t&&!1===t.pending&&t.layouts)this.__layouts=t.layouts,this.__processLayoutJsonFile();else if(t&&!0===t.pending)t.pendingCallbacks.push(o);else if(!t){this.__layoutFileXhr&&this.__layoutFileXhr.abort(),t={layouts:null,pending:!0,pendingCallbacks:[]},i.LayoutCache.set(path,t);let o=new XMLHttpRequest;this.__layoutFileXhr=o,o.open("GET",tchmi_path(this.__layoutFile),!0),o.addEventListener("load",i=>{200===o.status?(this.__layouts=e.ValueConverter.toObject(o.responseText),t&&(t.layouts=this.__layouts,t.pending=!1,t.pendingCallbacks.forEach(t=>e.Callback.callSafe(t,this,{error:e.Errors.NONE})),t.pendingCallbacks=[]),this.__processLayoutJsonFile()):(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+', Attribute=LayoutPath] Loading layout file "'+this.__layoutFile+'" failed with status: "'+o.status+'".'),this.__layouts=null,this.__processLayoutJsonFile(),this.__elementPaddingContainer[0].innerText="",t&&(t.pending=!1,t.pendingCallbacks.forEach(t=>e.Callback.callSafe(t,this,{error:e.Errors.ERROR,details:{code:e.Errors.ERROR,message:e.Errors[e.Errors.ERROR],domain:"TcHmiKeyboard",reason:'Loading layout file "'+this.__layoutFile+'" in control: "'+this.__id+'" failed with status: "'+o.status+'".'}})),t.pendingCallbacks=[])),this.__layoutFileXhr=void 0}),o.addEventListener("error",i=>{TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+', Attribute=LayoutPath] Loading layout file "'+this.__layoutFile+'" failed with status: "'+o.status+'".'),this.__layouts=null,this.__processLayoutJsonFile(),this.__layoutFileXhr=void 0,t&&(t.pending=!1,t.pendingCallbacks.forEach(t=>e.Callback.callSafe(t,this,{error:e.Errors.ERROR,details:{code:e.Errors.ERROR,message:e.Errors[e.Errors.ERROR],domain:"TcHmiKeyboard",reason:'Loading layout file "'+this.__layoutFile+'" in control: "'+this.__id+'" failed with status: "'+o.status+'".'}})),t.pendingCallbacks=[])}),o.send()}}__processLayoutJsonFile(){if(null!==this.__layouts){Array.isArray(this.__layouts.layouts)&&0!==this.__layouts.layouts.length||TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("Loading layout in control "+this.__id+' failed. Invalid layout file: "layouts" property is missing or empty!');let t=this.__layouts.layouts.filter(e=>!!e.name&&"string"==typeof e.name&&"default"===e.name.toLowerCase());t.length>0?this.__activateLayout(t[0]):this.__activateLayout(this.__layouts.layouts[0]),this.__indirectInputElement&&!this.__layouts.useIndirectInput&&(this.__indirectInputElement.remove(),this.__indirectInputElement=null)}this.__fixedTarget&&this.__processFixedTarget()}__activateLayout(t){if(!Array.isArray(t.keys))return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+"] Activating layout failed. Missing property=keys."));this.__keys.clear(),this.__additionalKeys.clear();let i=document.createDocumentFragment(),o=!1,s=!1;for(let e=0,n=t.keys.length;e<n;e++){let n=t.keys[e];if("indirect-input"===n.type)switch(n.component){case"textbox":o=!0;break;case"accept":s=!0}let r=this.__createKey(n);r&&!r.parentElement&&i.appendChild(r)}this.__layouts&&this.__layouts.useIndirectInput?(o||TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+'] Layout has "useIndirectInput" = true, but is missing the textbox.'),s||TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+'] Layout has "useIndirectInput" = true, but is missing the accept key.')):(o||s)&&TCHMI_CONSOLE_LOG_LEVEL>=2&&e.Log.warn("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+'] Layout contains elements for indirect input, but has "useIndirectInput" not set to true.');for(let e=this.__elementPaddingContainer[0].childElementCount-1;e>=0;e--){let t=this.__elementPaddingContainer[0].children.item(e);t instanceof HTMLDivElement&&t.remove()}this.__elementPaddingContainer[0].appendChild(i),this.__currentLayout=t,this.__updateActiveModifiers(),this.__processScaleMode(),this.__processKeyPadding(),this.__processAdditionalKeyBackdropPadding(),this.__processLabelFontFamily(),this.__processLabelFontSize(),this.__processLabelFontStyle(),this.__processLabelFontWeight(),this.__processLabelStrokeThickness(),this.__processLabelStrokeColor(),this.__processLabelFillColor(),this.__processLabelColor(),this.__processKeyBackgroundColor(),this.__processAdditionalKeyBackdropColor()}__createKey(t){if(!this.__layouts||!this.__layouts.useIndirectInput&&"indirect-input"===t.type)return;if(void 0===t.geometry||null===t.geometry)return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+"] Creating key failed. Key definition is missing property=geometry."));if(void 0===t.geometry.top||null===t.geometry.top)return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+"] Creating key failed. Key definition is missing property=geometry.top."));if(void 0===t.geometry.left||null===t.geometry.left)return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+"] Creating key failed. Key definition is missing property=geometry.left."));if(void 0===t.geometry.width||null===t.geometry.width)return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+"] Creating key failed. Key definition is missing property=geometry.width."));if(void 0===t.geometry.height||null===t.geometry.height)return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+"] Creating key failed. Key definition is missing property=geometry.height."));if("layout-switch"===t.type){if(void 0===t.layoutName||null===t.layoutName)return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+"] Creating key failed. Key definition is missing property=layoutName."))}else if("indirect-input"===t.type){if(void 0===t.component||null===t.component)return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+"] Creating key failed. Key definition is missing property=component."))}else{if(void 0===t.code||null===t.code)return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+"] Creating key failed. Key definition is missing property=code."));if(void 0===t.key||null===t.key)return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiKeyboard, Id="+this.getId()+"] Creating key failed. Key definition is missing property=key."))}let o;if("indirect-input"===t.type&&"textbox"===t.component){if(this.__updateIndirectInputElement(t),!this.__indirectInputElement)throw new Error("Could not create textbox for indirect input.");o=this.__indirectInputElement}else{o=document.createElement("div"),o.classList.add("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key","tchmi-keyboard-template-key");for(let e in t)t.hasOwnProperty(e)&&("object"!=typeof t[e]?o.dataset[e]=t[e]:e.includes("omposition")&&(o.dataset[e]=JSON.stringify(t[e])));if(i.isStandardKeyDefinition(t)&&(t.noCapsLock&&o.classList.add("no-caps-lock"),t.additionalKeys)){let e=document.createElement("div");e.classList.add("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-additional-keys-container");for(let i=0,o=t.additionalKeys.length;i<o;i++){let o=this.__createKey(t.additionalKeys[i]);if(void 0===o)return;o.classList.add("additional-key"),e.appendChild(o)}let i=Math.min(...t.additionalKeys.map(e=>e.geometry.top)),s=Math.min(...t.additionalKeys.map(e=>e.geometry.left)),n=Math.max(...t.additionalKeys.map(e=>e.geometry.left+e.geometry.width-s)),r=Math.max(...t.additionalKeys.map(e=>e.geometry.top+e.geometry.height-i)),l=document.createElement("div");l.classList.add("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-backdrop","tchmi-keyboard-template-backdrop"),l.style.top=i+"%",l.style.left=s+"%",l.style.width=n+"%",l.style.height=r+"%",e.insertAdjacentElement("afterbegin",l),o.appendChild(e),this.__additionalKeys.set(o,e)}if(Array.isArray(t.labels))for(let i=0,s=t.labels.length;i<s;i++){let s=t.labels[i],n=document.createElement("span");if(n.classList.add("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label","tchmi-keyboard-template-label"),void 0!==s.position&&null!==s.position&&s.position.length>0&&s.position.split(" ").forEach(e=>n.classList.add(e)),"text"===s.type&&void 0!==s.text&&null!==s.text)n.textContent=s.text;else if("svg"===s.type&&void 0!==s.svg&&null!==s.svg)n.innerHTML=`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="${s.svg.dimensions.width}" height="${s.svg.dimensions.height}"><path d="${s.svg.path}"></path></svg>`;else if("image"===s.type&&void 0!==s.image&&null!==s.image){let t={color:null,image:s.image.source,imageWidth:void 0!==s.image.dimensions?s.image.dimensions.width:null,imageWidthUnit:"px",imageHeight:void 0!==s.image.dimensions?s.image.dimensions.height:null,imageHeightUnit:"px",imageHorizontalAlignment:"Center",imageVerticalAlignment:"Center",imagePadding:null};e.StyleProvider.processBackground(n,t)}if(void 0!==s.visible&&s.visible.length>0)for(let e=0,t=s.visible.length;e<t;e++)n.classList.add("show-"+s.visible[e]);else n.classList.add("show-always");if(void 0!==s.hidden)for(let e=0,t=s.hidden.length;e<t;e++)n.classList.add("hide-"+s.hidden[e]);o.appendChild(n)}}return o.style.top=t.geometry.top+"%",o.style.left=t.geometry.left+"%",o.style.width=t.geometry.width+"%",o.style.height=t.geometry.height+"%",i.isStandardKeyDefinition(t)&&!0===this.__modifiers[t.key]&&o.classList.add("active"),this.__keys.set(o,t),o}__updateIndirectInputElement(e,t=!1){if("textbox"!==e.component)return;if(0===this.__activeElements.length&&this.__indirectInputElement)return;let i=this.__activeElements.length>0;for(let e=0,t=this.__activeElements.length;e<t;e++)if(!(this.__activeElements[e]instanceof HTMLTextAreaElement)){i=!1;break}if(!this.__indirectInputElement||i&&this.__indirectInputElement instanceof HTMLInputElement||!i&&this.__indirectInputElement instanceof HTMLTextAreaElement){let o=this.__indirectInputElement;this.__indirectInputElement=i?document.createElement("textarea"):document.createElement("input"),this.__indirectInputElement.classList.add("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-textbox"),this.__indirectInputElement.style.top=e.geometry.top+"%",this.__indirectInputElement.style.left=e.geometry.left+"%",this.__indirectInputElement.style.width=e.geometry.width+"%",this.__indirectInputElement.style.height=e.geometry.height+"%",this.__processIndirectInputHorizontalAlignment(),this.__processIndirectInputFontSize(),this.__processIndirectInputPadding(),t&&(o&&o.parentElement===this.__elementPaddingContainer[0]?this.__elementPaddingContainer[0].replaceChild(this.__indirectInputElement,o):this.__elementPaddingContainer[0].appendChild(this.__indirectInputElement))}}setScaleMode(valueNew){let t=e.ValueConverter.toScaleModeString(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("ScaleMode")),t!==this.__scaleMode&&(this.__scaleMode=t,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ScaleMode"}),this.__processScaleMode())}getScaleMode(){return this.__scaleMode}__processScaleMode(){if(void 0===this.__scaleMode)return;if("ScaleToFill"===this.__scaleMode||"None"===this.__scaleMode){switch(this.__scaleMode){case"ScaleToFill":e.StyleProvider.setSimpleElementStyle(this.__elementPaddingContainer,{width:null,height:null,"min-width":null,"min-height":null});break;case"None":e.StyleProvider.setSimpleElementStyle(this.__elementPaddingContainer,{width:this.__currentLayout.dimensions.width+"px",height:this.__currentLayout.dimensions.height+"px","min-width":this.__currentLayout.dimensions.width+"px","min-height":this.__currentLayout.dimensions.height+"px"})}return}let t=this.getRenderedWidth();if(!t)return;let i=this.getRenderedHeight();if(i){if(this.__keyboardPadding){let e=t,o=(e,t,i)=>"%"===t?e/100*i:e;t-=o(this.__keyboardPadding.left,this.__keyboardPadding.leftUnit,e),t-=o(this.__keyboardPadding.right,this.__keyboardPadding.rightUnit,e),i-=o(this.__keyboardPadding.top,this.__keyboardPadding.topUnit,e),i-=o(this.__keyboardPadding.bottom,this.__keyboardPadding.bottomUnit,e)}switch(this.__scaleMode){case"ScaleToFit":{let o=t/this.__currentLayout.dimensions.width,s=i/this.__currentLayout.dimensions.height,n=o<s?o:s;e.StyleProvider.setSimpleElementStyle(this.__elementPaddingContainer,{width:this.__currentLayout.dimensions.width*n+"px",height:this.__currentLayout.dimensions.height*n+"px","min-width":this.__currentLayout.dimensions.width*n+"px","min-height":this.__currentLayout.dimensions.height*n+"px"})}break;case"ScaleToFitWidth":{let i=t/this.__currentLayout.dimensions.width;e.StyleProvider.setSimpleElementStyle(this.__elementPaddingContainer,{width:this.__currentLayout.dimensions.width*i+"px",height:this.__currentLayout.dimensions.height*i+"px","min-width":this.__currentLayout.dimensions.width*i+"px","min-height":this.__currentLayout.dimensions.height*i+"px"})}break;case"ScaleToFitHeight":{let t=i/this.__currentLayout.dimensions.height;e.StyleProvider.setSimpleElementStyle(this.__elementPaddingContainer,{width:this.__currentLayout.dimensions.width*t+"px",height:this.__currentLayout.dimensions.height*t+"px","min-width":this.__currentLayout.dimensions.width*t+"px","min-height":this.__currentLayout.dimensions.height*t+"px"})}}}}setFixedTarget(valueNew){let t=e.ValueConverter.toString(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("FixedTarget")),t!==this.__fixedTarget&&(this.__fixedTarget=t,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"FixedTarget"}),this.__processFixedTarget())}getFixedTarget(){return this.__fixedTarget}__processFixedTarget(){let t=!1;if(this.__fixedTarget){let i=e.Controls.get(this.__fixedTarget);if(i){let e=i.getElement()[0];if(this.__fixedTargetInputElements=e.getElementsByTagName("input"),this.__fixedTargetTextareaElements=e.getElementsByTagName("textarea"),this.__layouts&&this.__layouts.useIndirectInput){t=!0;let i=()=>{let e=[];null!==this.__fixedTargetInputElements&&(e=e.concat(Array.from(this.__fixedTargetInputElements))),null!==this.__fixedTargetTextareaElements&&(e=e.concat(Array.from(this.__fixedTargetTextareaElements))),this.__setActiveElements(e)};this.__fixedTargetObserver=new MutationObserver(i),this.__fixedTargetObserver.observe(e,{childList:!0,subtree:!0}),i()}}else this.__fixedTargetInputElements=null,this.__fixedTargetTextareaElements=null}else this.__fixedTargetInputElements=null,this.__fixedTargetTextareaElements=null;this.__fixedTargetObserver&&!t&&(this.__fixedTargetObserver.disconnect(),this.__fixedTargetObserver=null)}setReleaseStickyKeysManually(valueNew){let t=e.ValueConverter.toBoolean(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("ReleaseStickyKeysManually")),t!==this.__releaseStickyKeysManually&&(this.__releaseStickyKeysManually=t,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ReleaseStickyKeysManually"}),this.__processReleaseStickyKeysManually())}getReleaseStickyKeysManually(){return this.__releaseStickyKeysManually}__processReleaseStickyKeysManually(){}__raiseKeyPressStarted(t){let o,s=this.__interactedKeys.filter(e=>e.element===t)[0];if(o=void 0!==s?s.key:this.__getKey(t),!i.isStandardKey(o))return;let n=[];for(let e=0,s=Math.min(o.code.length,o.key.length,o.location.length);e<s;e++)n.push({element:t,key:{code:o.code[e],key:o.key[e],unmodifiedKey:o.unmodifiedKey[e],location:i.KeyLocation[o.location[0]].toLowerCase()}});this.__pressedKeys=this.__pressedKeys.concat(n),e.EventProvider.raise(this.__id+".onKeyPressStarted",n),e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"PressedKeys"})}__raiseKeyPressEnded(t,i){let o=this.__pressedKeys.filter(e=>e.element===t);0!==o.length&&(this.__pressedKeys=this.__pressedKeys.filter(e=>e.element!==t),e.EventProvider.raise(this.__id+".onKeyPress"+i,o),e.EventProvider.raise(this.__id+".onKeyPressEnded",o),e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"PressedKeys"}))}__setActiveElements(e){if(this.__indirectInputElement)if(this.__activeElements=e,0===e.length)this.__indirectInputElement.value="";else{let e=this.__keys.get(this.__indirectInputElement);e&&"indirect-input"===e.type&&(this.__keys.delete(this.__indirectInputElement),this.__updateIndirectInputElement(e,!0),this.__keys.set(this.__indirectInputElement,e));let text="";for(let e=0,t=this.__activeElements.length;e<t;e++)if(0===e)text=this.__activeElements[e].value;else if(this.__activeElements[e].value!==text){text="";break}this.__indirectInputElement.value=text}}__startIndirectInput(){if(!this.__indirectInputElement)return;this.__indirectInputElement.focus();let e=null,t=null,i=null;for(let o=0,s=this.__activeElements.length;o<s;o++)if(0===o)e=this.__activeElements[o].selectionStart,t=this.__activeElements[o].selectionEnd,i=this.__activeElements[o].selectionDirection;else if(this.__activeElements[o].selectionStart!==e||this.__activeElements[o].selectionEnd!==t||this.__activeElements[o].selectionDirection!==i){e=null,t=null,i=null;break}this.__indirectInputElement.selectionStart=null!==e?e:this.__indirectInputElement.value.length,this.__indirectInputElement.selectionEnd=null!==t?t:this.__indirectInputElement.value.length,this.__indirectInputElement.selectionDirection=null!==i?i:"forward"}__endIndirectInput(t=!1){if(!this.__indirectInputElement)return;let i=this.__indirectInputElement.value;if(t){let text="";for(let e=0,t=this.__activeElements.length;e<t;e++)if(0===e)text=this.__activeElements[e].value;else if(this.__activeElements[e].value!==text){text="";break}this.__indirectInputElement.value=text}else{let e=this.__indirectInputElement.selectionStart,t=this.__indirectInputElement.selectionEnd,o=this.__indirectInputElement.selectionDirection;for(let s=0,n=this.__activeElements.length;s<n;s++){this.__activeElements[s].value=i;try{this.__activeElements[s].selectionStart=null!==e?e:this.__activeElements[s].value.length,this.__activeElements[s].selectionEnd=null!==t?t:this.__activeElements[s].value.length,this.__activeElements[s].selectionDirection=null!==o?o:"forward"}catch(e){}let n=new Event("input",{bubbles:!0});this.__activeElements[s].dispatchEvent(n)}}1===this.__activeElements.length&&this.__activeElements[0].focus(),e.EventProvider.raise(this.__id+(t?".onIndirectInputCanceled":".onIndirectInputAccepted"),i)}getPressedKeys(){return this.__pressedKeys.map(e=>e.key)}setLongpressDelay(valueNew){let t=e.ValueConverter.toNumber(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("LongpressDelay")),t!==this.__longpressDelay&&(this.__longpressDelay=t,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"LongpressDelay"}),this.__processLongpressDelay())}getLongpressDelay(){return this.__longpressDelay}__processLongpressDelay(){}setRepetitionDelay(valueNew){let t=e.ValueConverter.toNumber(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("RepetitionDelay")),t!==this.__repetitionDelay&&(this.__repetitionDelay=t,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"RepetitionDelay"}),this.__processRepetitionDelay())}getRepetitionDelay(){return this.__repetitionDelay}__processRepetitionDelay(){}setIndirectInputHorizontalAlignment(valueNew){let t=e.ValueConverter.toHorizontalAlignment(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("IndirectInputHorizontalAlignment")),t!==this.__indirectInputHorizontalAlignment&&(this.__indirectInputHorizontalAlignment=t,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"IndirectInputHorizontalAlignment"}),this.__processIndirectInputHorizontalAlignment())}getIndirectInputHorizontalAlignment(){return this.__indirectInputHorizontalAlignment}__processIndirectInputHorizontalAlignment(){void 0!==this.__indirectInputHorizontalAlignment&&this.__indirectInputElement&&(this.__indirectInputElement.style.textAlign=this.__indirectInputHorizontalAlignment.toLowerCase())}setIndirectInputFontSize(valueNew){let t=e.ValueConverter.toNumber(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("IndirectInputFontSize")),t!==this.__indirectInputFontSize&&(this.__indirectInputFontSize=t,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"IndirectInputFontSize"}),this.__processIndirectInputFontSize())}getIndirectInputFontSize(){return this.__indirectInputFontSize}__processIndirectInputFontSize(){void 0!==this.__indirectInputFontSize&&this.__indirectInputElement&&(null!==this.__indirectInputFontSize?this.__indirectInputElement.style.fontSize=this.__indirectInputFontSize+(this.__indirectInputFontSizeUnit||"px"):this.__indirectInputElement.style.fontSize="")}setIndirectInputFontSizeUnit(valueNew){let t=e.ValueConverter.toDimensionUnit(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("IndirectInputFontSizeUnit")),t!==this.__indirectInputFontSizeUnit&&(this.__indirectInputFontSizeUnit=t,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"IndirectInputFontSizeUnit"}),this.__processIndirectInputFontSizeUnit())}getIndirectInputFontSizeUnit(){return this.__indirectInputFontSizeUnit}__processIndirectInputFontSizeUnit(){this.__processIndirectInputFontSize()}setIndirectInputPadding(valueNew){let t=e.ValueConverter.toObject(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("IndirectInputPadding"));let i=this.__objectResolvers.get("indirectInputPadding");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let o=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("indirectInputPadding",{resolver:o,watchCallback:this.__onResolverForIndirectInputPaddingWatchCallback,watchDestroyer:o.watch(this.__onResolverForIndirectInputPaddingWatchCallback)})}getIndirectInputPadding(){return this.__indirectInputPadding}__processIndirectInputPadding(){void 0!==this.__indirectInputPadding&&this.__indirectInputElement&&e.StyleProvider.processContentPadding(this.__indirectInputElement,this.__indirectInputPadding)}setKeyboardPadding(valueNew){let t=e.ValueConverter.toObject(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("KeyboardPadding"));let i=this.__objectResolvers.get("keyboardPadding");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let o=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("keyboardPadding",{resolver:o,watchCallback:this.__onResolverForKeyboardPaddingWatchCallback,watchDestroyer:o.watch(this.__onResolverForKeyboardPaddingWatchCallback)})}getKeyboardPadding(){return this.__keyboardPadding}__processKeyboardPadding(){e.StyleProvider.processContentPadding(this.__elementTemplateRoot,this.__keyboardPadding),this.__processScaleMode()}setKeyPadding(valueNew){let t=e.ValueConverter.toObject(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("KeyPadding"));let i=this.__objectResolvers.get("keyPadding");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let o=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("keyPadding",{resolver:o,watchCallback:this.__onResolverForKeyPaddingWatchCallback,watchDestroyer:o.watch(this.__onResolverForKeyPaddingWatchCallback)})}getKeyPadding(){return this.__keyPadding}__processKeyPadding(){let t=this.__elementPaddingContainer[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label"),i=["top","right","bottom","left"];if(this.__keyPadding)for(let o=0,s=i.length;o<s;o++){let s=this.__keyPadding[i[o]],n=this.__keyPadding[i[o]+"Unit"]||"px";null==s?e.StyleProvider.setSimpleElementStyle(t,i[o],null):e.StyleProvider.setSimpleElementStyle(t,i[o],s+n)}else for(let o=0,s=i.length;o<s;o++)e.StyleProvider.setSimpleElementStyle(t,i[o],null)}setAdditionalKeyBackdropPadding(valueNew){let t=e.ValueConverter.toObject(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("AdditionalKeyBackdropPadding"));let i=this.__objectResolvers.get("additionalKeyBackdropPadding");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let o=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("additionalKeyBackdropPadding",{resolver:o,watchCallback:this.__onResolverForAdditionalKeyBackdropPaddingWatchCallback,watchDestroyer:o.watch(this.__onResolverForAdditionalKeyBackdropPaddingWatchCallback)})}getAdditionalKeyBackdropPadding(){return this.__additionalKeyBackdropPadding}__processAdditionalKeyBackdropPadding(){let t=Array.from(this.__additionalKeys.values()).map(e=>e.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-backdrop")[0]);e.StyleProvider.processContentPadding(t,this.__additionalKeyBackdropPadding),this.__additionalKeyBackdropPadding?e.StyleProvider.processTransform(t,{transformType:"Translate",x:-(this.__additionalKeyBackdropPadding.left||0),xUnit:this.__additionalKeyBackdropPadding.leftUnit||"px",y:-(this.__additionalKeyBackdropPadding.top||0),yUnit:this.__additionalKeyBackdropPadding.topUnit||"px"}):e.StyleProvider.processTransform(t,null)}setLabelFontSize(valueNew){let t=e.ValueConverter.toNumber(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("LabelFontSize")),t!==this.__labelFontSize&&(this.__labelFontSize=t,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"LabelFontSize"}),this.__processLabelFontSize())}getLabelFontSize(){return this.__labelFontSize}__processLabelFontSize(){e.StyleProvider.processFontSize(this.__elementPaddingContainer[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key"),this.__labelFontSize,this.__labelFontSizeUnit)}setLabelFontSizeUnit(valueNew){let t=e.ValueConverter.toFontSizeUnit(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("LabelFontSizeUnit")),t!==this.__labelFontSizeUnit&&(this.__labelFontSizeUnit=t,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"LabelFontSizeUnit"}),this.__processLabelFontSizeUnit())}getLabelFontSizeUnit(){return this.__labelFontSizeUnit}__processLabelFontSizeUnit(){this.__processLabelFontSize()}setLabelFontFamily(valueNew){let t=e.ValueConverter.toString(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("LabelFontFamily")),t!==this.__labelFontFamily&&(this.__labelFontFamily=t,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"LabelFontFamily"}),this.__processLabelFontFamily())}getLabelFontFamily(){return this.__labelFontFamily}__processLabelFontFamily(){e.StyleProvider.processFontFamily(this.__elementPaddingContainer[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key"),this.__labelFontFamily)}setLabelFontStyle(valueNew){let t=e.ValueConverter.toFontStyle(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("LabelFontStyle")),t!==this.__labelFontStyle&&(this.__labelFontStyle=t,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"LabelFontStyle"}),this.__processLabelFontStyle())}getLabelFontStyle(){return this.__labelFontStyle}__processLabelFontStyle(){e.StyleProvider.processFontStyle(this.__elementPaddingContainer[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key"),this.__labelFontStyle)}setLabelFontWeight(valueNew){let t=e.ValueConverter.toFontWeight(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("LabelFontWeight")),t!==this.__labelFontWeight&&(this.__labelFontWeight=t,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"LabelFontWeight"}),this.__processLabelFontWeight())}getLabelFontWeight(){return this.__labelFontWeight}__processLabelFontWeight(){e.StyleProvider.processFontWeight(this.__elementPaddingContainer[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key"),this.__labelFontWeight)}setLabelStrokeThickness(valueNew){let t=e.ValueConverter.toNumber(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("LabelStrokeThickness")),t!==this.__labelStrokeThickness&&(this.__labelStrokeThickness=t,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"LabelStrokeThickness"}),this.__processLabelStrokeThickness())}getLabelStrokeThickness(){return this.__labelStrokeThickness}__processLabelStrokeThickness(){e.StyleProvider.setSimpleElementStyle(this.__elementPaddingContainer[0].querySelectorAll(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label svg"),"stroke-width",this.__labelStrokeThickness+"px")}setKeyBackgroundColor(valueNew){let t=e.ValueConverter.toObject(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("KeyBackgroundColor"));let i=this.__objectResolvers.get("keyBackgroundColor");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let o=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("keyBackgroundColor",{resolver:o,watchCallback:this.__onResolverForKeyBackgroundColorWatchCallback,watchDestroyer:o.watch(this.__onResolverForKeyBackgroundColorWatchCallback)})}getKeyBackgroundColor(){return this.__keyBackgroundColor}__processKeyBackgroundColor(){e.StyleProvider.processBackgroundColor(this.__elementPaddingContainer[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key"),this.__keyBackgroundColor)}setLabelColor(valueNew){let t=e.ValueConverter.toObject(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("LabelColor"));let i=this.__objectResolvers.get("labelColor");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let o=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("labelColor",{resolver:o,watchCallback:this.__onResolverForLabelColorWatchCallback,watchDestroyer:o.watch(this.__onResolverForLabelColorWatchCallback)})}getLabelColor(){return this.__labelColor}__processLabelColor(){e.StyleProvider.processTextColor(this.__elementPaddingContainer[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-key"),this.__labelColor)}setLabelStrokeColor(valueNew){let t=e.ValueConverter.toObject(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("LabelStrokeColor"));let i=this.__objectResolvers.get("labelStrokeColor");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let o=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("labelStrokeColor",{resolver:o,watchCallback:this.__onResolverForLabelStrokeColorWatchCallback,watchDestroyer:o.watch(this.__onResolverForLabelStrokeColorWatchCallback)})}getLabelStrokeColor(){return this.__labelStrokeColor}__processLabelStrokeColor(){e.StyleProvider.processStrokeColor(this.__elementPaddingContainer[0].querySelectorAll(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label svg"),this.__labelStrokeColor)}setLabelFillColor(valueNew){let t=e.ValueConverter.toObject(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("LabelFillColor"));let i=this.__objectResolvers.get("labelFillColor");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let o=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("labelFillColor",{resolver:o,watchCallback:this.__onResolverForLabelFillColorWatchCallback,watchDestroyer:o.watch(this.__onResolverForLabelFillColorWatchCallback)})}getLabelFillColor(){return this.__labelFillColor}__processLabelFillColor(){e.StyleProvider.processFillColor(this.__elementPaddingContainer[0].querySelectorAll(".TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-label svg path"),this.__labelFillColor)}setAdditionalKeyBackdropColor(valueNew){let t=e.ValueConverter.toObject(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("AdditionalKeyBackdropColor"));let i=this.__objectResolvers.get("additionalKeyBackdropColor");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let o=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("additionalKeyBackdropColor",{resolver:o,watchCallback:this.__onResolverForAdditionalKeyBackdropColorWatchCallback,watchDestroyer:o.watch(this.__onResolverForAdditionalKeyBackdropColorWatchCallback)})}getAdditionalKeyBackdropColor(){return this.__additionalKeyBackdropColor}__processAdditionalKeyBackdropColor(){e.StyleProvider.processBackgroundColor(Array.from(this.__additionalKeys.values()).map(e=>e.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiKeyboard-template-backdrop")[0]),this.__additionalKeyBackdropColor)}}i.LayoutCache=new Map,t.TcHmiKeyboard=i,function(e){let t,i,o,s,n;e.isStandardKeyDefinition=function(e){return"layout-switch"!==e.type&&"indirect-input"!==e.type},e.isStandardKey=function(e){return e.type!==t.LAYOUTSWITCH&&e.type!==t.INDIRECTINPUT},function(e){e[e.CHARACTER=0]="CHARACTER",e[e.MODIFIER=1]="MODIFIER",e[e.ACTION=2]="ACTION",e[e.EDIT=3]="EDIT",e[e.LAYOUTSWITCH=4]="LAYOUTSWITCH",e[e.INDIRECTINPUT=5]="INDIRECTINPUT"}(t=e.KeyType||(e.KeyType={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.STICKY=1]="STICKY",e[e.TOGGLE=2]="TOGGLE"}(i=e.KeyMode||(e.KeyMode={})),function(e){e[e.STANDARD=0]="STANDARD",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e[e.NUMPAD=3]="NUMPAD"}(o=e.KeyLocation||(e.KeyLocation={})),function(e){e[e.NONE=0]="NONE",e[e.REPEAT=1]="REPEAT",e[e.ADDITIONALKEYS=2]="ADDITIONALKEYS",e[e.LOCK=3]="LOCK"}(s=e.LongpressAction||(e.LongpressAction={})),function(e){e[e.TEXTBOX=0]="TEXTBOX",e[e.ACCEPT=1]="ACCEPT",e[e.CANCEL=2]="CANCEL"}(n=e.IndirectInputComponent||(e.IndirectInputComponent={}))}(i=t.TcHmiKeyboard||(t.TcHmiKeyboard={}))}(i=t.Beckhoff||(t.Beckhoff={})),t.registerEx("TcHmiKeyboard","TcHmi.Controls.Beckhoff",e.Controls.Beckhoff.TcHmiKeyboard)}(t=e.Controls||(e.Controls={}))}(TcHmi||(TcHmi={}));