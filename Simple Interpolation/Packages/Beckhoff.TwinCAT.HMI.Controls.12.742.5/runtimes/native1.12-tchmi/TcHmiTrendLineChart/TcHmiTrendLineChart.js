var TcHmi;!function(t){let e;!function(e){let i;!function(e){class i extends t.Controls.System.TcHmiControl{constructor(e,n,o){super(e,n,o),this.__lineChart=null,this.__menuBarControls=[],this.__lineGraphData=null,this.__lineGraphRawData=null,this.__internalStart=null,this.__internalEnd=null,this.__internalStartServer=null,this.__internalEndServer=null,this.__actualStartTime=null,this.__actualEndTime=null,this.__startBeforeManipulation=null,this.__endBeforeManipulation=null,this.__mouseMode=i.MouseMode.PanX,this.__manipulationInfo={isManipulating:!1,start:{x:0,y:0},end:{x:0,y:0},offset:{left:0,top:0},scale:{x:1,y:1},transform:{x:0,y:0},click:!0,mousePosition:{x:0,y:0}},this.__multitouchInfo={multitouchMode:!1,first:{identifier:null},second:{identifier:null},distance:0,newStart:null,newTimespan:null,newYAxis:null},this.__wheelInfo={isWheeling:!1,wheelSteps:0,mousePosition:{x:0,y:0},timespan:null,timeout:0},this.__zoomingCanvasContext=null,this.__lastInteraction=!1,this.__startEndBeforeZoom={end:null,start:null},this.__resizeEventDestroyEvent=null,this.__themeDataLoadedEventDestroyEvent=null,this.__subscriptionId=null,this.__requestId=null,this.__getDataCounter=0,this.__internalYAxis=null,this.__internalLineGraphDescription=null,this.__tooltipInformation={show:!1,isActive:!1,time:0,points:[],errors:[]},this.__startDatatype=null,this.__endDatatype=null,this.__utcOffset=0,this.__onAttachedMenuButtonsEvent=null,this.__onPressedStopDestroyEvent=null,this.__onPressedTimespanStartDestroyEvent=null,this.__onPressedDatetimeStartDestroyEvent=null,this.__onPressedTimespanEndDestroyEvent=null,this.__onPressedDatetimeEndDestroyEvent=null,this.__onIsActiveChagedPanxDestroyEvent=null,this.__onIsActiveChagedPanxyDestroyEvent=null,this.__onIsActiveChagedZoomxDestroyEvent=null,this.__onIsActiveChagedZoomxyDestroyEvent=null,this.__onPressedResetZoomDestroyEvent=null,this.__onPressedResetDestroyEvent=null,this.__onPressedOptionsDestroyEvent=null,this.__onUserInteractionFinishedStartDestroyEvent=null,this.__onUserInteractionFinishedEndDestroyEvent=null,this.__onValueChangedTimespanStartDestroyEvent=null,this.__onValueChangedTimespanEndDestroyEvent=null,this.__onValueChangedDatetimeStartDestroyEvent=null,this.__onValueChangedDatetimeEndDestroyEvent=null,this.__nowIsValueChanged=!1,this.__holdTimer=0,this.__holdTimerDuration=300,this.__onResolverForXAxisFormatWatchCallback=e=>{!1===this.__isAttached&&this.__suspendObjectResolver("xAxisFormat"),e.error===t.Errors.NONE?tchmi_equal(e.value,this.__xAxisFormat)||(this.__xAxisFormat=e.value,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XAxisFormat"}),this.__processXAxisFormat()):TCHMI_CONSOLE_LOG_LEVEL>=1&&t.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=XAxisFormat] Resolving symbols from object failed with error: "+t.Log.buildMessage(e.details))},this.__onResolverForSectionsBackgroundColorWatchCallback=e=>{!1===this.__isAttached&&this.__suspendObjectResolver("sectionsBackgroundColor"),e.error===t.Errors.NONE?tchmi_equal(e.value,this.__sectionsBackgroundColor)||(this.__sectionsBackgroundColor=e.value,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"SectionsBackgroundColor"}),this.__processSectionsBackgroundColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&t.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=SectionsBackgroundColor] Resolving symbols from object failed with error: "+t.Log.buildMessage(e.details))},this.__onResolverForXLabelFontColorWatchCallback=e=>{!1===this.__isAttached&&this.__suspendObjectResolver("xLabelFontColor"),e.error===t.Errors.NONE?tchmi_equal(e.value,this.__xLabelFontColor)||(this.__xLabelFontColor=e.value,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XLabelFontColor"}),this.__processXLabelFontColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&t.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=XLabelFontColor] Resolving symbols from object failed with error: "+t.Log.buildMessage(e.details))},this.__onResolverForXAxisColorWatchCallback=e=>{!1===this.__isAttached&&this.__suspendObjectResolver("xAxisColor"),e.error===t.Errors.NONE?tchmi_equal(e.value,this.__xAxisColor)||(this.__xAxisColor=e.value,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XAxisColor"}),this.__processXAxisColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&t.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=XAxisColor] Resolving symbols from object failed with error: "+t.Log.buildMessage(e.details))},this.__onResolverForXAxisNameFontColorWatchCallback=e=>{!1===this.__isAttached&&this.__suspendObjectResolver("xAxisNameFontColor"),e.error===t.Errors.NONE?tchmi_equal(e.value,this.__xAxisNameFontColor)||(this.__xAxisNameFontColor=e.value,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XAxisNameFontColor"}),this.__processXAxisNameFontColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&t.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=XAxisNameFontColor] Resolving symbols from object failed with error: "+t.Log.buildMessage(e.details))},this.__onResolverForYAxisWatchCallback=e=>{!1===this.__isAttached&&this.__suspendObjectResolver("yAxis"),e.error===t.Errors.NONE?tchmi_equal(e.value,this.__yAxis)||(this.__yAxis=e.value,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"YAxis"}),this.__processYAxis()):TCHMI_CONSOLE_LOG_LEVEL>=1&&t.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=YAxis] Resolving symbols from object failed with error: "+t.Log.buildMessage(e.details))},this.__onResolverForLineGraphDescriptionsWatchCallback=e=>{!1===this.__isAttached&&this.__suspendObjectResolver("lineGraphDescriptions"),e.error===t.Errors.NONE?tchmi_equal(e.value,this.__lineGraphDescriptions)||(this.__lineGraphDescriptions=e.value,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"LineGraphDescription"}),this.__processLineGraphDescriptions()):TCHMI_CONSOLE_LOG_LEVEL>=1&&t.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=LineGraphDescriptions] Resolving symbols from object failed with error: "+t.Log.buildMessage(e.details))},this.__onResolverForGridBackgroundColorWatchCallback=e=>{!1===this.__isAttached&&this.__suspendObjectResolver("gridBackgroundColor"),e.error===t.Errors.NONE?tchmi_equal(e.value,this.__gridBackgroundColor)||(this.__gridBackgroundColor=e.value,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"GridBackgroundColor"}),this.__processGridBackgroundColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&t.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=GridBackgroundColor] Resolving symbols from object failed with error: "+t.Log.buildMessage(e.details))},this.__onResolverForGridLineColorWatchCallback=e=>{!1===this.__isAttached&&this.__suspendObjectResolver("gridLineColor"),e.error===t.Errors.NONE?tchmi_equal(e.value,this.__gridLineColor)||(this.__gridLineColor=e.value,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"GridLineColor"}),this.__processGridLineColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&t.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=GridLineColor] Resolving symbols from object failed with error: "+t.Log.buildMessage(e.details))},this.__onResolverForSubgridLineColorWatchCallback=e=>{!1===this.__isAttached&&this.__suspendObjectResolver("subgridLineColor"),e.error===t.Errors.NONE?tchmi_equal(e.value,this.__subgridLineColor)||(this.__subgridLineColor=e.value,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"SubgridLineColor"}),this.__processSubgridLineColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&t.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=SubgridLineColor] Resolving symbols from object failed with error: "+t.Log.buildMessage(e.details))},this.__onResolverForMenuBarLabelFontColorWatchCallback=e=>{!1===this.__isAttached&&this.__suspendObjectResolver("menuBarLabelFontColor"),e.error===t.Errors.NONE?tchmi_equal(e.value,this.__menuBarLabelFontColor)||(this.__menuBarLabelFontColor=e.value,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"MenuBarLabelFontColor"}),this.__processMenuBarLabelFontColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&t.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=MenuBarLabelFontColor] Resolving symbols from object failed with error: "+t.Log.buildMessage(e.details))},this.__onResolverForTooltipFormatWatchCallback=e=>{!1===this.__isAttached&&this.__suspendObjectResolver("tooltipFormat"),e.error===t.Errors.NONE?tchmi_equal(e.value,this.__tooltipFormat)||(this.__tooltipFormat=e.value,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TooltipFormat"}),this.__processTooltipFormat()):TCHMI_CONSOLE_LOG_LEVEL>=1&&t.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=TooltipFormat] Resolving symbols from object failed with error: "+t.Log.buildMessage(e.details))},this.__onResolverForTooltipFontColorWatchCallback=e=>{!1===this.__isAttached&&this.__suspendObjectResolver("tooltipFontColor"),e.error===t.Errors.NONE?tchmi_equal(e.value,this.__tooltipFontColor)||(this.__tooltipFontColor=e.value,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TooltipFontColor"}),this.__processTooltipFontColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&t.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=TooltipFontColor] Resolving symbols from object failed with error: "+t.Log.buildMessage(e.details))},this.__onResolverForTooltipBackgroundColorWatchCallback=e=>{!1===this.__isAttached&&this.__suspendObjectResolver("tooltipBackgroundColor"),e.error===t.Errors.NONE?tchmi_equal(e.value,this.__tooltipBackgroundColor)||(this.__tooltipBackgroundColor=e.value,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TooltipBackgroundColor"}),this.__processTooltipBackgroundColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&t.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=TooltipBackgroundColor] Resolving symbols from object failed with error: "+t.Log.buildMessage(e.details))},this.__clickHandler=this.__onClick(),this.__mousedownHandler=this.__onMouseDown(),this.__mouseupHandler=this.__onMouseUp(),this.__mousemoveHandler=this.__onMouseMove(),this.__touchstartHandler=this.__onTouchStart(),this.__touchmoveHandler=this.__onTouchMove(),this.__touchendHandler=this.__onTouchEnd(),this.__mousemoveTooltipHandler=this.__onMouseMoveTooltip(),this.__mousewheelHandler=this.__onMouseWheel()}__previnit(){if(this.__elementTemplateRoot=this.__element.find(".TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template"),0===this.__elementTemplateRoot.length&&(this.__elementTemplateRoot=this.__element.find(".tchmi-textbox-template")),this.__elementChart=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-chart"),0===this.__elementChart.length&&(this.__elementChart=this.__elementTemplateRoot.find(".tchmi-textbox-template-chart")),this.__elementMenuBar=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-menu-bar"),0===this.__elementMenuBar.length&&(this.__elementMenuBar=this.__elementTemplateRoot.find(".tchmi-textbox-template-menu-bar")),this.__elementTooltip=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip"),0===this.__elementTooltip.length&&(this.__elementTooltip=this.__elementTemplateRoot.find(".tchmi-textbox-template-tooltip")),this.__elementTooltipText=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-text"),0===this.__elementTooltipText.length&&(this.__elementTooltipText=this.__elementTemplateRoot.find(".tchmi-textbox-template-tooltip-text")),this.__elementTooltipArrow=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow"),0===this.__elementTooltipArrow.length&&(this.__elementTooltipArrow=this.__elementTemplateRoot.find(".tchmi-textbox-template-tooltip-arrow")),this.__elementLoading=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-loading"),0===this.__elementLoading.length&&(this.__elementLoading=this.__elementTemplateRoot.find(".tchmi-textbox-template-loading")),this.__elementMenuBarDropdown=$('<div class="TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-menu-bar-dropdown tchmi-box"></div>'),0===this.__elementTemplateRoot.length||0===this.__elementChart.length||0===this.__elementMenuBar.length||0===this.__elementTooltip.length||0===this.__elementTooltipText.length||0===this.__elementTooltipArrow.length||0===this.__elementLoading.length||0===this.__elementMenuBarDropdown.length)throw new Error("Invalid Template.html");if("undefined"==typeof TcHmiCharting)throw new Error("Missing needed TcHmiCharting library");let t=document.createElement("div");t.innerHTML='<div class="TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-loading-spinner-container"><div class="TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-loading-spinner"><div></div><div></div><div></div><div></div></div></div>',this.__loadingSpinner=t.firstElementChild,super.__previnit()}__init(){super.__init(),this.__showMenuBar&&this.__addMenuBarControls()}__addMenuBarControls(){let e=$(`<label for='${this.__id}_startCombobox'>Start:</label>`),n=t.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiCombobox",this.__id+"_startCombobox",{"data-tchmi-tooltip":"Datetime, Timespan or First","data-tchmi-text-font-size":11,"data-tchmi-allow-text-input":!0,"data-tchmi-src-data":["First"]},this);if(void 0===n)throw new Error("Needed Combobox could not be instantiated");{n.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-start-combobox","tchmi-trend-line-chart-template-start-combobox"),this.__elementMenuBar[0].appendChild(e[0]),this.__elementMenuBar[0].appendChild(n.getElement()[0]),this.__menuBarControls.push(n);let t=this.__start;null==t&&(t=""),"First"===t?n.setSelectedIndex(0):(this.isDatetime(t)&&(t=this.__moveUtcToTimeZone(t)),n.setText(t))}let o=t.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiTimespanPicker",this.__id+"_timespanStart",{"data-tchmi-visibility":"Collapsed"},this);if(void 0===o)throw new Error("Needed TimespanPicker could not be instantiated");o.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-timespan-picker-start","tchmi-trend-line-chart-template-timespan-picker-start"),this.__elementMenuBar[0].appendChild(o.getElement()[0]),this.__menuBarControls.push(o),this.__startDatatype===i.Datatype.Timespan&&this.__start&&o.setValue(this.__start);let s=t.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_timespanButtonStart",{"data-tchmi-tooltip":"Choose Timespan for start."},this);if(void 0===s)throw new Error("Needed Button could not be instantiated");s.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-timespan-button-start","tchmi-trend-line-chart-template-timespan-button-start"),this.__elementMenuBar[0].appendChild(s.getElement()[0]),this.__menuBarControls.push(s);let r=t.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiDateTimePicker",this.__id+"_datetimeStart",{"data-tchmi-visibility":"Collapsed"},this);if(void 0===r)throw new Error("Needed DateTimePicker could not be instantiated");r.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-date-time-picker-start","tchmi-trend-line-chart-template-date-time-picker-start"),this.__elementMenuBar[0].appendChild(r.getElement()[0]),this.__menuBarControls.push(r),this.__startDatatype===i.Datatype.Datetime&&this.__start&&r.setValue(this.__start);let l=t.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_datetimeButtonStart",{"data-tchmi-tooltip":"Choose Datetime for start."},this);if(void 0===l)throw new Error("Needed Button could not be instantiated");l.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-datetime-button-start","tchmi-trend-line-chart-template-datetime-button-start"),this.__elementMenuBar[0].appendChild(l.getElement()[0]),this.__menuBarControls.push(l);let a=$(`<label for='${this.__id}_endCombobox'>End:</label>`),_=t.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiCombobox",this.__id+"_endCombobox",{"data-tchmi-tooltip":"Datetime, Timespan or Latest","data-tchmi-text-font-size":11,"data-tchmi-allow-text-input":!0,"data-tchmi-src-data":["Latest"]},this);if(void 0===_)throw new Error("Needed Combobox could not be instantiated");{_.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-end-combobox","tchmi-trend-line-chart-template-end-combobox"),this.__elementMenuBar[0].appendChild(a[0]),this.__elementMenuBar[0].appendChild(_.getElement()[0]),this.__menuBarControls.push(_);let t=this.__end;null==t&&(t=""),"Latest"===t?_.setSelectedIndex(0):(this.isDatetime(t)&&(t=this.__moveUtcToTimeZone(t)),_.setText(t))}let h=t.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiTimespanPicker",this.__id+"_timespanEnd",{"data-tchmi-visibility":"Collapsed"},this);if(void 0===h)throw new Error("Needed TimespanPicker could not be instantiated");h.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-timespan-picker-end","tchmi-trend-line-chart-template-timespan-picker-end"),this.__elementMenuBar[0].appendChild(h.getElement()[0]),this.__menuBarControls.push(h),this.__endDatatype===i.Datatype.Timespan&&this.__end&&h.setValue(this.__end);let u=t.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_timespanButtonEnd",{"data-tchmi-tooltip":"Choose Timespan for end."},this);if(void 0===u)throw new Error("Needed Button could not be instantiated");u.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-timespan-button-end","tchmi-trend-line-chart-template-timespan-button-end"),this.__elementMenuBar[0].appendChild(u.getElement()[0]),this.__menuBarControls.push(u);let d=t.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiDateTimePicker",this.__id+"_datetimeEnd",{"data-tchmi-visibility":"Collapsed"},this);if(void 0===d)throw new Error("Needed DateTimePicker could not be instantiated");d.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-date-time-picker-end","tchmi-trend-line-chart-template-date-time-picker-end"),this.__elementMenuBar[0].appendChild(d.getElement()[0]),this.__menuBarControls.push(d),this.__endDatatype===i.Datatype.Datetime&&this.__end&&d.setValue(this.__end);let m=t.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_datetimeButtonEnd",{"data-tchmi-tooltip":"Choose Datetime for end."},this);if(void 0===m)throw new Error("Needed Button could not be instantiated");m.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-datetime-button-end","tchmi-trend-line-chart-template-datetime-button-end"),this.__elementMenuBar[0].appendChild(m.getElement()[0]),this.__menuBarControls.push(m);let c=t.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_resetButton",{"data-tchmi-tooltip":"Play","data-tchmi-is-enabled":!1},this);if(void 0===c)throw new Error("Needed Button could not be instantiated");c.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-reset","tchmi-trend-line-chart-template-reset"),this.__elementMenuBar[0].appendChild(c.getElement()[0]),this.__menuBarControls.push(c);let p=t.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_stopButton",{"data-tchmi-tooltip":"Pause","data-tchmi-is-enabled":!1},this);if(void 0===p)throw new Error("Needed Button could not be instantiated");p.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-stop","tchmi-trend-line-chart-template-stop"),this.__elementMenuBar[0].appendChild(p.getElement()[0]),this.__menuBarControls.push(p);let C=t.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiToggleButton",this.__id+"_panxButton",{"data-tchmi-is-enabled":!1,"data-tchmi-tooltip":"PanX"},this);if(void 0===C)throw new Error("Needed ToggleButton could not be instantiated");C.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-panx","tchmi-trend-line-chart-template-panx"),this.__elementMenuBar[0].appendChild(C.getElement()[0]),this.__menuBarControls.push(C);let g=t.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiToggleButton",this.__id+"_panxyButton",{"data-tchmi-is-enabled":!1,"data-tchmi-tooltip":"PanXY"},this);if(void 0===g)throw new Error("Needed ToggleButton could not be instantiated");g.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-panxy","tchmi-trend-line-chart-template-panxy"),this.__elementMenuBar[0].appendChild(g.getElement()[0]),this.__menuBarControls.push(g);let f=t.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiToggleButton",this.__id+"_zoomxButton",{"data-tchmi-is-enabled":!1,"data-tchmi-tooltip":"ZoomX"},this);if(void 0===f)throw new Error("Needed ToggleButton could not be instantiated");f.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-zoomx","tchmi-trend-line-chart-template-zoomx"),this.__elementMenuBar[0].appendChild(f.getElement()[0]),this.__menuBarControls.push(f);let T=t.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiToggleButton",this.__id+"_zoomxyButton",{"data-tchmi-is-enabled":!1,"data-tchmi-tooltip":"ZoomXY"},this);if(void 0===T)throw new Error("Needed ToggleButton could not be instantiated");T.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-zoomxy","tchmi-trend-line-chart-template-zoomxy"),this.__elementMenuBar[0].appendChild(T.getElement()[0]),this.__menuBarControls.push(T);let v=t.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_resetZoomButton",{"data-tchmi-tooltip":"Reset zooming and panning","data-tchmi-is-enabled":!1},this);if(void 0===v)throw new Error("Needed Button could not be instantiated");v.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-reset-zoom","tchmi-trend-line-chart-template-reset-zoom"),this.__elementMenuBar[0].appendChild(v.getElement()[0]),this.__menuBarControls.push(v);let S=t.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_optionsButton",{"data-tchmi-visibility":"Collapsed"},this);if(void 0===S)throw new Error("Needed Button could not be instantiated");S.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-options","tchmi-trend-line-chart-template-options"),this.__elementMenuBar[0].appendChild(S.getElement()[0]),this.__menuBarControls.push(S);let b=this.__id+"_panxButton";this.__mouseMode===i.MouseMode.PanXY?b=this.__id+"_panxyButton":this.__mouseMode===i.MouseMode.ZoomX?b=this.__id+"_zoomxButton":this.__mouseMode===i.MouseMode.ZoomXY&&(b=this.__id+"_zoomxyButton");for(let t=0,e=this.__menuBarControls.length;t<e;t++)if("TcHmi.Controls.Beckhoff.TcHmiToggleButton"===this.__menuBarControls[t].getType()){let e=this.__menuBarControls[t];e.setToggleGroup(this.__id+".interactions"),this.__menuBarControls[t].getId()===b&&e.setToggleState("Active")}}__attach(){super.__attach(),this.__resizeEventDestroyEvent=t.EventProvider.register(this.__id+".onResized",this.__rebuild()),this.__themeDataLoadedEventDestroyEvent=t.EventProvider.register("onThemeDataChanged",this.__rebuild()),this.__onPressedStopDestroyEvent=t.EventProvider.register(this.__id+"_stopButton.onPressed",this.__onPressed()),this.__onPressedTimespanStartDestroyEvent=t.EventProvider.register(this.__id+"_timespanButtonStart.onPressed",this.__onPressed()),this.__onPressedDatetimeStartDestroyEvent=t.EventProvider.register(this.__id+"_datetimeButtonStart.onPressed",this.__onPressed()),this.__onPressedTimespanEndDestroyEvent=t.EventProvider.register(this.__id+"_timespanButtonEnd.onPressed",this.__onPressed()),this.__onPressedDatetimeEndDestroyEvent=t.EventProvider.register(this.__id+"_datetimeButtonEnd.onPressed",this.__onPressed()),this.__onIsActiveChagedPanxDestroyEvent=t.EventProvider.register(this.__id+"_panxButton.onStateChanged",this.__onIsActiveChaged()),this.__onIsActiveChagedPanxyDestroyEvent=t.EventProvider.register(this.__id+"_panxyButton.onStateChanged",this.__onIsActiveChaged()),this.__onIsActiveChagedZoomxDestroyEvent=t.EventProvider.register(this.__id+"_zoomxButton.onStateChanged",this.__onIsActiveChaged()),this.__onIsActiveChagedZoomxyDestroyEvent=t.EventProvider.register(this.__id+"_zoomxyButton.onStateChanged",this.__onIsActiveChaged()),this.__onPressedResetZoomDestroyEvent=t.EventProvider.register(this.__id+"_resetZoomButton.onPressed",this.__onPressed()),this.__onPressedResetDestroyEvent=t.EventProvider.register(this.__id+"_resetButton.onPressed",this.__onPressed()),this.__onPressedOptionsDestroyEvent=t.EventProvider.register(this.__id+"_optionsButton.onPressed",this.__onPressed()),this.__onUserInteractionFinishedStartDestroyEvent=t.EventProvider.register(this.__id+"_startCombobox.onUserInteractionFinished",this.__onUserInteractionFinished()),this.__onUserInteractionFinishedEndDestroyEvent=t.EventProvider.register(this.__id+"_endCombobox.onUserInteractionFinished",this.__onUserInteractionFinished()),this.__onValueChangedDatetimeEndDestroyEvent=t.EventProvider.register(this.__id+"_datetimeEnd.onValueChanged",this.__onValueChanged()),this.__onValueChangedDatetimeStartDestroyEvent=t.EventProvider.register(this.__id+"_datetimeStart.onValueChanged",this.__onValueChanged()),this.__onValueChangedTimespanEndDestroyEvent=t.EventProvider.register(this.__id+"_timespanEnd.onValueChanged",this.__onValueChanged()),this.__onValueChangedTimespanStartDestroyEvent=t.EventProvider.register(this.__id+"_timespanStart.onValueChanged",this.__onValueChanged());const e={passive:!0,capture:!1},i={passive:!1,capture:!1};document.addEventListener("mousemove",this.__mousemoveHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&e),document.addEventListener("mouseup",this.__mouseupHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&e),document.addEventListener("touchmove",this.__touchmoveHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&i),document.addEventListener("touchend",this.__touchendHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&i),this.__processShowMenuBar(),this.__processMenuBarPosition(),this.__processMenuBarLabelFontFamily(!1),this.__processMenuBarLabelFontSize(!1),this.__processMenuBarLabelFontSizeUnit(!1),this.__processMenuBarLabelFontStyle(!1),this.__processMenuBarLabelFontWeight(!1),this.__processMenuBarLabelFontColor(!1),this.__calcMenuButtons(),this.__lineGraphDescriptions&&this.__lineGraphDescriptions.length>0&&this.__openWebsocket()}__detach(){super.__detach(),null!==this.__resizeEventDestroyEvent&&(this.__resizeEventDestroyEvent(),this.__resizeEventDestroyEvent=null),null!==this.__themeDataLoadedEventDestroyEvent&&(this.__themeDataLoadedEventDestroyEvent(),this.__themeDataLoadedEventDestroyEvent=null),null!==this.__onAttachedMenuButtonsEvent&&(this.__onAttachedMenuButtonsEvent(),this.__onAttachedMenuButtonsEvent=null),null!==this.__onPressedStopDestroyEvent&&(this.__onPressedStopDestroyEvent(),this.__onPressedStopDestroyEvent=null),null!==this.__onPressedTimespanStartDestroyEvent&&(this.__onPressedTimespanStartDestroyEvent(),this.__onPressedTimespanStartDestroyEvent=null),null!==this.__onPressedDatetimeStartDestroyEvent&&(this.__onPressedDatetimeStartDestroyEvent(),this.__onPressedDatetimeStartDestroyEvent=null),null!==this.__onPressedTimespanEndDestroyEvent&&(this.__onPressedTimespanEndDestroyEvent(),this.__onPressedTimespanEndDestroyEvent=null),null!==this.__onPressedDatetimeEndDestroyEvent&&(this.__onPressedDatetimeEndDestroyEvent(),this.__onPressedDatetimeEndDestroyEvent=null),null!==this.__onIsActiveChagedPanxDestroyEvent&&(this.__onIsActiveChagedPanxDestroyEvent(),this.__onIsActiveChagedPanxDestroyEvent=null),null!==this.__onIsActiveChagedPanxyDestroyEvent&&(this.__onIsActiveChagedPanxyDestroyEvent(),this.__onIsActiveChagedPanxyDestroyEvent=null),null!==this.__onIsActiveChagedZoomxDestroyEvent&&(this.__onIsActiveChagedZoomxDestroyEvent(),this.__onIsActiveChagedZoomxDestroyEvent=null),null!==this.__onIsActiveChagedZoomxyDestroyEvent&&(this.__onIsActiveChagedZoomxyDestroyEvent(),this.__onIsActiveChagedZoomxyDestroyEvent=null),null!==this.__onPressedResetZoomDestroyEvent&&(this.__onPressedResetZoomDestroyEvent(),this.__onPressedResetZoomDestroyEvent=null),null!==this.__onPressedResetDestroyEvent&&(this.__onPressedResetDestroyEvent(),this.__onPressedResetDestroyEvent=null),null!==this.__onPressedOptionsDestroyEvent&&(this.__onPressedOptionsDestroyEvent(),this.__onPressedOptionsDestroyEvent=null),null!==this.__onUserInteractionFinishedStartDestroyEvent&&(this.__onUserInteractionFinishedStartDestroyEvent(),this.__onUserInteractionFinishedStartDestroyEvent=null),null!==this.__onUserInteractionFinishedEndDestroyEvent&&(this.__onUserInteractionFinishedEndDestroyEvent(),this.__onUserInteractionFinishedEndDestroyEvent=null),null!==this.__onValueChangedDatetimeStartDestroyEvent&&(this.__onValueChangedDatetimeStartDestroyEvent(),this.__onValueChangedDatetimeStartDestroyEvent=null),null!==this.__onValueChangedDatetimeEndDestroyEvent&&(this.__onValueChangedDatetimeEndDestroyEvent(),this.__onValueChangedDatetimeEndDestroyEvent=null),null!==this.__onValueChangedTimespanStartDestroyEvent&&(this.__onValueChangedTimespanStartDestroyEvent(),this.__onValueChangedTimespanStartDestroyEvent=null),null!==this.__onValueChangedTimespanEndDestroyEvent&&(this.__onValueChangedTimespanEndDestroyEvent(),this.__onValueChangedTimespanEndDestroyEvent=null),null!==this.__subscriptionId&&(t.Server.unsubscribe(this.__subscriptionId,null),this.__subscriptionId=null),null!==this.__requestId&&(t.Server.releaseRequest(this.__requestId),this.__requestId=null);const e={passive:!0,capture:!1},i={passive:!1,capture:!1};if(document.removeEventListener("mousemove",this.__mousemoveHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&e),document.removeEventListener("mouseup",this.__mouseupHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&e),document.removeEventListener("touchmove",this.__touchmoveHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&i),document.removeEventListener("touchend",this.__touchendHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&i),null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getCanvasDrawing();null!==t&&(t[0].removeEventListener("click",this.__clickHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&e),t[0].removeEventListener("mousedown",this.__mousedownHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&e),t[0].removeEventListener("touchstart",this.__touchstartHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&i),t[0].removeEventListener("mousemove",this.__mousemoveTooltipHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&e),t[0].removeEventListener("wheel",this.__mousewheelHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&e)),this.__lineChart.remove(),this.__lineChart=null}this.__holdTimer&&(clearTimeout(this.__holdTimer),this.__holdTimer=0),this.__wheelInfo.timeout&&(window.clearTimeout(this.__wheelInfo.timeout),this.__wheelInfo.timeout=0)}destroy(){this.__keepAlive||super.destroy()}isDatetime(date){return!!date&&!isNaN(new Date(date).getTime())}isKeyword(t){switch(t){case"Latest":case"First":return!0}return!1}isTimespan(t){return!!t&&(!this.isKeyword(t)&&!this.isDatetime(t))}__onPressed(){let t=this;return function(e){null!==t.__elementMenuBarDropdown[0].parentElement&&t.showOptions(),-1!==e.name.search("stop")?t.stop():-1!==e.name.search("resetZoom")?t.resetZoom():-1!==e.name.search("reset")?t.reset():-1!==e.name.search("options")?t.showOptions():-1!==e.name.search("timespanButtonStart")?t.__menuBarControls[1].openTimespanPicker():-1!==e.name.search("datetimeButtonStart")?t.__menuBarControls[3].openDateTimePicker():-1!==e.name.search("timespanButtonEnd")?t.__menuBarControls[6].openTimespanPicker():-1!==e.name.search("datetimeButtonEnd")&&t.__menuBarControls[8].openDateTimePicker()}}__onUserInteractionFinished(){let t=this;return function(e){if(-1!==e.name.search("start")){let e=t.__menuBarControls[0].getText();e=e?e.toString():null,t.isDatetime(e)&&(e=t.__moveTimeZoneToUtc(e)),t.setStart(e)}else if(-1!==e.name.search("end")){let e=t.__menuBarControls[5].getText();e=e?e.toString():null,t.isDatetime(e)&&(e=t.__moveTimeZoneToUtc(e)),t.setEnd(e)}}}__onIsActiveChaged(){let e=this;return function(n){let o=!1;for(let n=0,s=e.__menuBarControls.length;n<s;n++)if(e.__menuBarControls[n].getId()===e.__id+"_panxButton"){"Active"===e.__menuBarControls[n].getToggleState()&&(e.__mouseMode=i.MouseMode.PanX,t.EventProvider.raise(e.__id+".onPropertyChanged",{propertyName:"MouseMode"}),o=!0)}else if(e.__menuBarControls[n].getId()===e.__id+"_panxyButton"){"Active"===e.__menuBarControls[n].getToggleState()&&(e.__mouseMode=i.MouseMode.PanXY,t.EventProvider.raise(e.__id+".onPropertyChanged",{propertyName:"MouseMode"}),o=!0)}else if(e.__menuBarControls[n].getId()===e.__id+"_zoomxButton"){"Active"===e.__menuBarControls[n].getToggleState()&&(e.__mouseMode=i.MouseMode.ZoomX,t.EventProvider.raise(e.__id+".onPropertyChanged",{propertyName:"MouseMode"}),o=!0)}else if(e.__menuBarControls[n].getId()===e.__id+"_zoomxyButton"){"Active"===e.__menuBarControls[n].getToggleState()&&(e.__mouseMode=i.MouseMode.ZoomXY,t.EventProvider.raise(e.__id+".onPropertyChanged",{propertyName:"MouseMode"}),o=!0)}if(null!==e.__elementMenuBarDropdown[0].parentElement&&e.showOptions(),!o){let n=e.__menuBarControls[12];null!=n&&n.getId()===e.__id+"_panxButton"&&(e.__mouseMode=i.MouseMode.PanX,t.EventProvider.raise(e.__id+".onPropertyChanged",{propertyName:"MouseMode"}),n.setToggleState("Active"),null!==e.__elementMenuBarDropdown[0].parentElement&&e.showOptions())}}}__onValueChanged(){let t=this;return function(e){if(!t.__nowIsValueChanged){if(-1!==e.name.search("timespanStart")){if(t.__menuBarControls[0]&&t.__menuBarControls[1]){t.__nowIsValueChanged=!0;let e=t.__menuBarControls[1].getValue();t.setStart(e)}}else if(-1!==e.name.search("datetimeStart")){if(t.__menuBarControls[0]&&t.__menuBarControls[3]){t.__nowIsValueChanged=!0;let e=t.__menuBarControls[3].getValue();t.setStart(e)}}else if(-1!==e.name.search("timespanEnd")){if(t.__menuBarControls[5]&&t.__menuBarControls[6]){t.__nowIsValueChanged=!0;let e=t.__menuBarControls[6].getValue();t.setEnd(e)}}else if(-1!==e.name.search("datetimeEnd")&&t.__menuBarControls[5]&&t.__menuBarControls[8]){t.__nowIsValueChanged=!0;let e=t.__menuBarControls[8].getValue();t.setEnd(e)}t.__nowIsValueChanged=!1}}}__rebuild(){return(t,e)=>{this.__isAttached&&!TCHMI_DESIGNER&&this.__lineGraphDescriptions&&this.__lineGraphDescriptions.length>0?this.__openWebsocket():this.__drawLineChart(),this.__calcMenuButtons()}}__openWebsocket(){TCHMI_DESIGNER||(this.__elementLoading[0].appendChild(this.__loadingSpinner),this.__getData())}__milliSecToIso(t){if(0===t)return"PT0S";let e=!1;t<0&&(e=!0,t*=-1);let i=Math.floor(t/3154e7),n=Math.floor(t%3154e7/2628e6),o=Math.floor(t%3154e7%2628e6/864e5),s=Math.floor(t%3154e7%2628e6%864e5/36e5),r=Math.floor(t%3154e7%2628e6%864e5%36e5/6e4),l=Math.floor(t%3154e7%2628e6%864e5%36e5%6e4/1e3),a=Math.floor(t%3154e7%2628e6%864e5%36e5%6e4%1e3),_="";return e&&(_+="-"),_+="P",i>0&&(_+=i+"Y"),n>0&&(_+=n+"M"),o>0&&(_+=o+"D"),(s>0||r>0||l>0||a>0)&&(_+="T"),s>0&&(_+=s+"H"),r>0&&(_+=r+"M"),(l>0||0===o&&0===s&&0===r)&&(_+=l),a>0&&(_+="."+("00"+a).slice(-3).replace(/\.?0+$/,"")),(a>0||l>0)&&(_+="S"),_}__isoToMilliSec(t){let e=0,i=0,n=0,o=0,s=0,r=0,l=!1,a=!1,_=t.split("");for(let t=0,h=_.length;t<h;t++){let h=0,u="";for(;_[t]>="0"&&_[t]<="9"||"."===_[t];)u+=_[t],t++,h=parseFloat(u);switch(_[t]){case"-":l=!0;break;case"Y":r=h;break;case"D":o=h;break;case"T":a=!0;break;case"H":n=h;break;case"M":a?i=h:s=h;break;case"S":e=h}}let h=3154e7*r;return h+=2628e6*s,h+=864e5*o,h+=36e5*n,h+=6e4*i,h+=1e3*e,l&&(h*=-1),h}__getData(){if(this.__isAttached&&(this.__tooltipInformation.show&&(this.__elementTooltip.css("visibility","hidden"),this.__tooltipInformation={show:!1,isActive:!1,time:0,points:[],errors:[]}),null!==this.__subscriptionId&&(t.Server.unsubscribe(this.__subscriptionId,null),this.__subscriptionId=null),null!==this.__lineGraphDescriptions&&void 0!==this.__lineGraphDescriptions)){let e=this.__elementTemplateRoot.width(),i=[];for(let t=0,e=this.__lineGraphDescriptions.length;t<e;t++)i.push({symbol:this.__lineGraphDescriptions[t].symbol});let n,o,s=this.__serverDomain+".GetTrendLineData",r=this.__serverDomain+".GetTrendLineWindow";n={chartName:this.__id,xAxisStart:this.__internalStart,xAxisEnd:this.__internalEnd,yAxes:i,displayWidth:e},o={chartName:this.__id,xAxisStart:this.__internalStart,xAxisEnd:this.__internalEnd,yAxes:i};for(let t=0,e=this.__menuBarControls.length;t<e;t++)-1===this.__menuBarControls[t].getId().search("options")&&"Visible"===this.__menuBarControls[t].getVisibility()&&this.__menuBarControls[t].setIsEnabled(!1);if("Latest"===this.__internalEnd&&null!==this.__internalStart||null!==this.__internalEnd&&"First"===this.__internalStart)this.__subscriptionId=t.Server.subscribe([{commandOptions:["SendErrorMessage"],symbol:s,writeValue:n},{commandOptions:["SendErrorMessage"],symbol:r,writeValue:o}],void 0===this.__interval?this.getAttributeDefaultValueInternal("Interval"):this.__interval,this.__getDataCallback());else{let e={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage"],symbol:s,writeValue:n}]};this.__requestId=t.Server.request(e,this.__getDataCallback())}}}__getDataCallback(){let e=this;return function(i){e.__requestId=null;let n=e.__lastInteraction;if(i.error===t.Errors.NONE&&i.response){if(null!==i.response.error&&void 0!==i.response.error)return n?(e.__loadingSpinner.remove(),TCHMI_CONSOLE_LOG_LEVEL>=1&&t.Log.error("[Source=Control, Module=TcHmi_Controls_Beckhoff_TcHmiTrendLineChart, Id="+e.getId()+"] Server responds with error. Details: "+t.Log.buildMessage(i.response.error)),void e.__resetBeforeLastManipulation()):274===i.response.error.code&&e.__getDataCounter<100?(e.__getDataCounter++,void window.setTimeout((function(){e.__getData()}),50)):(e.__loadingSpinner.remove(),null!==i.response.commands&&void 0!==i.response.commands&&TCHMI_CONSOLE_LOG_LEVEL>=1&&t.Log.error("[Source = Control, Class = TcHmiTrendLineChart, Id = "+e.getId()+"] Server responds with error. Details: "+t.Log.buildMessage(i.response.error)),void e.__reset());if(e.__getDataCounter=0,null!==i.response.commands&&void 0!==i.response.commands){let o=!1;for(let s=0,r=i.response.commands.length;s<r;s++)if(null!==i.response.commands[s].error&&void 0!==i.response.commands[s].error){if(e.__loadingSpinner.remove(),o=!0,TCHMI_CONSOLE_LOG_LEVEL>=1&&t.Log.error(`[Source=Control, Module=TcHmi_Controls_Beckhoff_TcHmiTrendLineChart, Id=${e.getId()}] Server responds with error for command for symbol=${i.response.commands[s].symbol}. Details: ${t.Log.buildMessage(i.response.commands[s].error)}`),n)return void e.__resetBeforeLastManipulation();e.__reset()}else if(null!==i.response.commands[s].readValue&&void 0!==i.response.commands[s].readValue)if(0===e.__getDataCounter){if(e.__loadingSpinner.remove(),void 0!==e.__subscriptionId)if(i.response.commands[s].symbol===e.__serverDomain+".GetTrendLineData"){if(null!==e.__lineGraphData&&e.__lineGraphData.splice(0,e.__lineGraphData.length),null!==e.__lineGraphRawData&&e.__lineGraphRawData.splice(0,e.__lineGraphRawData.length),null!==i.response.commands[s].readValue.axesData&&void 0!==i.response.commands[s].readValue.axesData&&i.response.commands[s].readValue.axesData.length>0){let t=[];for(let e=0,n=i.response.commands[s].readValue.axesData.length;e<n;e++){let n=[];for(let t=0,o=i.response.commands[s].readValue.axesData[e].length;t<o;t++){let o=new Date(i.response.commands[s].readValue.axesData[e][t].x).getTime();i.response.commands[s].readValue.axesData[e][t].x=o;let r=!0,l=!1,a=!1,_=i.response.commands[s].readValue.axesData[e][t].flags;void 0!==_&&("Start"===_&&t>0?(l=!0,n[t-1].bindPoints=!1):"Stop"===_&&(a=!0,r=!1));let h=void 0!==i.response.commands[s].readValue.axesData[e][t].error;h&&t>0&&(n[t-1].bindPoints=!1),n.push({x:o,y:i.response.commands[s].readValue.axesData[e][t].y,bindPoints:r,isArea:h})}t.push(n)}e.__lineGraphData=t,e.__lineGraphRawData=i.response.commands[s].readValue.axesData,e.__endBeforeManipulation=e.__internalEnd,e.__startBeforeManipulation=e.__internalStart}}else i.response.commands[s].symbol===e.__serverDomain+".GetTrendLineWindow"&&(e.__internalStartServer=new Date(i.response.commands[s].readValue.xAxisStart).getTime(),e.__internalEndServer=new Date(i.response.commands[s].readValue.xAxisEnd).getTime())}else{if(o=!0,e.__loadingSpinner.remove(),n)return void e.__resetBeforeLastManipulation();e.__reset()}else{if(o=!0,e.__loadingSpinner.remove(),n)return void e.__resetBeforeLastManipulation();e.__reset()}o||e.__drawLineChart()}else{if(e.__loadingSpinner.remove(),n)return void e.__resetBeforeLastManipulation();e.__reset()}}else{if(e.__loadingSpinner.remove(),i.error&&TCHMI_CONSOLE_LOG_LEVEL>=1&&t.Log.error("[Source=Control, Module=TcHmi_Controls_Beckhoff_TcHmiTrendLineChart, Id="+e.getId()+"] Framework error= "+i.error+", name="+t.Errors[i.error]+" while fetching data from server."),n)return void e.__resetBeforeLastManipulation();e.__reset()}"First"!==e.__internalStart&&"Latest"!==e.__internalEnd?e.__setMenuButtonsFromStop():(e.__setMenuButtonsFromStart(),e.__startEndBeforeZoom={end:e.__internalEnd,start:e.__internalStart})}}__resetBeforeLastManipulation(){if(null!==this.__lineChart){let t=this.__lineChart.getCanvasDrawing();if(null===t)return;let e=t[0].getContext("2d");if(null!==e){if(e.setTransform(1,0,0,1,0,0),this.__lineChart.setLineChanged(!0),this.__lineChart.draw(),null===this.__lineGraphData)return;if(null===this.__internalEnd)return;this.__endBeforeManipulation!==this.__internalEnd&&(this.__internalEnd=this.__endBeforeManipulation,null===this.__internalEnd?this.__endDatatype=null:this.isDatetime(this.__internalEnd)?this.__endDatatype=i.Datatype.Datetime:this.isKeyword(this.__internalEnd)?this.__endDatatype=i.Datatype.Keyword:this.__endDatatype=i.Datatype.Timespan),this.__internalStart!==this.__startBeforeManipulation&&(this.__internalStart=this.__startBeforeManipulation,null===this.__internalStart?this.__startDatatype=null:this.isDatetime(this.__internalStart)?this.__startDatatype=i.Datatype.Datetime:this.isKeyword(this.__internalStart)?this.__startDatatype=i.Datatype.Keyword:this.__startDatatype=i.Datatype.Timespan);let t=this.__elementChart[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-canvas-zooming");t.length>0&&t[0].classList.add("tchmi-no-pointer-events"),"First"!==this.__internalStart&&"Latest"!==this.__internalEnd?this.__setMenuButtonsFromStop():this.__setMenuButtonsFromStart()}}}__drawLineChart(){let e=[],n=!0,o=void 0===this.__showXAxis?this.getAttributeDefaultValueInternal("ShowXAxis"):this.__showXAxis,s=[],r=this.__calcSizes();if(null===r.width||null===r.height)return;if(null!==this.__lineChart&&void 0!==this.__lineChart){this.__lineChart.clear(r.width,r.height);let t=this.__elementChart[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-canvas-zooming");if(t.length>0){let e=t[0];e.classList.add("tchmi-no-pointer-events");let i=e.getContext("2d");null!==i&&i.clearRect(0,0,r.width,r.height),e.width=r.width,e.height=r.height}}else{this.__lineChart=new TcHmiCharting.LineAreaChart(this.__elementChart,r.width,r.height);let t=document.createElement("canvas");t.setAttribute("height",r.height.toString()),t.setAttribute("width",r.width.toString()),t.setAttribute("class","tchmi-no-pointer-events TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-canvas-zooming"),t.setAttribute("style","position:absolute;width:100%;height:100%;"),this.__elementChart[0].appendChild(t),this.__zoomingCanvasContext=t.getContext("2d");let e=this.__lineChart.getCanvasDrawing();if(null!==e){const t={passive:!0,capture:!1},i={passive:!1,capture:!1};e[0].addEventListener("click",this.__clickHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&t),e[0].addEventListener("mousedown",this.__mousedownHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&t),e[0].addEventListener("touchstart",this.__touchstartHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&i),e[0].addEventListener("mousemove",this.__mousemoveTooltipHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&t),e[0].addEventListener("wheel",this.__mousewheelHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&t)}}this.__lineChart.addXAxis();let l=this.__lineChart.getXAxis();if(null!==l){if(l.setShowAxis(o),l.setShowSubTicks(void 0===this.__showXSubTicks?this.getAttributeDefaultValueInternal("ShowXSubTicks"):this.__showXSubTicks),l.setShowAxisName(void 0===this.__showXAxisName?this.getAttributeDefaultValueInternal("ShowXAxisName"):this.__showXAxisName),t.isSolidColor(this.__xAxisColor)?l.setAxisColor(t.StyleProvider.resolveSolidColorAsCssValue(this.__xAxisColor)):l.setAxisColor(null),l.setDecimalPlaces(0),l.setAxisName(t.ValueConverter.toString(this.__xAxisName)),t.isSolidColor(this.__xAxisNameFontColor)?l.setAxisNameFontColor(t.StyleProvider.resolveSolidColorAsCssValue(this.__xAxisNameFontColor)):l.setAxisNameFontColor(null),l.setAxisNameFontFamily(this.__xAxisNameFontFamily),l.setAxisNameFontSize(void 0===this.__xAxisNameFontSize?this.getAttributeDefaultValueInternal("XAxisNameFontSize"):this.__xAxisNameFontSize),l.setAxisNameFontSizeUnit(void 0===this.__xAxisNameFontSizeUnit?this.getAttributeDefaultValueInternal("XAxisNameFontSizeUnit"):this.__xAxisNameFontSizeUnit),l.setAxisNameFontWeight(void 0===this.__xAxisNameFontWeight?this.getAttributeDefaultValueInternal("XAxisNameFontWeight"):this.__xAxisNameFontWeight),l.setAxisWidth(void 0===this.__xAxisWidth?this.getAttributeDefaultValueInternal("XAxisWidth"):this.__xAxisWidth),t.isSolidColor(this.__xLabelFontColor)?l.setLabelFontColor(t.StyleProvider.resolveSolidColorAsCssValue(this.__xLabelFontColor)):l.setLabelFontColor(null),l.setLabelFontFamily(this.__xLabelFontFamily),l.setLabelFontSize(void 0===this.__xLabelFontSize?this.getAttributeDefaultValueInternal("XLabelFontSize"):this.__xLabelFontSize),l.setLabelFontSizeUnit(void 0===this.__xLabelFontSizeUnit?this.getAttributeDefaultValueInternal("XLabelFontSizeUnit"):this.__xLabelFontSizeUnit),l.setLabelFontWeight(void 0===this.__xLabelFontWeight?this.getAttributeDefaultValueInternal("XLabelFontWeight"):this.__xLabelFontWeight),l.setMainTickSteps(void 0===this.__xMainTickSteps?this.getAttributeDefaultValueInternal("XMainTickSteps"):this.__xMainTickSteps),TCHMI_DESIGNER)l.setShowLabels(!1),null!==this.__internalYAxis&&this.__internalYAxis.length>0&&(e=this.__internalYAxis.slice()),n=!1;else if(this.__internalEnd&&this.__internalStart&&this.__lineGraphDescriptions&&this.__lineGraphDescriptions.length>0){let t,i,o,r;if(this.isDatetime(this.__internalStart)){t=new Date(this.__internalStart).getTime()}else this.isKeyword(this.__internalStart)?t=this.__internalStartServer:i=this.__isoToMilliSec(this.__internalStart);if(this.isDatetime(this.__internalEnd)){o=new Date(this.__internalEnd).getTime()}else this.isKeyword(this.__internalEnd)?o=this.__internalEndServer:r=this.__isoToMilliSec(this.__internalEnd);if(t||o){if(t)l.setMainTickStartValue(t);else if(o&&void 0!==i){let t=o-i;l.setMainTickStartValue(t)}if(o)l.setMainTickEndValue(o);else if(t&&void 0!==r){let e=t+r;l.setMainTickEndValue(e)}l.setShowLabels(void 0===this.__xShowLabels?this.getAttributeDefaultValueInternal("XShowLabels"):this.__xShowLabels),l.setXAxisCallback(this.__xAxisCallbackFunction())}else l.setShowAxis(!1),l.setShowLabels(!1);null===this.__lineGraphData||0===this.__lineGraphData.length?(n=!1,l.setShowLabels(!1),null!==this.__internalYAxis&&(e=this.__internalYAxis.slice())):null!==this.__internalLineGraphDescription&&null!==this.__internalYAxis&&(s=this.__internalLineGraphDescription.slice(),e=this.__internalYAxis.slice())}else l.setShowLabels(!1),null!==this.__internalYAxis&&this.__internalYAxis.length>0&&(e=this.__internalYAxis.slice()),n=!1;l.setSubTickSteps(void 0===this.__xSubTickSteps?this.getAttributeDefaultValueInternal("XSubTickSteps"):this.__xSubTickSteps),l.setAutoScaling(!1)}if(null!=e)for(let n=0,o=e.length;n<o;n++){this.__lineChart.addYAxis(t.ValueConverter.toEnum(e[n].position,i.AxisPosition,i.AxisPosition.Left));let o=this.__lineChart.getYAxisAtPosition(this.__lineChart.getYAxis().length-1);o.setShowAxis(!0),o.setAutoScaling(t.ValueConverter.toBoolean(e[n].autoScaling,!1));let s=e[n].axisColor;if(t.isSolidColor(s))o.setAxisColor(t.StyleProvider.resolveSolidColorAsCssValue(s));else{let e=t.Theme.Resources.get(this,"YAxisAxisColor");t.isSolidColor(e.value)?o.setAxisColor(t.StyleProvider.resolveSolidColorAsCssValue(e.value)):o.setAxisColor(null)}o.setAxisName(t.ValueConverter.toString(e[n].axisName));let r=e[n].axisNameFontColor;if(t.isSolidColor(r))o.setAxisNameFontColor(t.StyleProvider.resolveSolidColorAsCssValue(r));else{let e=t.Theme.Resources.get(this,"YAxisAxisNameFontColor");t.isSolidColor(e.value)?o.setAxisNameFontColor(t.StyleProvider.resolveSolidColorAsCssValue(e.value)):o.setAxisNameFontColor(null)}o.setAxisNameFontFamily(t.ValueConverter.toFontFamily(e[n].axisNameFontFamily)),o.setAxisNameFontSize(t.ValueConverter.toNumber(e[n].axisNameFontSize));let l=e[n].axisNameFontSizeUnit;void 0!==l?o.setAxisNameFontSizeUnit(l):o.setAxisNameFontSizeUnit(null);let a=e[n].axisNameFontWeight;void 0!==a?o.setAxisNameFontWeight(a):o.setAxisNameFontWeight(null),o.setDecimalPlaces(t.ValueConverter.toNumber(e[n].decimalPlaces));let _=e[n].labelFontColor;if(t.isSolidColor(_))o.setLabelFontColor(t.StyleProvider.resolveSolidColorAsCssValue(_));else{let e=t.Theme.Resources.get(this,"YAxisLabelFontColor");t.isSolidColor(e.value)?o.setLabelFontColor(t.StyleProvider.resolveSolidColorAsCssValue(e.value)):o.setLabelFontColor(null)}o.setMainTickStartValue(t.ValueConverter.toNumber(e[n].mainTickMinValue)),o.setMainTickEndValue(t.ValueConverter.toNumber(e[n].mainTickMaxValue)),o.setShowLabels(t.ValueConverter.toBoolean(e[n].showLabels,!0)),o.setShowAxisName(t.ValueConverter.toBoolean(e[n].showAxisName,!0)),o.setUnit(t.ValueConverter.toString(e[n].unit)),o.setAxisWidth(void 0===this.__yAxisWidth?this.getAttributeDefaultValueInternal("YAxisWidth"):this.__yAxisWidth),o.setLabelFontFamily(this.__yLabelFontFamily),o.setLabelFontSize(void 0===this.__yLabelFontSize?this.getAttributeDefaultValueInternal("YLabelFontSize"):this.__yLabelFontSize),o.setLabelFontSizeUnit(void 0===this.__yLabelFontSizeUnit?this.getAttributeDefaultValueInternal("YLabelFontSizeUnit"):this.__yLabelFontSizeUnit),o.setLabelFontWeight(void 0===this.__yLabelFontWeight?this.getAttributeDefaultValueInternal("YLabelFontWeight"):this.__yLabelFontWeight),o.setMainTickSteps(void 0===this.__yMainTickSteps?this.getAttributeDefaultValueInternal("YMainTickSteps"):this.__yMainTickSteps),o.setSubTickSteps(void 0===this.__ySubTickSteps?this.getAttributeDefaultValueInternal("YSubTickSteps"):this.__ySubTickSteps),o.setShowSubTicks(void 0===this.__showYSubTicks?this.getAttributeDefaultValueInternal("ShowYSubTicks"):this.__showYSubTicks)}if(this.__showGrid){this.__lineChart.addGrid();let e=this.__lineChart.getGrid();null!==e&&(e.setShowHorizontalLines(void 0===this.__gridShowHorizontalLines?this.getAttributeDefaultValueInternal("GridShowHorizontalLines"):this.__gridShowHorizontalLines),e.setShowVerticalLines(void 0===this.__gridShowVerticalLines?this.getAttributeDefaultValueInternal("GridShowVerticalLines"):this.__gridShowVerticalLines),e.setLineWidth(void 0===this.__gridLineWidth?this.getAttributeDefaultValueInternal("GridLineWidth"):this.__gridLineWidth),e.setLineStyle(void 0===this.__gridLineStyle?this.getAttributeDefaultValueInternal("GridLineStyle"):this.__gridLineStyle),t.isSolidColor(this.__gridLineColor)?e.setLineColor(t.StyleProvider.resolveSolidColorAsCssValue(this.__gridLineColor)):e.setLineColor(null),t.isSolidColor(this.__gridBackgroundColor)?e.setBackgroundColor(t.StyleProvider.resolveSolidColorAsCssValue(this.__gridBackgroundColor)):e.setBackgroundColor(null))}this.__lineChart.addSubgrid();let a=this.__lineChart.getSubgrid();if(null!==a&&(a.setShowHorizontalLines(void 0===this.__subgridShowHorizontalLines?this.getAttributeDefaultValueInternal("SubgridShowHorizontalLines"):this.__subgridShowHorizontalLines),a.setShowVerticalLines(void 0===this.__subgridShowVerticalLines?this.getAttributeDefaultValueInternal("SubgridShowVerticalLines"):this.__subgridShowVerticalLines),a.setLineWidth(void 0===this.__subgridLineWidth?this.getAttributeDefaultValueInternal("SubgridLineWidth"):this.__subgridLineWidth),a.setLineStyle(void 0===this.__subgridLineStyle?this.getAttributeDefaultValueInternal("SubgridLineStyle"):this.__subgridLineStyle),t.isSolidColor(this.__subgridLineColor)?a.setLineColor(t.StyleProvider.resolveSolidColorAsCssValue(this.__subgridLineColor)):a.setLineColor(null)),null!=s&&null!==this.__lineGraphData&&this.__lineGraphData.length>=s.length)for(let i=0,n=s.length;i<n;i++)if(null!=e)for(let n=0,o=e.length;n<o;n++)if(e[n].id===s[i].yAxisId){this.__lineChart.addGraph({points:this.__lineGraphData[i],yAxis:this.__lineChart.getYAxisAtPosition(n)});let e=this.__lineChart.getLineGraphsAtPosition(this.__lineChart.getLineGraphs().length-1);if(null!=e){let n,o=t.Theme.Resources.get(this,"ErrorMarkingColor");if(n=t.isSolidColor(o.value)?t.StyleProvider.resolveSolidColorAsCssValue(o.value):"rgba(255, 0, 0, 0.4)",null!==this.__lineGraphRawData){let t=null,o=null,s=null;for(var _=0,h=this.__lineGraphRawData[i].length;_<h;_++){let r=this.__lineGraphRawData[i][_].error;void 0!==r?(null===t?t=0===_?this.__lineGraphRawData[i][_].x:this.__lineGraphRawData[i][_-1].x:r!==s&&o&&(e.addArea({beginX:t,endX:o,backgroundColor:n}),t=o),o=this.__lineGraphRawData[i][_].x,s=r):t&&(e.addArea({beginX:t,endX:this.__lineGraphRawData[i][_].x,backgroundColor:n}),t=null)}t&&(e.addArea({beginX:t,endX:this.__lineGraphRawData[i][this.__lineGraphRawData[i].length-1].x,backgroundColor:n}),t=null)}let r=s[i].lineColor;if(t.isSolidColor(r))e.setLineColor(t.StyleProvider.resolveSolidColorAsCssValue(r));else{let i=t.Theme.Resources.get(this,"LineGraphDescriptionLineColor");t.isSolidColor(i.value)?e.setLineColor(t.StyleProvider.resolveSolidColorAsCssValue(i.value)):e.setLineColor(null)}e.setLineWidth(t.ValueConverter.toNumber(s[i].lineWidth)),"Latest"!==this.__internalEnd&&"First"!==this.__internalStart?e.setPointDot(t.ValueConverter.toBoolean(s[i].pointDotInStopMode,!0)):e.setPointDot(t.ValueConverter.toBoolean(s[i].pointDot,!1));let l=s[i].pointDotFillColor;if(t.isSolidColor(l))e.setPointDotFillColor(t.StyleProvider.resolveSolidColorAsCssValue(l));else{let i=t.Theme.Resources.get(this,"LineGraphDescriptionPointDotFillColor");t.isSolidColor(i.value)?e.setPointDotFillColor(t.StyleProvider.resolveSolidColorAsCssValue(i.value)):e.setPointDotFillColor(null)}e.setPointDotRadius(t.ValueConverter.toNumber(s[i].pointDotRadius));let a=s[i].pointDotStrokeColor;if(t.isSolidColor(a))e.setPointDotStrokeColor(t.StyleProvider.resolveSolidColorAsCssValue(a));else{let i=t.Theme.Resources.get(this,"LineGraphDescriptionPointDotStrokeColor");t.isSolidColor(i.value)?e.setPointDotStrokeColor(t.StyleProvider.resolveSolidColorAsCssValue(i.value)):e.setPointDotStrokeColor(null)}e.setPointDotStrokeWidth(t.ValueConverter.toNumber(s[i].pointDotStrokeWidth))}}if(this.__lineChart.setYAxisWidth(void 0===this.__yAxisWidth?this.getAttributeDefaultValueInternal("YAxisWidth"):this.__yAxisWidth),this.__lineChart.setYLabelFontFamily(this.__yLabelFontFamily),this.__lineChart.setYLabelFontSize(void 0===this.__yLabelFontSize?this.getAttributeDefaultValueInternal("YLabelFontSize"):this.__yLabelFontSize),this.__lineChart.setYLabelFontSizeUnit(void 0===this.__yLabelFontSizeUnit?this.getAttributeDefaultValueInternal("YLabelFontSizeUnit"):this.__yLabelFontSizeUnit),this.__lineChart.setYLabelFontWeight(void 0===this.__yLabelFontWeight?this.getAttributeDefaultValueInternal("YLabelFontWeight"):this.__yLabelFontWeight),this.__lineChart.setYMainTickSteps(void 0===this.__yMainTickSteps?this.getAttributeDefaultValueInternal("YMainTickSteps"):this.__yMainTickSteps),this.__lineChart.setYSubTickSteps(void 0===this.__ySubTickSteps?this.getAttributeDefaultValueInternal("YSubTickSteps"):this.__ySubTickSteps),this.__lineChart.setShowYSubTicks(void 0===this.__showYSubTicks?this.getAttributeDefaultValueInternal("ShowYSubTicks"):this.__showYSubTicks),this.__lineChart.draw(),e.splice(0,e.length),s.splice(0,s.length),null!==l){let e=l.getMainTickStartValue();e!==this.__actualStartTime&&(this.__actualStartTime=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ActualStartTime"}));let i=l.getMainTickEndValue();i!==this.__actualEndTime&&(this.__actualEndTime=i,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ActualEndTime"}))}}__calcSizes(){let t=this.getRenderedWidth();if(!t)return{width:null,height:null};let e=this.getRenderedHeight();return e?(this.__borderWidth&&this.__borderStyle&&("None"!==this.__borderStyle.left&&(t-=this.__borderWidth.left),"None"!==this.__borderStyle.right&&(t-=this.__borderWidth.right),"None"!==this.__borderStyle.top&&(e-=this.__borderWidth.top),"None"!==this.__borderStyle.bottom&&(e-=this.__borderWidth.bottom)),t-=10,this.__showMenuBar?e-=65:e-=10,{width:t,height:e}):{width:t,height:null}}__reset(){if(!TCHMI_DESIGNER){if(null!==this.__lineGraphData&&void 0!==this.__lineGraphData&&this.__lineGraphData.splice(0,this.__lineGraphData.length),null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__calcSizes();if(null===t.width||null===t.height)return;this.__lineChart.clear(t.width,t.height)}let t=this.__elementChart[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-canvas-zooming");t.length>0&&t[0].classList.add("tchmi-no-pointer-events");let e=!1;for(let t=0,i=this.__menuBarControls.length;t<i;t++){if(this.__menuBarControls[t].getId()===this.__id+"_stopButton")this.__menuBarControls[t].setIsEnabled(!1);else if(this.__menuBarControls[t].getId()===this.__id+"_panxButton"){this.__menuBarControls[t].setIsEnabled(!1),"Active"===this.__menuBarControls[t].getToggleState()&&(e=!0)}else if(this.__menuBarControls[t].getId()===this.__id+"_panxyButton"){this.__menuBarControls[t].setIsEnabled(!1),"Active"===this.__menuBarControls[t].getToggleState()&&(e=!0)}else if(this.__menuBarControls[t].getId()===this.__id+"_zoomxButton"){this.__menuBarControls[t].setIsEnabled(!1),"Active"===this.__menuBarControls[t].getToggleState()&&(e=!0)}else if(this.__menuBarControls[t].getId()===this.__id+"_zoomxyButton"){this.__menuBarControls[t].setIsEnabled(!1),"Active"===this.__menuBarControls[t].getToggleState()&&(e=!0)}else this.__menuBarControls[t].getId()===this.__id+"_resetZoomButton"||this.__menuBarControls[t].getId()===this.__id+"_resetButton"?this.__menuBarControls[t].setIsEnabled(!1):(this.__menuBarControls[t].getId()===this.__id+"_startCombobox"||this.__menuBarControls[t].getId()===this.__id+"_endCombobox")&&this.__menuBarControls[t].setIsEnabled(!0);if(!e&&this.__isAttached){let t=this.__menuBarControls[12];t.getId()===this.__id+"_panxButton"&&t.setToggleState("Active")}}}}__createTooltip(e,i,n){if(this.__elementTooltip.css("visibility","hidden"),this.__tooltipInformation={show:!1,isActive:!1,time:0,points:[],errors:[]},this.__lineChart){let o=this.__lineChart.getYAxisAtPosition(0);if(o){let s=o.getAxisWidth();if(null!==s){let r=this.__lineChart.getDrawingBorder(),l=o.getDiffEndLabelAndLine()+s/2+5+r,a=this.__lineChart.getXAxis(),_=0;if(null!==a){_=a.getXAxisLeftWidth()||0;let o=this.__lineChart.getYAxis();if(null!=o){let s=o[0].getLineHeight(),r=this.__lineChart.getLineGraphs(),h=[],u=[],d=0,m=a.getMainTickStartValue(),c=a.getMainTickEndValue();if(null!==m&&null!==c){d=m+(e-_)*((c-m)/a.getLineWidth());for(let t=0,n=r.length;t<n;t++){let n=r[t],o=n.getPointDotRadius();if(null!==o&&n.getPointDot()){let r=n.getPoints();if(null!=r)for(let n=0,h=r.length;n<h;n++)if(e>=_&&e<=_+a.getLineWidth()&&i>=l&&i<=l+s&&r[n].xPosition-o<=e&&e<=r[n].xPosition+o&&r[n].yPosition-o<=i&&r[n].yPosition+o>=i){let e="",i=null;this.__internalLineGraphDescription&&this.__internalLineGraphDescription[t]&&(e=this.__internalLineGraphDescription[t].symbol,i=this.__internalLineGraphDescription[t]);let o=null;if(this.__internalYAxis&&i){let id=i.yAxisId;for(let t=0,e=this.__internalYAxis.length;t<e;t++)if(this.__internalYAxis[t].id===id){o=this.__internalYAxis[t];break}}o&&u.push({yAxis:o,coordinates:{x:r[n].xPosition,y:r[n].yPosition},values:{x:r[n].xValue,y:r[n].yValue},symbolname:e})}}let d=n.getAreaPoints();for(let n=0,o=d.length;n<o;n++)if(e>=_&&e<=_+a.getLineWidth()&&i>=l&&i<=l+s&&d[n].xBeginPosition<=e&&e<=d[n].xEndPosition){let e=0;if(null!==this.__lineGraphRawData){let i=this.__lineGraphRawData[t].filter(t=>t.x===d[n].xBeginValue),o=this.__lineGraphRawData[t].indexOf(i[0]);e=this.__lineGraphRawData[t][o+1].error}if(this.__internalLineGraphDescription&&this.__internalLineGraphDescription[t]){let i=this.__internalLineGraphDescription[t],o=null;if(this.__internalYAxis&&i){let id=i.yAxisId;for(let t=0,e=this.__internalYAxis.length;t<e;t++)if(this.__internalYAxis[t].id===id){o=this.__internalYAxis[t];break}}o&&h.push({yAxis:o,xBeginTime:d[n].xBeginValue,xEndTime:d[n].xEndValue,xBegin:d[n].xBeginPosition,xEnd:d[n].xEndPosition,error:e,symbolname:i.symbol})}}}if(0===h.length&&0===u.length)this.__tooltipInformation={show:!1,isActive:!1,time:0,points:[],errors:[]};else{this.__tooltipInformation={show:!0,isActive:n,time:d,points:[],errors:[]};for(let t=0,e=h.length;t<e;t++)this.__tooltipInformation.errors.push({yAxis:h[t].yAxis,beginTime:h[t].xBeginTime,endTime:h[t].xEndTime,errorCode:h[t].error,symbolname:h[t].symbolname});for(let t=0,e=u.length;t<e;t++)this.__tooltipInformation.points.push({yAxis:u[t].yAxis,point:{x:u[t].values.x,y:u[t].values.y},symbolname:u[t].symbolname});let o=this.__executeTooltipFormatFunction(d,this.__tooltipInformation.points.reverse(),this.__tooltipInformation.errors.reverse());if(this.__elementTooltip.css("visibility","visible"),null===o)return void this.__elementTooltip.css("visibility","hidden");this.__elementTooltipText[0].innerHTML=o;let s=null,r=t.Theme.Resources.get(this,"TooltipFontColor");t.isSolidColor(r.value)&&(s=t.StyleProvider.resolveSolidColorAsCssValue(r.value)),t.isSolidColor(this.__tooltipFontColor)&&(s=t.StyleProvider.resolveSolidColorAsCssValue(this.__tooltipFontColor)),null!=s&&this.__elementTooltipText.css("color",s);let m=this.__elementTooltip.width(),c=this.__elementTooltip.height(),p=0;this.__showMenuBar&&"Top"===this.__menuBarPosition&&(p=this.__elementMenuBar.outerHeight()+5),e-m/2>=_&&e+m/2<=_+a.getLineWidth()&&i-c>=l?(this.__elementTooltipArrow[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-top","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-bottom","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-left","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-right","tchmi-trend-line-chart-template-tooltip-arrow-top","tchmi-trend-line-chart-template-tooltip-arrow-bottom","tchmi-trend-line-chart-template-tooltip-arrow-left","tchmi-trend-line-chart-template-tooltip-arrow-right"),this.__elementTooltipArrow[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-bottom","tchmi-trend-line-chart-template-tooltip-arrow-bottom"),this.__elementTooltip.css({top:i-c-4+p+5,left:e+5-m/2})):e-m/2>=_&&e+m/2<=_+a.getLineWidth()?(this.__elementTooltipArrow[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-top","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-bottom","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-left","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-right","tchmi-trend-line-chart-template-tooltip-arrow-top","tchmi-trend-line-chart-template-tooltip-arrow-bottom","tchmi-trend-line-chart-template-tooltip-arrow-left","tchmi-trend-line-chart-template-tooltip-arrow-right"),this.__elementTooltipArrow[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-top","tchmi-trend-line-chart-template-tooltip-arrow-top"),this.__elementTooltip.css({top:i+4+p+5,left:e+5-m/2})):e>=_&&e+m<=_+a.getLineWidth()?(this.__elementTooltipArrow[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-top","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-bottom","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-left","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-right","tchmi-trend-line-chart-template-tooltip-arrow-top","tchmi-trend-line-chart-template-tooltip-arrow-bottom","tchmi-trend-line-chart-template-tooltip-arrow-left","tchmi-trend-line-chart-template-tooltip-arrow-right"),this.__elementTooltipArrow[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-left","tchmi-trend-line-chart-template-tooltip-arrow-left"),this.__elementTooltip.css({top:i-c/2+p+5,left:e+4+5})):(this.__elementTooltipArrow[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-top","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-bottom","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-left","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-right","tchmi-trend-line-chart-template-tooltip-arrow-top","tchmi-trend-line-chart-template-tooltip-arrow-bottom","tchmi-trend-line-chart-template-tooltip-arrow-left","tchmi-trend-line-chart-template-tooltip-arrow-right"),this.__elementTooltipArrow[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-right","tchmi-trend-line-chart-template-tooltip-arrow-right"),this.__elementTooltip.css({top:i-c/2+p+5,left:e-4-m+5}))}}}}}}}}__createTooltipFromTouch(e,i){this.__holdTimer&&(clearTimeout(this.__holdTimer),this.__holdTimer=0),this.__manipulationInfo={isManipulating:!1,start:{x:0,y:0},end:{x:0,y:0},offset:{left:0,top:0},scale:{x:1,y:1},transform:{x:0,y:0},click:!1,mousePosition:{x:0,y:0}};if(this.__elementTooltip.css("visibility","hidden"),this.__tooltipInformation={show:!1,isActive:!1,time:0,points:[],errors:[]},this.__lineChart){let n=this.__lineChart.getYAxisAtPosition(0);if(n){let o=n.getAxisWidth();if(null!==o){let s=this.__lineChart.getDrawingBorder(),r=n.getDiffEndLabelAndLine()+o/2+5+s,l=this.__lineChart.getXAxis(),a=0;if(null!==l){a=l.getXAxisLeftWidth()||0;let n=this.__lineChart.getYAxis();if(null!=n){let o=n[0].getLineHeight(),s=this.__lineChart.getLineGraphs(),_=[],h=[],u=0,d=l.getMainTickStartValue(),m=l.getMainTickEndValue();if(null!==d&&null!==m){u=d+(e-a)*((m-d)/l.getLineWidth());for(let t=0,n=s.length;t<n;t++){let n=s[t],u=n.getPointDotRadius();if(null!==u&&n.getPointDot()){let s=n.getPoints();if(null!=s)for(let n=0,_=s.length;n<_;n++)if(e>=a-10&&e<=a+l.getLineWidth()+10&&i>=r-10&&i<=r+o+10){let o=Math.sqrt(Math.pow(e-s[n].xPosition,2)+Math.pow(i-s[n].yPosition,2));if(o<=10+u){let e="",i=null;this.__internalLineGraphDescription&&this.__internalLineGraphDescription[t]&&(e=this.__internalLineGraphDescription[t].symbol,i=this.__internalLineGraphDescription[t]);let r=null;if(this.__internalYAxis&&i){let id=i.yAxisId;for(let t=0,e=this.__internalYAxis.length;t<e;t++)if(this.__internalYAxis[t].id===id){r=this.__internalYAxis[t];break}}r&&h.push({yAxis:r,coordinates:{x:s[n].xPosition,y:s[n].yPosition},values:{x:s[n].xValue,y:s[n].yValue},symbolname:e,distance:o})}}}let d=n.getAreaPoints();for(let n=0,s=d.length;n<s;n++)if(e>=a-5&&e<=a+l.getLineWidth()+5&&i>=r-5&&i<=r+o+5&&d[n].xBeginPosition-5<=e&&e<=d[n].xEndPosition+5){let e=0;if(null!==this.__lineGraphRawData){let i=this.__lineGraphRawData[t].filter(t=>t.x===d[n].xBeginValue),o=this.__lineGraphRawData[t].indexOf(i[0]);e=this.__lineGraphRawData[t][o+1].error}if(this.__internalLineGraphDescription&&this.__internalLineGraphDescription[t]){let i=this.__internalLineGraphDescription[t],o=null;if(this.__internalYAxis&&i){let id=i.yAxisId;for(let t=0,e=this.__internalYAxis.length;t<e;t++)if(this.__internalYAxis[t].id===id){o=this.__internalYAxis[t];break}}o&&_.push({yAxis:o,xBeginTime:d[n].xBeginValue,xEndTime:d[n].xEndValue,xBegin:d[n].xBeginPosition,xEnd:d[n].xEndPosition,error:e,symbolname:i.symbol})}}}if(0===_.length&&0===h.length)this.__tooltipInformation={show:!1,isActive:!1,time:0,points:[],errors:[]};else{this.__tooltipInformation={show:!0,isActive:!0,time:u,points:[],errors:[]};for(let t=0,e=_.length;t<e;t++)this.__tooltipInformation.errors.push({yAxis:_[t].yAxis,beginTime:_[t].xBeginTime,endTime:_[t].xEndTime,errorCode:_[t].error,symbolname:_[t].symbolname});h.sort((function(t,e){return t.distance-e.distance}));for(let t=0,e=h.length;t<e;t++)this.__tooltipInformation.points.push({yAxis:h[t].yAxis,point:{x:h[t].values.x,y:h[t].values.y},symbolname:h[t].symbolname});let n=this.__executeTooltipFormatFunction(u,this.__tooltipInformation.points,this.__tooltipInformation.errors.reverse());if(this.__elementTooltip.css("visibility","visible"),null===n)return void this.__elementTooltip.css("visibility","hidden");this.__elementTooltipText[0].innerHTML=n;let o=null,s=t.Theme.Resources.get(this,"TooltipFontColor");if(s&&null!==s.value){let e=s.value;t.isSolidColor(e)&&(o=t.StyleProvider.resolveSolidColorAsCssValue(e))}t.isSolidColor(this.__tooltipFontColor)&&(o=t.StyleProvider.resolveSolidColorAsCssValue(this.__tooltipFontColor)),null!=o&&this.__elementTooltipText.css("color",o);let d=this.__elementTooltip.width(),m=this.__elementTooltip.height(),c=0;this.__showMenuBar&&"Top"===this.__menuBarPosition&&(c=this.__elementMenuBar.outerHeight()+5),e-d/2>=a&&e+d/2<=a+l.getLineWidth()&&i-m>=r?(this.__elementTooltipArrow[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-top","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-bottom","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-left","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-right","tchmi-trend-line-chart-template-tooltip-arrow-top","tchmi-trend-line-chart-template-tooltip-arrow-bottom","tchmi-trend-line-chart-template-tooltip-arrow-left","tchmi-trend-line-chart-template-tooltip-arrow-right"),this.__elementTooltipArrow[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-bottom","tchmi-trend-line-chart-template-tooltip-arrow-bottom"),this.__elementTooltip.css({top:i-m-4+c+5,left:e+5-d/2})):e-d/2>=a&&e+d/2<=a+l.getLineWidth()?(this.__elementTooltipArrow[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-top","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-bottom","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-left","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-right","tchmi-trend-line-chart-template-tooltip-arrow-top","tchmi-trend-line-chart-template-tooltip-arrow-bottom","tchmi-trend-line-chart-template-tooltip-arrow-left","tchmi-trend-line-chart-template-tooltip-arrow-right"),this.__elementTooltipArrow[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-top","tchmi-trend-line-chart-template-tooltip-arrow-top"),this.__elementTooltip.css({top:i+4+c+5,left:e+5-d/2})):e>=a&&e+d<=a+l.getLineWidth()?(this.__elementTooltipArrow[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-top","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-bottom","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-left","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-right","tchmi-trend-line-chart-template-tooltip-arrow-top","tchmi-trend-line-chart-template-tooltip-arrow-bottom","tchmi-trend-line-chart-template-tooltip-arrow-left","tchmi-trend-line-chart-template-tooltip-arrow-right"),this.__elementTooltipArrow[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-left","tchmi-trend-line-chart-template-tooltip-arrow-left"),this.__elementTooltip.css({top:i-m/2+c+5,left:e+4+5})):(this.__elementTooltipArrow[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-top","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-bottom","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-left","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-right","tchmi-trend-line-chart-template-tooltip-arrow-top","tchmi-trend-line-chart-template-tooltip-arrow-bottom","tchmi-trend-line-chart-template-tooltip-arrow-left","tchmi-trend-line-chart-template-tooltip-arrow-right"),this.__elementTooltipArrow[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-right","tchmi-trend-line-chart-template-tooltip-arrow-right"),this.__elementTooltip.css({top:i-m/2+c+5,left:e-4-d+5}))}}}}}}}}__onMouseMoveTooltip(){return t=>{if(!this.__tooltipInformation.isActive&&this.__showTooltip&&(!this.__manipulationInfo.isManipulating||!this.getIsEnabled())){let e=this,i=t.offsetX,n=t.offsetY;requestAnimationFrame((function(){null!==e.__internalEnd&&null!==e.__internalStart&&"Latest"!==e.__internalEnd&&"First"!==e.__internalStart&&e.__createTooltip(i,n,!1)}))}}}__onClick(){return t=>{if(this.__manipulationInfo.click&&null!==this.__lineChart){if(this.__manipulationInfo.isManipulating)return;if(!this.getIsEnabled()||0===this.__lineChart.getLineGraphs().length)return;if("Latest"===this.__internalEnd||"First"===this.__internalStart||null===this.__internalEnd||null===this.__internalStart)return;if(null!==t.currentTarget){let i=t.currentTarget;if(i.classList.contains("TcHmi_Controls_Beckhoff_Controls-chart-canvas-drawing")){var e=null;if(null!==i.parentElement&&null!==i.parentElement.parentElement&&null!==i.parentElement.parentElement.parentElement&&(e=i.parentElement.parentElement.parentElement.id),e===this.__id&&(this.__createTooltip(t.offsetX,t.offsetY,!0),this.__tooltipInformation.isActive))return}else this.__elementTooltip.css("visibility","hidden"),this.__tooltipInformation={show:!1,isActive:!1,time:0,points:[],errors:[]}}}this.__manipulationInfo.click=!0}}__onMouseDown(){return t=>{if(this.__manipulationInfo={isManipulating:!1,start:{x:0,y:0},end:{x:0,y:0},offset:{left:0,top:0},scale:{x:1,y:1},transform:{x:0,y:0},click:!0,mousePosition:{x:0,y:0}},null!==this.__lineChart){if(this.__manipulationInfo.isManipulating)return;if(!this.getIsEnabled()||0===this.__lineChart.getLineGraphs().length)return;if("Latest"===this.__internalEnd||"First"===this.__internalStart||null===this.__internalEnd||null===this.__internalStart)return;if(null===t.target)return;let e=this.__transformEventCoords(t.clientX,t.clientY,t.target);this.__manipulationInfo.mousePosition={x:e.x,y:e.y},this.__userInteractionStart(e.x,e.y)}}}__onMouseMove(){return t=>{if(!this.__manipulationInfo.isManipulating||!this.getIsEnabled())return;let e=this.__transformEventCoords(t.clientX,t.clientY);this.__userInteractionMove(e.x,e.y)}}__onMouseUp(){return t=>{this.__manipulationInfo.isManipulating&&this.getIsEnabled()&&this.__userInteractionEnd()}}__onTouchStart(){return t=>{if(this.__manipulationInfo={isManipulating:!1,start:{x:0,y:0},end:{x:0,y:0},offset:{left:0,top:0},scale:{x:1,y:1},transform:{x:0,y:0},click:!0,mousePosition:{x:0,y:0}},null!==this.__lineChart){if(!this.getIsEnabled()||0===this.__lineChart.getLineGraphs().length)return;if("Latest"===this.__internalEnd||"First"===this.__internalStart||null===this.__internalEnd||null===this.__internalStart)return;t.preventDefault();let e=t.touches[0],i=this.__transformEventCoords(e.clientX,e.clientY,t.target);if(this.__holdTimer=setTimeout(()=>this.__createTooltipFromTouch(i.x,i.y),this.__holdTimerDuration),this.__manipulationInfo.mousePosition={x:i.x,y:i.y},t.touches.length>1)return void this.__userMultitouchStart(t);if(this.__manipulationInfo.isManipulating)return;this.__userInteractionStart(i.x,i.y)}}}__onTouchMove(){return t=>{if(this.getIsEnabled()){if(this.__multitouchInfo.multitouchMode)return t.preventDefault(),void this.__userMultitouchMove(t);if(this.__manipulationInfo.isManipulating){let e=t.touches[0],i=this.__transformEventCoords(e.clientX,e.clientY);Math.sqrt(Math.pow(this.__manipulationInfo.mousePosition.x-i.x,2)+Math.pow(this.__manipulationInfo.mousePosition.y-i.y,2))>5&&(this.__holdTimer&&(clearTimeout(this.__holdTimer),this.__holdTimer=0),this.__userInteractionMove(i.x,i.y))}}}}__onTouchEnd(){return t=>{if(this.getIsEnabled()){if(this.__holdTimer&&(clearTimeout(this.__holdTimer),this.__holdTimer=0),this.__multitouchInfo.multitouchMode)return t.preventDefault(),void this.__userMultitouchEnd(t);if(this.__manipulationInfo.isManipulating){let e=t.changedTouches[0],i=this.__transformEventCoords(e.clientX,e.clientY);Math.sqrt(Math.pow(this.__manipulationInfo.mousePosition.x-i.x,2)+Math.pow(this.__manipulationInfo.mousePosition.y-i.y,2))>5?this.__userInteractionEnd():this.__manipulationInfo={isManipulating:!1,start:{x:0,y:0},end:{x:0,y:0},offset:{left:0,top:0},scale:{x:1,y:1},transform:{x:0,y:0},click:!1,mousePosition:{x:0,y:0}}}}}}__transformEventCoords(t,e,i){if(i){let t=this.getRenderedWidth(),e=this.getRenderedHeight();if(null===t||null===e)return{x:0,y:0};let n=this.__element[0].getBoundingClientRect();this.__manipulationInfo.scale.x=t/n.width,this.__manipulationInfo.scale.y=e/n.height;let o=i.getBoundingClientRect();this.__manipulationInfo.offset.left=o.left,this.__manipulationInfo.offset.top=o.top}return{x:(t-this.__manipulationInfo.offset.left)*this.__manipulationInfo.scale.x,y:(e-this.__manipulationInfo.offset.top)*this.__manipulationInfo.scale.y}}__userInteractionStart(t,e){if(null!==this.__lineChart){let n=this.__lineChart.getYAxisAtPosition(0);if(n){let o=n.getAxisWidth();if(null!==o){let s=n.getDiffEndLabelAndLine()+o/2+5+this.__lineChart.getDrawingBorder(),r=this.__lineChart.getXAxis(),l=0;null!==r&&(l=r.getXAxisLeftWidth()||0);let a=0;null!==r&&(a=r.getLineWidth());let _=n.getLineHeight();if(t<l||t>l+a||e<s||e>s+_)return;this.__mouseMode!==i.MouseMode.ZoomX&&this.__mouseMode!==i.MouseMode.ZoomXY||(this.__manipulationInfo.start.x=t,this.__manipulationInfo.start.y=e,this.__manipulationInfo.end.x=t,this.__manipulationInfo.end.y=e,this.__mouseMode===i.MouseMode.ZoomX&&(this.__manipulationInfo.start.y=s,this.__manipulationInfo.end.y=s)),this.__mouseMode!==i.MouseMode.PanX&&this.__mouseMode!==i.MouseMode.PanXY||(this.__manipulationInfo.start.x=t,this.__manipulationInfo.start.y=e,this.__manipulationInfo.end.x=t,this.__manipulationInfo.end.y=e),this.__manipulationInfo.isManipulating=!0,this.__manipulationInfo.transform={x:0,y:0}}}}}__userInteractionMove(t,e){if(this.__tooltipInformation.show&&(this.__elementTooltip.css("visibility","hidden"),this.__tooltipInformation={show:!1,isActive:!1,time:0,points:[],errors:[]}),null!==this.__lineChart){let n=this.__lineChart.getYAxisAtPosition(0);if(n){let o=n.getAxisWidth();if(null!==o){let s=n.getDiffEndLabelAndLine()+o/2+5+this.__lineChart.getDrawingBorder(),r=this.__lineChart.getXAxis(),l=0;if(null!==r){if(l=r.getXAxisLeftWidth()||0,this.__mouseMode===i.MouseMode.ZoomX||this.__mouseMode===i.MouseMode.ZoomXY){if(null===this.__zoomingCanvasContext)return;let o=t-this.__manipulationInfo.start.x,a=0;a=this.__mouseMode===i.MouseMode.ZoomX?n.getLineHeight():e-this.__manipulationInfo.start.y,this.__zoomingCanvasContext.clearRect(0,0,this.__zoomingCanvasContext.canvas.width,this.__zoomingCanvasContext.canvas.height),this.__zoomingCanvasContext.beginPath(),this.__zoomingCanvasContext.rect(this.__manipulationInfo.start.x,this.__manipulationInfo.start.y,o,a),this.__zoomingCanvasContext.fillStyle="rgba(51,153,255,0.3)",this.__zoomingCanvasContext.lineWidth=1,this.__zoomingCanvasContext.strokeStyle="rgba(51,153,255,1)",this.__zoomingCanvasContext.fill(),this.__zoomingCanvasContext.stroke(),this.__zoomingCanvasContext.clearRect(0,0,this.__zoomingCanvasContext.canvas.width,s),this.__zoomingCanvasContext.clearRect(0,0,l,this.__zoomingCanvasContext.canvas.height),this.__zoomingCanvasContext.clearRect(0,this.__zoomingCanvasContext.canvas.height,this.__zoomingCanvasContext.canvas.width,-(this.__zoomingCanvasContext.canvas.height-n.getLineHeight()-s)),this.__zoomingCanvasContext.clearRect(this.__zoomingCanvasContext.canvas.width,0,-(this.__zoomingCanvasContext.canvas.width-l-r.getLineWidth()),this.__zoomingCanvasContext.canvas.height)}if(this.__mouseMode===i.MouseMode.PanX||this.__mouseMode===i.MouseMode.PanXY){let o=t-this.__manipulationInfo.end.x,a=e-this.__manipulationInfo.end.y,_=this.__lineChart.getCanvasDrawing();if(null===_)return;let h=_[0].getContext("2d");if(null===h)return;this.__mouseMode===i.MouseMode.PanXY?(h.translate(o,a),this.__manipulationInfo.transform={x:this.__manipulationInfo.transform.x+o,y:this.__manipulationInfo.transform.y+a}):(a=0,h.translate(o,0),this.__manipulationInfo.transform.x=this.__manipulationInfo.transform.x+o),this.__lineChart.setLineChanged(!0),this.__lineChart.draw(),this.__manipulationInfo.transform.y>=0?this.__manipulationInfo.transform.x>=0?(h.clearRect(-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,h.canvas.width+this.__manipulationInfo.transform.x,s+this.__manipulationInfo.transform.y),h.clearRect(-this.__manipulationInfo.transform.x,h.canvas.height-this.__manipulationInfo.transform.y,h.canvas.width+this.__manipulationInfo.transform.x,-(h.canvas.height-n.getLineHeight()-s)),h.clearRect(-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,l+this.__manipulationInfo.transform.x,h.canvas.height+this.__manipulationInfo.transform.y),h.clearRect(h.canvas.width-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,-(h.canvas.width-l-r.getLineWidth()),h.canvas.height+this.__manipulationInfo.transform.y)):(h.clearRect(-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,h.canvas.width+this.__manipulationInfo.transform.x,s+this.__manipulationInfo.transform.y),h.clearRect(-this.__manipulationInfo.transform.x,h.canvas.height-this.__manipulationInfo.transform.y,h.canvas.width+this.__manipulationInfo.transform.x,-(h.canvas.height-n.getLineHeight()-s)),h.clearRect(-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,l,h.canvas.height+this.__manipulationInfo.transform.y),h.clearRect(h.canvas.width-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,-(h.canvas.width-l-r.getLineWidth()-this.__manipulationInfo.transform.x),h.canvas.height+this.__manipulationInfo.transform.y)):this.__manipulationInfo.transform.x>=0?(h.clearRect(-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,h.canvas.width+this.__manipulationInfo.transform.x,s),h.clearRect(-this.__manipulationInfo.transform.x,h.canvas.height-this.__manipulationInfo.transform.y,h.canvas.width+this.__manipulationInfo.transform.x,-(h.canvas.height-n.getLineHeight()-s-this.__manipulationInfo.transform.y)),h.clearRect(-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,l+this.__manipulationInfo.transform.x,h.canvas.height+this.__manipulationInfo.transform.y),h.clearRect(h.canvas.width-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,-(h.canvas.width-l-r.getLineWidth()),h.canvas.height+this.__manipulationInfo.transform.y)):(h.clearRect(-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,h.canvas.width+this.__manipulationInfo.transform.x,s),h.clearRect(-this.__manipulationInfo.transform.x,h.canvas.height-this.__manipulationInfo.transform.y,h.canvas.width+this.__manipulationInfo.transform.x,-(h.canvas.height-n.getLineHeight()-s-this.__manipulationInfo.transform.y)),h.clearRect(-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,l,h.canvas.height+this.__manipulationInfo.transform.y),h.clearRect(h.canvas.width-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,-(h.canvas.width-l-r.getLineWidth()-this.__manipulationInfo.transform.x),h.canvas.height+this.__manipulationInfo.transform.y))}this.__manipulationInfo.end.x=t,this.__manipulationInfo.end.y=e}}}}}__userInteractionEnd(){if(null===this.__zoomingCanvasContext)return;if("First"===this.__internalStart||null===this.__internalStart)return;if("Latest"===this.__internalEnd||null===this.__internalEnd)return;if(null!==this.__lineChart){let e=this.__lineChart.getYAxisAtPosition(0);if(e){let n=e.getAxisWidth();if(null!==n){let o=e.getDiffEndLabelAndLine()+n/2+5+this.__lineChart.getDrawingBorder(),s=this.__lineChart.getXAxis(),r=0;if(null!==s){let n=s.getMainTickStartValue(),l=s.getMainTickEndValue(),a=0,_="";if(null!==n&&null!==l){a=l-n;let t=new Date(n);_=`${t.getUTCFullYear()}-${("0"+(t.getUTCMonth()+1)).slice(-2)}-${("0"+t.getUTCDate()).slice(-2)}T${("0"+t.getUTCHours()).slice(-2)}:${("0"+t.getUTCMinutes()).slice(-2)}:${("0"+t.getUTCSeconds()).slice(-2)}.${("00"+t.getUTCMilliseconds()).slice(-3)}Z`}r=s.getXAxisLeftWidth()||0;let h=this.__zoomingCanvasContext.canvas.width-r-(this.__zoomingCanvasContext.canvas.width-r-s.getLineWidth()),u=this.__zoomingCanvasContext.canvas.height-o-(this.__zoomingCanvasContext.canvas.height-e.getLineHeight()-o);this.__zoomingCanvasContext.clearRect(0,0,this.__zoomingCanvasContext.canvas.width,this.__zoomingCanvasContext.canvas.height);let d=a;if(this.__mouseMode===i.MouseMode.ZoomX||this.__mouseMode===i.MouseMode.ZoomXY){let e,n,l=r+s.getLineWidth();this.__manipulationInfo.start.x<this.__manipulationInfo.end.x?(e=this.__manipulationInfo.start.x,this.__manipulationInfo.start.x<r&&(e=r),n=this.__manipulationInfo.end.x,this.__manipulationInfo.end.x>l&&(n=l)):(e=this.__manipulationInfo.end.x,this.__manipulationInfo.end.x<r&&(e=r),n=this.__manipulationInfo.start.x,this.__manipulationInfo.start.x>l&&(n=l));let a=(n-e)/h*d;if(!(a>=1||this.__mouseMode===i.MouseMode.ZoomXY)){this.__manipulationInfo={isManipulating:!1,start:{x:0,y:0},end:{x:0,y:0},offset:{left:0,top:0},scale:{x:1,y:1},transform:{x:0,y:0},click:!0,mousePosition:{x:0,y:0}};let t=this.__elementChart[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-canvas-zooming");return void(t.length>0&&t[0].classList.add("tchmi-no-pointer-events"))}if(this.__mouseMode===i.MouseMode.ZoomXY){let n=this.__lineChart.getYAxis();if(null!=n&&n.length>0){let s,l,m=o+n[0].getLineHeight();this.__manipulationInfo.start.y<this.__manipulationInfo.end.y?(l=this.__manipulationInfo.start.y,this.__manipulationInfo.start.y<o&&(l=o),s=this.__manipulationInfo.end.y,this.__manipulationInfo.end.y>m&&(s=m)):(l=this.__manipulationInfo.end.y,this.__manipulationInfo.end.y<o&&(l=o),s=this.__manipulationInfo.start.y,this.__manipulationInfo.start.y>m&&(s=m));for(let t=0,e=n.length;t<e;t++){let e,i,r=n[t].getDecimalPlaces(),a=n[t].getMainTickStartValueOverride(),_=n[t].getMainTickStartValue();if(null!==a)e=a;else{if(null===_)continue;e=_}let h=n[t].getMainTickEndValueOverride(),d=n[t].getMainTickEndValue();if(null!==h)i=h;else{if(null===d)continue;i=d}let m=i-e,c=m*(1-(s-o)/u)+e,p=m*(1-(l-o)/u)+e,C=0;null!==r&&(C=Math.pow(10,r),c=Math.round(c*C)/C,p=Math.round(p*C)/C);let g=(p-c)*C;if(null===r||g<1){for(let t=0,e=n.length;t<e;t++)if(null!==this.__internalYAxis){this.__internalYAxis[t].autoScaling=n[t].getAutoScaling();let e=n[t].getMainTickEndValue();this.__internalYAxis[t].mainTickMaxValue=null===e?void 0:e;let i=n[t].getMainTickStartValue();this.__internalYAxis[t].mainTickMinValue=null===i?void 0:i}this.__manipulationInfo={isManipulating:!1,start:{x:0,y:0},end:{x:0,y:0},offset:{left:0,top:0},scale:{x:1,y:1},transform:{x:0,y:0},click:!0,mousePosition:{x:0,y:0}};let t=this.__elementChart[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-canvas-zooming");return void(t.length>0&&t[0].classList.add("tchmi-no-pointer-events"))}null!==this.__internalYAxis&&(this.__internalYAxis[t].autoScaling=!1,this.__internalYAxis[t].mainTickMaxValue=p,this.__internalYAxis[t].mainTickMinValue=c)}let c=(e-r)/h,p=Math.abs(d*c),date=new Date(_),C=new Date(date.getTime()+p);if(this.__endDatatype===i.Datatype.Datetime){let t=new Date(C.getTime()+a),e=`${t.getUTCFullYear()}-${("0"+(t.getUTCMonth()+1)).slice(-2)}-${("0"+t.getUTCDate()).slice(-2)}T${("0"+t.getUTCHours()).slice(-2)}:${("0"+t.getUTCMinutes()).slice(-2)}:${("0"+t.getUTCSeconds()).slice(-2)}.${("00"+t.getUTCMilliseconds()).slice(-3)}Z`;this.__internalEnd=e}else this.__internalEnd=this.__milliSecToIso(a);if(this.__startDatatype===i.Datatype.Datetime){let t=`${C.getUTCFullYear()}-${("0"+(C.getUTCMonth()+1)).slice(-2)}-${("0"+C.getUTCDate()).slice(-2)}T${("0"+C.getUTCHours()).slice(-2)}:${("0"+C.getUTCMinutes()).slice(-2)}:${("0"+C.getUTCSeconds()).slice(-2)}.${("00"+C.getUTCMilliseconds()).slice(-3)}Z`;this.__internalStart=t}else this.__internalStart=this.__milliSecToIso(a);t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"YAxis"})}}else{let t=(e-r)/h,n=Math.abs(d*t),date=new Date(_),o=new Date(date.getTime()+n);if(this.__endDatatype===i.Datatype.Datetime){let t=new Date(o.getTime()+a),e=`${t.getUTCFullYear()}-${("0"+(t.getUTCMonth()+1)).slice(-2)}-${("0"+t.getUTCDate()).slice(-2)}T${("0"+t.getUTCHours()).slice(-2)}:${("0"+t.getUTCMinutes()).slice(-2)}:${("0"+t.getUTCSeconds()).slice(-2)}.${("00"+t.getUTCMilliseconds()).slice(-3)}Z`;this.__internalEnd=e}else this.__internalEnd=this.__milliSecToIso(a);if(this.__startDatatype===i.Datatype.Datetime){let t=`${o.getUTCFullYear()}-${("0"+(o.getUTCMonth()+1)).slice(-2)}-${("0"+o.getUTCDate()).slice(-2)}T${("0"+o.getUTCHours()).slice(-2)}:${("0"+o.getUTCMinutes()).slice(-2)}:${("0"+o.getUTCSeconds()).slice(-2)}.${("00"+o.getUTCMilliseconds()).slice(-3)}Z`;this.__internalStart=t}else this.__internalStart=this.__milliSecToIso(a)}this.__openWebsocket(),this.__manipulationInfo={isManipulating:!1,start:{x:0,y:0},end:{x:0,y:0},offset:{left:0,top:0},scale:{x:1,y:1},transform:{x:0,y:0},click:!1,mousePosition:{x:0,y:0}}}if(this.__mouseMode===i.MouseMode.PanX||this.__mouseMode===i.MouseMode.PanXY){let e=this.__lineChart.getCanvasDrawing();if(null!==e){let t=e[0].getContext("2d");null!==t&&t.setTransform(1,0,0,1,0,0)}let n=this.__manipulationInfo.transform.x/h;if(0===n&&this.__mouseMode===i.MouseMode.PanX){let t=this.__elementChart[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-canvas-zooming");return t.length>0&&t[0].classList.add("tchmi-no-pointer-events"),void(this.__manipulationInfo={isManipulating:!1,start:{x:0,y:0},end:{x:0,y:0},offset:{left:0,top:0},scale:{x:1,y:1},transform:{x:0,y:0},click:!0,mousePosition:{x:0,y:0}})}{let e=d*n,date=new Date(_);if(this.__startDatatype===i.Datatype.Datetime&&this.__endDatatype===i.Datatype.Datetime){let t=new Date(date.getTime()-e),i=`${t.getUTCFullYear()}-${("0"+(t.getUTCMonth()+1)).slice(-2)}-${("0"+t.getUTCDate()).slice(-2)}T${("0"+t.getUTCHours()).slice(-2)}:${("0"+t.getUTCMinutes()).slice(-2)}:${("0"+t.getUTCSeconds()).slice(-2)}.${("00"+t.getUTCMilliseconds()).slice(-3)}Z`;this.__internalStart=i;let n=new Date(t.getTime()+d),o=`${n.getUTCFullYear()}-${("0"+(n.getUTCMonth()+1)).slice(-2)}-${("0"+n.getUTCDate()).slice(-2)}T${("0"+n.getUTCHours()).slice(-2)}:${("0"+n.getUTCMinutes()).slice(-2)}:${("0"+n.getUTCSeconds()).slice(-2)}.${("00"+n.getUTCMilliseconds()).slice(-3)}Z`;this.__internalEnd=o}else if(this.__endDatatype===i.Datatype.Datetime&&null!==l){let t=new Date(l-e),i=`${t.getUTCFullYear()}-${("0"+(t.getUTCMonth()+1)).slice(-2)}-${("0"+t.getUTCDate()).slice(-2)}T${("0"+t.getUTCHours()).slice(-2)}:${("0"+t.getUTCMinutes()).slice(-2)}:${("0"+t.getUTCSeconds()).slice(-2)}.${("00"+t.getUTCMilliseconds()).slice(-3)}Z`;this.__internalEnd=i}else if(this.__startDatatype===i.Datatype.Datetime){let t=new Date(date.getTime()-e),i=`${t.getUTCFullYear()}-${("0"+(t.getUTCMonth()+1)).slice(-2)}-${("0"+t.getUTCDate()).slice(-2)}T${("0"+t.getUTCHours()).slice(-2)}:${("0"+t.getUTCMinutes()).slice(-2)}:${("0"+t.getUTCSeconds()).slice(-2)}.${("00"+t.getUTCMilliseconds()).slice(-3)}Z`;this.__internalStart=i}if(this.__mouseMode===i.MouseMode.PanXY){let e=this.__lineChart.getYAxis();if(null!=e&&e.length>0){for(let t=0,i=e.length;t<i;t++){let i,n,o=e[t].getMainTickStartValueOverride(),s=e[t].getMainTickStartValue();if(null!==o)i=o;else{if(null===s)continue;i=s}let r=e[t].getMainTickEndValueOverride(),l=e[t].getMainTickEndValue();if(null!==r)n=r;else{if(null===l)continue;n=l}let a=(n-i)*(this.__manipulationInfo.transform.y/u),_=i+a,h=n+a;null!==this.__internalYAxis&&(this.__internalYAxis[t].autoScaling=!1,this.__internalYAxis[t].mainTickMaxValue=h,this.__internalYAxis[t].mainTickMinValue=_)}t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"YAxis"})}}this.__openWebsocket(),this.__manipulationInfo={isManipulating:!1,start:{x:0,y:0},end:{x:0,y:0},offset:{left:0,top:0},scale:{x:1,y:1},transform:{x:0,y:0},click:!1,mousePosition:{x:0,y:0}}}}}}}}this.__lastInteraction=!0;let e=this.__elementChart[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-canvas-zooming");e.length>0&&e[0].classList.remove("tchmi-no-pointer-events")}__userMultitouchStart(t){if(this.__manipulationInfo={isManipulating:!1,start:{x:0,y:0},end:{x:0,y:0},offset:{left:0,top:0},scale:{x:1,y:1},transform:{x:0,y:0},click:!0,mousePosition:{x:0,y:0}},this.__zoomingCanvasContext&&this.__zoomingCanvasContext.clearRect(0,0,this.__zoomingCanvasContext.canvas.width,this.__zoomingCanvasContext.canvas.height),null!==this.__lineChart){let e=this.__lineChart.getYAxisAtPosition(0);if(e){let i=e.getAxisWidth();if(null!==i){let n=e.getDiffEndLabelAndLine()+i/2+5+this.__lineChart.getDrawingBorder(),o=this.__lineChart.getXAxis(),s=0;null!==o&&(s=o.getXAxisLeftWidth()||0);let r=0;null!==o&&(r=o.getLineWidth());let l=e.getLineHeight(),a=this.__transformEventCoords(t.touches[0].clientX,t.touches[0].clientY,t.target),_=this.__transformEventCoords(t.touches[1].clientX,t.touches[1].clientY,t.target);if(a.x<s||a.x>s+r||a.y<n||a.y>n+l)return;if(_.x<s||_.x>s+r||_.y<n||_.y>n+l)return;this.__multitouchInfo.first.identifier=t.touches[0].identifier,this.__multitouchInfo.second.identifier=t.touches[1].identifier,this.__multitouchInfo.multitouchMode=!0;let h=a.x-_.x,u=a.y-_.y;this.__multitouchInfo.distance=Math.sqrt(h*h+u*u)}}}}__userMultitouchMove(t){if(this.__multitouchInfo.multitouchMode){let n=this.__transformEventCoords(t.touches[0].clientX,t.touches[0].clientY),o=this.__transformEventCoords(t.touches[1].clientX,t.touches[1].clientY),s=n.x-o.x,r=n.y-o.y,l=Math.sqrt(s*s+r*r);var e=1-this.__multitouchInfo.distance/l>0?1:-1;let a=0;if(null===this.__multitouchInfo.newTimespan){if(null===this.__lineChart)return;{let t=this.__lineChart.getXAxis();if(null===t)return;{let e=t.getMainTickStartValue(),i=t.getMainTickEndValue();null!==e&&null!==i&&(a=i-e)}}}else a=this.__multitouchInfo.newTimespan;if(a>=1){let t=Math.floor(Math.log(a)/Math.LN10),s=a*((a-e*Math.pow(10,t-1)*1.5)/a);if(s<1&&(s=1),s===a)return;let r={x:0,y:0};if(r.x=Math.round((n.x+o.x)/2),r.y=Math.round((n.y+o.y)/2),null!==this.__lineChart){let t=this.__lineChart.getYAxisAtPosition(0);if(t){let e=t.getAxisWidth();if(null!==e){let n=t.getDiffEndLabelAndLine()+e/2+5+this.__lineChart.getDrawingBorder(),o=this.__lineChart.getXAxis(),l=0;null!==o&&(l=o.getXAxisLeftWidth()||0);let a=0;null!==o&&(a=o.getLineWidth());let _=t.getLineHeight();if(null!==o){let t=o.getMainTickStartValue(),e=o.getMainTickEndValue(),h=0;if(null!==t&&null!==e){h=e-t;let u=s/h;if(t+=(h-s)*((r.x-l)/a),e=t+s,o.setMainTickStartValue(t),o.setMainTickEndValue(e),o.setAutoScaling(!1),this.__lineChart.setHasChanged(!0),this.__lineChart.setLineChanged(!0),this.__mouseMode===i.MouseMode.PanXY||this.__mouseMode===i.MouseMode.ZoomXY){if(this.__lineChart&&this.__internalYAxis){let t=this.__internalYAxis.slice(0,this.__internalYAxis.length),e=this.__lineChart.getYAxis();if(e&&t){for(let i=0,o=e.length;i<o;i++){e[i].getDecimalPlaces();let o,s,l=e[i].getAutoScaling(),a=e[i].getMainTickStartValueOverride(),h=e[i].getMainTickStartValue();if(l&&null!==a)o=a;else{if(null===h)continue;o=h}let d=e[i].getMainTickEndValueOverride(),m=e[i].getMainTickEndValue();if(l&&null!==d)s=d;else{if(null===m)continue;s=m}let c=s-o,p=c*u;s-=(c-p)*((r.y-n)/_),o=s-p,t[i]&&(t[i].autoScaling=!1,t[i].mainTickMaxValue=s,t[i].mainTickMinValue=o),e[i].setAutoScaling(!1),e[i].setMainTickEndValue(s),e[i].setMainTickStartValue(o)}this.__multitouchInfo.newYAxis=t}}}else if(this.__lineChart&&this.__internalYAxis){let t=this.__internalYAxis.slice(0,this.__internalYAxis.length),e=this.__lineChart.getYAxis();if(null!=e&&t){for(let i=0,n=e.length;i<n;i++)if(e[i].getAutoScaling()&&t[i]){let n=e[i].getMainTickStartValueOverride(),o=e[i].getMainTickEndValueOverride();null!==n&&(t[i].mainTickMinValue=n,e[i].setMainTickStartValue(n)),null!==o&&(t[i].mainTickMaxValue=o,e[i].setMainTickEndValue(o)),t[i].autoScaling=!1,e[i].setAutoScaling(!1)}this.__multitouchInfo.newYAxis=t}}this.__lineChart.draw(),this.__multitouchInfo.newStart=t,this.__multitouchInfo.newTimespan=s}}}}}}this.__multitouchInfo.distance=l}}__userMultitouchEnd(t){if(this.__multitouchInfo.multitouchMode)for(let e=0,n=t.changedTouches.length;e<n;e++)if(t.changedTouches[e].identifier===this.__multitouchInfo.first.identifier||t.changedTouches[e].identifier===this.__multitouchInfo.second.identifier){if(null!==this.__multitouchInfo.newStart&&null!==this.__multitouchInfo.newTimespan){let t=new Date(this.__multitouchInfo.newStart);if(this.__endDatatype===i.Datatype.Datetime){let e=new Date(t.getTime()+this.__multitouchInfo.newTimespan),i=`${e.getUTCFullYear()}-${("0"+(e.getUTCMonth()+1)).slice(-2)}-${("0"+e.getUTCDate()).slice(-2)}T${("0"+e.getUTCHours()).slice(-2)}:${("0"+e.getUTCMinutes()).slice(-2)}:${("0"+e.getUTCSeconds()).slice(-2)}.${("00"+e.getUTCMilliseconds()).slice(-3)}Z`;this.__internalEnd=i}else this.__internalEnd=this.__milliSecToIso(this.__multitouchInfo.newTimespan);if(this.__startDatatype===i.Datatype.Datetime){let e=`${t.getUTCFullYear()}-${("0"+(t.getUTCMonth()+1)).slice(-2)}-${("0"+t.getUTCDate()).slice(-2)}T${("0"+t.getUTCHours()).slice(-2)}:${("0"+t.getUTCMinutes()).slice(-2)}:${("0"+t.getUTCSeconds()).slice(-2)}.${("00"+t.getUTCMilliseconds()).slice(-3)}Z`;this.__internalStart=e}else this.__internalStart=this.__milliSecToIso(this.__multitouchInfo.newTimespan);null!==this.__multitouchInfo.newYAxis&&(this.__internalYAxis=this.__multitouchInfo.newYAxis),this.__openWebsocket()}return void(this.__multitouchInfo={multitouchMode:!1,first:{identifier:null},second:{identifier:null},distance:0,newStart:null,newTimespan:null,newYAxis:null})}}__onMouseWheel(){return e=>{if(!this.__manipulationInfo.isManipulating&&this.getIsEnabled()&&"Latest"!==this.__internalEnd&&"First"!==this.__internalStart&&null!==this.__internalEnd&&null!==this.__internalStart&&null!==this.__lineChart){let n=this.__lineChart.getYAxisAtPosition(0);if(n){let o=n.getAxisWidth();if(null!==o){let s=e.target.getBoundingClientRect(),r=e.clientX-s.left,l=e.clientY-s.top,a=n.getDiffEndLabelAndLine()+o/2+5+this.__lineChart.getDrawingBorder(),_=this.__lineChart.getXAxis(),h=0;null!==_&&(h=_.getXAxisLeftWidth()||0);let u=0;null!==_&&(u=_.getLineWidth());let d=n.getLineHeight();if(r<h||r>h+u||l<a||l>a+d)return;this.__wheelInfo.isWheeling=!0,this.__wheelInfo.mousePosition={x:r,y:l};let m=0;if(null===this.__wheelInfo.timespan){if(null===_)return;{let t=_.getMainTickStartValue(),e=_.getMainTickEndValue();null!==t&&null!==e&&(m=e-t)}}else m=this.__wheelInfo.timespan;if(m>1){let t;switch(e.deltaMode){case WheelEvent.DOM_DELTA_PAGE:t=800*-e.deltaY;break;case WheelEvent.DOM_DELTA_LINE:t=40*-e.deltaY;break;case WheelEvent.DOM_DELTA_PIXEL:default:t=-e.deltaY}t=Math.max(-1,Math.min(1,t)),this.__wheelInfo.wheelSteps=this.__wheelInfo.wheelSteps+t;let i=Math.floor(Math.log(m)/Math.LN10),n=m*((m-t*Math.pow(10,i-1)*2)/m);n<1&&(n=1),this.__wheelInfo.timespan=n}if(this.__wheelInfo.timeout)return;let c=this;this.__wheelInfo.timeout=setTimeout((function(){if(null!==c.__wheelInfo.timespan&&null!==_){let e=_.getMainTickStartValue(),n=_.getMainTickEndValue(),o=0;if(null!==e&&null!==n){o=n-e;let s=c.__wheelInfo.timespan/o,r=(c.__wheelInfo.mousePosition.x-h)/u;e+=(o-c.__wheelInfo.timespan)*r;let date=new Date(e);if(c.__endDatatype===i.Datatype.Datetime){let t=new Date(date.getTime()+c.__wheelInfo.timespan),e=`${t.getUTCFullYear()}-${("0"+(t.getUTCMonth()+1)).slice(-2)}-${("0"+t.getUTCDate()).slice(-2)}T${("0"+t.getUTCHours()).slice(-2)}:${("0"+t.getUTCMinutes()).slice(-2)}:${("0"+t.getUTCSeconds()).slice(-2)}.${("00"+t.getUTCMilliseconds()).slice(-3)}Z`;c.__internalEnd=e}else c.__internalEnd=c.__milliSecToIso(c.__wheelInfo.timespan);if(c.__startDatatype===i.Datatype.Datetime){let t=`${date.getUTCFullYear()}-${("0"+(date.getUTCMonth()+1)).slice(-2)}-${("0"+date.getUTCDate()).slice(-2)}T${("0"+date.getUTCHours()).slice(-2)}:${("0"+date.getUTCMinutes()).slice(-2)}:${("0"+date.getUTCSeconds()).slice(-2)}.${("00"+date.getUTCMilliseconds()).slice(-3)}Z`;c.__internalStart=t}else c.__internalStart=c.__milliSecToIso(c.__wheelInfo.timespan);if(c.__mouseMode===i.MouseMode.PanXY||c.__mouseMode===i.MouseMode.ZoomXY){if(c.__lineChart&&c.__internalYAxis){let e=c.__lineChart.getYAxis();if(null!=e){let i=!1;for(let t=0,n=e.length;t<n;t++){e[t].getDecimalPlaces();let n,o,r=e[t].getAutoScaling(),l=e[t].getMainTickStartValueOverride(),_=e[t].getMainTickStartValue();if(r&&null!==l)n=l;else{if(null===_)continue;n=_}let h=e[t].getMainTickEndValueOverride(),u=e[t].getMainTickEndValue();if(r&&null!==h)o=h;else{if(null===u)continue;o=u}let m=o-n,p=m*s;o-=(m-p)*((c.__wheelInfo.mousePosition.y-a)/d),n=o-p,null!==c.__internalYAxis&&(c.__internalYAxis[t].autoScaling=!1,c.__internalYAxis[t].mainTickMaxValue=o,c.__internalYAxis[t].mainTickMinValue=n,i=!0)}i&&t.EventProvider.raise(c.__id+".onPropertyChanged",{propertyName:"YAxis"})}}}else if(c.__lineChart&&c.__internalYAxis){let e=c.__lineChart.getYAxis();if(null!=e){let i=!1;for(let t=0,n=e.length;t<n;t++)if(e[t].getAutoScaling()){let n=e[t].getMainTickStartValueOverride(),o=e[t].getMainTickEndValueOverride();null!==n&&(c.__internalYAxis[t].mainTickMinValue=n),null!==o&&(c.__internalYAxis[t].mainTickMaxValue=o),c.__internalYAxis[t].autoScaling=!1,i=!0}i&&t.EventProvider.raise(c.__id+".onPropertyChanged",{propertyName:"YAxis"})}}c.__openWebsocket()}}c.__wheelInfo.timeout&&(clearTimeout(c.__wheelInfo.timeout),c.__wheelInfo.timeout=0),c.__wheelInfo={isWheeling:!1,wheelSteps:0,mousePosition:{x:0,y:0},timespan:null,timeout:0}}),400)}}}}}setXAxisFormat(valueNew){let e=t.ValueConverter.toObject(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("XAxisFormat"));let i=this.__objectResolvers.get("xAxisFormat");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let n=new t.Symbol.ObjectResolver(e);this.__objectResolvers.set("xAxisFormat",{resolver:n,watchCallback:this.__onResolverForXAxisFormatWatchCallback,watchDestroyer:n.watch(this.__onResolverForXAxisFormatWatchCallback)})}getXAxisFormat(){return this.__xAxisFormat}__processXAxisFormat(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getXAxis();null!=t&&(t.setXAxisCallback(this.__xAxisCallbackFunction()),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}__xAxisCallbackFunction(){let e=this;return function(i){if(void 0!==e.__xAxisFormat&&null!==e.__xAxisFormat&&!1!==e.__xAxisFormat.active){const n=[i];let o=null,s=new t.Function(e.__xAxisFormat);return s.executeEx(n,(function(i){i.error===t.Errors.NONE?o=i.result:TCHMI_CONSOLE_LOG_LEVEL>=1&&t.Log.error("[Source=Control, Module=TcHmi_Controls_Beckhoff_TcHmiTrendLineChart, Id="+e.getId()+"] Execution of function="+e.__xAxisFormat.fn+" failed with error: "+t.Log.buildMessage(i.details))})),s.destroy(),o}if(isNaN(i)||"number"!=typeof i)return i+"";let n=new Date(i);return t.Localization.formatDate(n)}}stop(){if(this.__lineGraphDescriptions&&0!==this.__lineGraphDescriptions.length&&null!==this.__lineGraphData&&void 0!==this.__lineGraphData&&0!==this.__lineGraphData.length){if(null!==this.__lineChart&&("First"===this.__internalStart||"Latest"===this.__internalEnd)){let t=this.__lineChart.getXAxis();if(null!==t){let e=t.getMainTickStartValue(),n=t.getMainTickEndValue();if(null!==e&&null!==n){if("First"===this.__internalStart){let t=new Date(e);this.__internalStart=`${t.getUTCFullYear()}-${("0"+(t.getUTCMonth()+1)).slice(-2)}-${("0"+t.getUTCDate()).slice(-2)}T${("0"+t.getUTCHours()).slice(-2)}:${("0"+t.getUTCMinutes()).slice(-2)}:${("0"+t.getUTCSeconds()).slice(-2)}.${("00"+t.getUTCMilliseconds()).slice(-3)}Z`,this.__startDatatype=i.Datatype.Datetime}if("Latest"===this.__internalEnd){let t=new Date(n);this.__internalEnd=`${t.getUTCFullYear()}-${("0"+(t.getUTCMonth()+1)).slice(-2)}-${("0"+t.getUTCDate()).slice(-2)}T${("0"+t.getUTCHours()).slice(-2)}:${("0"+t.getUTCMinutes()).slice(-2)}:${("0"+t.getUTCSeconds()).slice(-2)}.${("00"+t.getUTCMilliseconds()).slice(-3)}Z`,this.__endDatatype=i.Datatype.Datetime}}}}this.__startEndBeforeZoom={end:this.__internalEnd,start:this.__internalStart},this.__openWebsocket()}}pause(){this.stop()}resetZoom(){if(this.__yAxis){if(this.__yAxis.length>0&&null!==this.__internalYAxis)for(let e=0,i=this.__internalYAxis.length;e<i;e++){let id=this.__internalYAxis[e].id,i=this.__yAxis.filter(t=>t.id===id);if(0===i.length){let i=t.Theme.Resources.get(this,"YAxisGenerated");i&&null!==i.value?(this.__internalYAxis[e].autoScaling=i.value.autoScaling,this.__internalYAxis[e].mainTickMaxValue=i.value.mainTickMaxValue,this.__internalYAxis[e].mainTickMinValue=i.value.mainTickMinValue):this.__internalYAxis[e].autoScaling=!0}else this.__internalYAxis[e].autoScaling=i[0].autoScaling,this.__internalYAxis[e].mainTickMaxValue=i[0].mainTickMaxValue,this.__internalYAxis[e].mainTickMinValue=i[0].mainTickMinValue}else if(null!==this.__internalYAxis)for(let t=0,e=this.__internalYAxis.length;t<e;t++)this.__internalYAxis[t].autoScaling=!0}else if(null!==this.__internalYAxis)for(let t=0,e=this.__internalYAxis.length;t<e;t++)this.__internalYAxis[t].autoScaling=!0;this.__internalEnd!==this.__startEndBeforeZoom.end||this.__internalStart!==this.__startEndBeforeZoom.start?(this.__internalEnd=this.__startEndBeforeZoom.end,this.__internalStart=this.__startEndBeforeZoom.start,null===this.__internalStart?this.__startDatatype=null:this.isDatetime(this.__internalStart)?this.__startDatatype=i.Datatype.Datetime:this.isKeyword(this.__internalStart)?this.__startDatatype=i.Datatype.Keyword:this.__startDatatype=i.Datatype.Timespan,null===this.__internalEnd?this.__endDatatype=null:this.isDatetime(this.__internalEnd)?this.__endDatatype=i.Datatype.Datetime:this.isKeyword(this.__internalEnd)?this.__endDatatype=i.Datatype.Keyword:this.__endDatatype=i.Datatype.Timespan,this.__openWebsocket()):this.__drawLineChart()}reset(){let e=!1;if(this.__internalStart!==this.__start&&this.__start&&(this.__internalStart=this.__start,null===this.__internalStart?this.__startDatatype=null:this.isDatetime(this.__internalStart)?this.__startDatatype=i.Datatype.Datetime:this.isKeyword(this.__internalStart)?this.__startDatatype=i.Datatype.Keyword:this.__startDatatype=i.Datatype.Timespan,e=!0),this.__internalEnd!==this.__end&&this.__end&&(this.__internalEnd=this.__end,null===this.__internalEnd?this.__endDatatype=null:this.isDatetime(this.__internalEnd)?this.__endDatatype=i.Datatype.Datetime:this.isKeyword(this.__internalEnd)?this.__endDatatype=i.Datatype.Keyword:this.__endDatatype=i.Datatype.Timespan,e=!0),this.__lastInteraction=!1,this.__yAxis){if(this.__yAxis.length>0&&null!==this.__internalYAxis)for(let e=0,i=this.__internalYAxis.length;e<i;e++){let id=this.__internalYAxis[e].id,i=this.__yAxis.filter(t=>t.id===id);if(0===i.length){let i=t.Theme.Resources.get(this,"YAxisGenerated");i&&null!==i.value?(this.__internalYAxis[e].autoScaling=i.value.autoScaling,this.__internalYAxis[e].mainTickMaxValue=i.value.mainTickMaxValue,this.__internalYAxis[e].mainTickMinValue=i.value.mainTickMinValue):this.__internalYAxis[e].autoScaling=!0}else this.__internalYAxis[e].autoScaling=i[0].autoScaling,this.__internalYAxis[e].mainTickMaxValue=i[0].mainTickMaxValue,this.__internalYAxis[e].mainTickMinValue=i[0].mainTickMinValue}else if(null!==this.__internalYAxis)for(let t=0,e=this.__internalYAxis.length;t<e;t++)this.__internalYAxis[t].autoScaling=!0}else if(null!==this.__internalYAxis)for(let t=0,e=this.__internalYAxis.length;t<e;t++)this.__internalYAxis[t].autoScaling=!0;e&&this.__openWebsocket()}play(){this.reset()}showOptions(){null===this.__elementMenuBarDropdown[0].parentElement?t.TopMostLayer.add(this,this.__elementMenuBarDropdown,{centerHorizontal:!0,centerVertical:!0}):t.TopMostLayer.remove(this,this.__elementMenuBarDropdown)}__calcMenuButtons(){if(this.__menuBarControls.length>0){this.__elementMenuBarDropdown.children().detach();for(let t=10,e=this.__menuBarControls.length-1;t<e;t++)0===this.__elementMenuBar.find("#"+this.__menuBarControls[t].getId()).length&&this.__elementMenuBar[0].insertBefore(this.__menuBarControls[t].getElement()[0],this.__elementMenuBar.children().last()[0]);let t=this.__elementMenuBar.width(),e=0;for(let t=0,i=11;t<=i;t++)e+=this.__elementMenuBar.children().eq(t).outerWidth(!0);if(e+=this.__elementMenuBar.children().last().width()||0,e>=t){for(let t=0,e=this.__menuBarControls.length;t<e;t++)if(("TcHmi.Controls.Beckhoff.TcHmiButton"===this.__menuBarControls[t].getType()||"TcHmi.Controls.Beckhoff.TcHmiToggleButton"===this.__menuBarControls[t].getType())&&-1===this.__menuBarControls[t].getId().search("options")){let e=this.__menuBarControls[t];-1===e.getId().indexOf("timespan")&&-1===e.getId().indexOf("datetime")&&this.__elementMenuBarDropdown[0].appendChild(e.getElement()[0])}}else for(let i=10,n=this.__menuBarControls.length-1;i<n;i++){if(e+=$(this.__elementMenuBar.children()[i+2]).outerWidth(!0),e>=t)for(let t=i,e=this.__menuBarControls.length-1;t<e;t++){let e=this.__menuBarControls[t];-1===e.getId().indexOf("timespan")&&-1===e.getId().indexOf("datetime")&&this.__elementMenuBarDropdown[0].appendChild(e.getElement()[0])}}this.__elementMenuBarDropdown[0].childElementCount>0?this.__menuBarControls[this.__menuBarControls.length-1].setVisibility("Visible"):this.__menuBarControls[this.__menuBarControls.length-1].setVisibility("Collapsed")}}__setMenuButtonsFromStart(){for(let t=0,e=this.__menuBarControls.length;t<e;t++)this.__menuBarControls[t].getId()===this.__id+"_stopButton"?this.__menuBarControls[t].setIsEnabled(!0):this.__menuBarControls[t].getId()===this.__id+"_panxButton"||this.__menuBarControls[t].getId()===this.__id+"_panxyButton"||this.__menuBarControls[t].getId()===this.__id+"_zoomxButton"||this.__menuBarControls[t].getId()===this.__id+"_zoomxyButton"||this.__menuBarControls[t].getId()===this.__id+"_resetZoomButton"||this.__menuBarControls[t].getId()===this.__id+"_resetButton"?this.__menuBarControls[t].setIsEnabled(!1):(this.__menuBarControls[t].getId()===this.__id+"_startCombobox"||this.__menuBarControls[t].getId()===this.__id+"_endCombobox"||this.__menuBarControls[t].getId()===this.__id+"_timespanButtonStart"||this.__menuBarControls[t].getId()===this.__id+"_timespanButtonEnd"||this.__menuBarControls[t].getId()===this.__id+"_datetimeButtonStart"||this.__menuBarControls[t].getId()===this.__id+"_datetimeButtonEnd")&&this.__menuBarControls[t].setIsEnabled(!0)}__setMenuButtonsFromStop(){let t=!1;for(let e=0,i=this.__menuBarControls.length;e<i;e++)if(this.__menuBarControls[e].getId()===this.__id+"_stopButton")this.__menuBarControls[e].setIsEnabled(!1);else if(this.__menuBarControls[e].getId()===this.__id+"_panxButton"){this.__menuBarControls[e].setIsEnabled(!0),"Active"===this.__menuBarControls[e].getToggleState()&&(t=!0)}else if(this.__menuBarControls[e].getId()===this.__id+"_panxyButton"){this.__menuBarControls[e].setIsEnabled(!0),"Active"===this.__menuBarControls[e].getToggleState()&&(t=!0)}else if(this.__menuBarControls[e].getId()===this.__id+"_zoomxButton"){this.__menuBarControls[e].setIsEnabled(!0),"Active"===this.__menuBarControls[e].getToggleState()&&(t=!0)}else if(this.__menuBarControls[e].getId()===this.__id+"_zoomxyButton"){this.__menuBarControls[e].setIsEnabled(!0),"Active"===this.__menuBarControls[e].getToggleState()&&(t=!0)}else this.__menuBarControls[e].getId()===this.__id+"_resetZoomButton"?this.__menuBarControls[e].setIsEnabled(!0):this.__menuBarControls[e].getId()===this.__id+"_resetButton"?"First"!==this.__start&&"Latest"!==this.__end?this.__menuBarControls[e].setIsEnabled(!1):this.__menuBarControls[e].setIsEnabled(!0):(this.__menuBarControls[e].getId()===this.__id+"_startCombobox"||this.__menuBarControls[e].getId()===this.__id+"_endCombobox"||this.__menuBarControls[e].getId()===this.__id+"_timespanButtonStart"||this.__menuBarControls[e].getId()===this.__id+"_timespanButtonEnd"||this.__menuBarControls[e].getId()===this.__id+"_datetimeButtonStart"||this.__menuBarControls[e].getId()===this.__id+"_datetimeButtonEnd")&&this.__menuBarControls[e].setIsEnabled(!0);if(!t){let t=this.__menuBarControls[12];t.getId()===this.__id+"_panxButton"&&t.setToggleState("Active")}}setSectionsBackgroundColor(valueNew){let e=t.ValueConverter.toObject(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("SectionsBackgroundColor"));let i=this.__objectResolvers.get("sectionsBackgroundColor");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let n=new t.Symbol.ObjectResolver(e);this.__objectResolvers.set("sectionsBackgroundColor",{resolver:n,watchCallback:this.__onResolverForSectionsBackgroundColorWatchCallback,watchDestroyer:n.watch(this.__onResolverForSectionsBackgroundColorWatchCallback)})}getSectionsBackgroundColor(){return this.__sectionsBackgroundColor}__processSectionsBackgroundColor(){t.StyleProvider.processBackgroundColor(this.__elementMenuBar,this.__sectionsBackgroundColor),t.StyleProvider.processBackgroundColor(this.__elementChart,this.__sectionsBackgroundColor)}setYAxisWidth(valueNew){let e=t.ValueConverter.toNumber(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("YAxisWidth")),e!==this.__yAxisWidth&&(this.__yAxisWidth=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"YAxisWidth"}),this.__processYAxisWidth())}getYAxisWidth(){return this.__yAxisWidth}__processYAxisWidth(){null!==this.__lineChart&&void 0!==this.__lineChart&&(this.__lineChart.setYAxisWidth(void 0===this.__yAxisWidth?this.getAttributeDefaultValueInternal("YAxisWidth"):this.__yAxisWidth),this.__lineChart.draw())}setYLabelFontFamily(valueNew){let e=t.ValueConverter.toFontFamily(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("YLabelFontFamily")),e!==this.__yLabelFontFamily&&(this.__yLabelFontFamily=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"YLabelFontFamily"}),this.__processYLabelFontFamily())}getYLabelFontFamily(){return this.__yLabelFontFamily}__processYLabelFontFamily(){null!==this.__lineChart&&void 0!==this.__lineChart&&(this.__lineChart.setYLabelFontFamily(this.__yLabelFontFamily),this.__lineChart.draw())}setYLabelFontSize(valueNew){let e=t.ValueConverter.toNumber(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("YLabelFontSize")),e!==this.__yLabelFontSize&&(this.__yLabelFontSize=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"YLabelFontSize"}),this.__processYLabelFontSize())}getYLabelFontSize(){return this.__yLabelFontSize}__processYLabelFontSize(){null!==this.__lineChart&&void 0!==this.__lineChart&&(this.__lineChart.setYLabelFontSize(void 0===this.__yLabelFontSize?this.getAttributeDefaultValueInternal("YLabelFontSize"):this.__yLabelFontSize),this.__lineChart.draw())}setYLabelFontSizeUnit(valueNew){let e=t.ValueConverter.toFontSizeUnit(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("YLabelFontSizeUnit")),e!==this.__yLabelFontSizeUnit&&(this.__yLabelFontSizeUnit=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"YLabelFontSizeUnit"}),this.__processYLabelFontSizeUnit())}getYLabelFontSizeUnit(){return this.__yLabelFontSizeUnit}__processYLabelFontSizeUnit(){null!==this.__lineChart&&void 0!==this.__lineChart&&(this.__lineChart.setYLabelFontSizeUnit(void 0===this.__yLabelFontSizeUnit?this.getAttributeDefaultValueInternal("YLabelFontSizeUnit"):this.__yLabelFontSizeUnit),this.__lineChart.draw())}setYLabelFontWeight(valueNew){let e=t.ValueConverter.toFontWeight(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("YLabelFontWeight")),e!==this.__yLabelFontWeight&&(this.__yLabelFontWeight=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"YLabelFontWeight"}),this.__processYLabelFontWeight())}getYLabelFontWeight(){return this.__yLabelFontWeight}__processYLabelFontWeight(){null!==this.__lineChart&&void 0!==this.__lineChart&&(this.__lineChart.setYLabelFontWeight(void 0===this.__yLabelFontWeight?this.getAttributeDefaultValueInternal("YLabelFontWeight"):this.__yLabelFontWeight),this.__lineChart.draw())}setYMainTickSteps(valueNew){let e=t.ValueConverter.toNumber(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("YMainTickSteps")),e!==this.__yMainTickSteps&&(this.__yMainTickSteps=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"YMainTickSteps"}),this.__processYMainTickSteps())}getYMainTickSteps(){return this.__yMainTickSteps}__processYMainTickSteps(){null!==this.__lineChart&&void 0!==this.__lineChart&&(this.__lineChart.setYMainTickSteps(void 0===this.__yMainTickSteps?this.getAttributeDefaultValueInternal("YMainTickSteps"):this.__yMainTickSteps),this.__lineChart.draw())}setShowYSubTicks(valueNew){let e=t.ValueConverter.toBoolean(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("ShowYSubTicks")),e!==this.__showYSubTicks&&(this.__showYSubTicks=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowYSubTicks"}),this.__processShowYSubTicks())}getShowYSubTicks(){return this.__showYSubTicks}__processShowYSubTicks(){null!==this.__lineChart&&void 0!==this.__lineChart&&(this.__lineChart.setShowYSubTicks(void 0===this.__showYSubTicks?this.getAttributeDefaultValueInternal("ShowYSubTicks"):this.__showYSubTicks),this.__lineChart.draw())}setYSubTickSteps(valueNew){let e=t.ValueConverter.toNumber(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("YSubTickSteps")),e!==this.__ySubTickSteps&&(this.__ySubTickSteps=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"YSubTickSteps"}),this.__processYSubTickSteps())}getYSubTickSteps(){return this.__ySubTickSteps}__processYSubTickSteps(){null!==this.__lineChart&&void 0!==this.__lineChart&&(this.__lineChart.setYSubTickSteps(void 0===this.__ySubTickSteps?this.getAttributeDefaultValueInternal("YSubTickSteps"):this.__ySubTickSteps),this.__lineChart.draw())}setShowXAxis(valueNew){let e=t.ValueConverter.toBoolean(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("ShowXAxis")),e!==this.__showXAxis&&(this.__showXAxis=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowXAxis"}),this.__processShowXAxis())}getShowXAxis(){return this.__showXAxis}__processShowXAxis(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getXAxis();null!=t&&(t.setShowAxis(void 0===this.__showXAxis?this.getAttributeDefaultValueInternal("ShowXAxis"):this.__showXAxis),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXShowLabels(valueNew){let e=t.ValueConverter.toBoolean(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("XShowLabels")),e!==this.__xShowLabels&&(this.__xShowLabels=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XShowLabels"}),this.__processXShowLabels())}getXShowLabels(){return this.__xShowLabels}__processXShowLabels(){if(!TCHMI_DESIGNER&&null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getXAxis();null!=t&&(t.setShowLabels(void 0===this.__xShowLabels?this.getAttributeDefaultValueInternal("XShowLabels"):this.__xShowLabels),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXMainTickSteps(valueNew){let e=t.ValueConverter.toNumber(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("XMainTickSteps")),e!==this.__xMainTickSteps&&(this.__xMainTickSteps=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XMainTickSteps"}),this.__processXMainTickSteps())}getXMainTickSteps(){return this.__xMainTickSteps}__processXMainTickSteps(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getXAxis();null!=t&&(t.setMainTickSteps(void 0===this.__xMainTickSteps?this.getAttributeDefaultValueInternal("XMainTickSteps"):this.__xMainTickSteps),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setShowXSubTicks(valueNew){let e=t.ValueConverter.toBoolean(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("ShowXSubTicks")),e!==this.__showXSubTicks&&(this.__showXSubTicks=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowXSubTicks"}),this.__processShowXSubTicks())}getShowXSubTicks(){return this.__showXSubTicks}__processShowXSubTicks(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getXAxis();null!=t&&(t.setShowSubTicks(void 0===this.__showXSubTicks?this.getAttributeDefaultValueInternal("ShowXSubTicks"):this.__showXSubTicks),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXSubTickSteps(valueNew){let e=t.ValueConverter.toNumber(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("XSubTickSteps")),e!==this.__xSubTickSteps&&(this.__xSubTickSteps=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XSubTickSteps"}),this.__processXSubTickSteps())}getXSubTickSteps(){return this.__xSubTickSteps}__processXSubTickSteps(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getXAxis();null!=t&&(t.setSubTickSteps(void 0===this.__xSubTickSteps?this.getAttributeDefaultValueInternal("XSubTickSteps"):this.__xSubTickSteps),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXLabelFontFamily(valueNew){let e=t.ValueConverter.toFontFamily(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("XLabelFontFamily")),e!==this.__xLabelFontFamily&&(this.__xLabelFontFamily=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XLabelFontFamily"}),this.__processXLabelFontFamily())}getXLabelFontFamily(){return this.__xLabelFontFamily}__processXLabelFontFamily(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getXAxis();null!=t&&(t.setLabelFontFamily(this.__xLabelFontFamily),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXLabelFontSize(valueNew){let e=t.ValueConverter.toNumber(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("XLabelFontSize")),e!==this.__xLabelFontSize&&(this.__xLabelFontSize=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XLabelFontSize"}),this.__processXLabelFontSize())}getXLabelFontSize(){return this.__xLabelFontSize}__processXLabelFontSize(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getXAxis();null!=t&&(t.setLabelFontSize(void 0===this.__xLabelFontSize?this.getAttributeDefaultValueInternal("XLabelFontSize"):this.__xLabelFontSize),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXLabelFontSizeUnit(valueNew){let e=t.ValueConverter.toFontSizeUnit(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("XLabelFontSizeUnit")),e!==this.__xLabelFontSizeUnit&&(this.__xLabelFontSizeUnit=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XLabelFontSizeUnit"}),this.__processXLabelFontSizeUnit())}getXLabelFontSizeUnit(){return this.__xLabelFontSizeUnit}__processXLabelFontSizeUnit(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getXAxis();null!=t&&(t.setLabelFontSizeUnit(void 0===this.__xLabelFontSizeUnit?this.getAttributeDefaultValueInternal("XLabelFontSizeUnit"):this.__xLabelFontSizeUnit),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXLabelFontWeight(valueNew){let e=t.ValueConverter.toFontWeight(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("XLabelFontWeight")),e!==this.__xLabelFontWeight&&(this.__xLabelFontWeight=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XLabelFontWeight"}),this.__processXLabelFontWeight())}getXLabelFontWeight(){return this.__xLabelFontWeight}__processXLabelFontWeight(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getXAxis();null!=t&&(t.setLabelFontWeight(void 0===this.__xLabelFontWeight?this.getAttributeDefaultValueInternal("XLabelFontWeight"):this.__xLabelFontWeight),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXLabelFontColor(valueNew){let e=t.ValueConverter.toObject(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("XLabelFontColor"));let i=this.__objectResolvers.get("xLabelFontColor");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let n=new t.Symbol.ObjectResolver(e);this.__objectResolvers.set("xLabelFontColor",{resolver:n,watchCallback:this.__onResolverForXLabelFontColorWatchCallback,watchDestroyer:n.watch(this.__onResolverForXLabelFontColorWatchCallback)})}getXLabelFontColor(){return this.__xLabelFontColor}__processXLabelFontColor(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let e=this.__lineChart.getXAxis();null!=e&&(t.isSolidColor(this.__xLabelFontColor)?e.setLabelFontColor(t.StyleProvider.resolveSolidColorAsCssValue(this.__xLabelFontColor)):e.setLabelFontColor(null),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXAxisWidth(valueNew){let e=t.ValueConverter.toNumber(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("XAxisWidth")),e!==this.__xAxisWidth&&(this.__xAxisWidth=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XAxisWidth"}),this.__processXAxisWidth())}getXAxisWidth(){return this.__xAxisWidth}__processXAxisWidth(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getXAxis();null!=t&&(t.setAxisWidth(void 0===this.__xAxisWidth?this.getAttributeDefaultValueInternal("XAxisWidth"):this.__xAxisWidth),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXAxisColor(valueNew){let e=t.ValueConverter.toObject(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("XAxisColor"));let i=this.__objectResolvers.get("xAxisColor");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let n=new t.Symbol.ObjectResolver(e);this.__objectResolvers.set("xAxisColor",{resolver:n,watchCallback:this.__onResolverForXAxisColorWatchCallback,watchDestroyer:n.watch(this.__onResolverForXAxisColorWatchCallback)})}getXAxisColor(){return this.__xAxisColor}__processXAxisColor(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let e=this.__lineChart.getXAxis();null!=e&&(t.isSolidColor(this.__xAxisColor)?e.setAxisColor(t.StyleProvider.resolveSolidColorAsCssValue(this.__xAxisColor)):e.setAxisColor(null),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setShowXAxisName(valueNew){let e=t.ValueConverter.toBoolean(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("ShowXAxisName")),e!==this.__showXAxisName&&(this.__showXAxisName=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowXAxisName"}),this.__processShowXAxisName())}getShowXAxisName(){return this.__showXAxisName}__processShowXAxisName(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getXAxis();null!=t&&(t.setShowAxisName(void 0===this.__showXAxisName?this.getAttributeDefaultValueInternal("ShowXAxisName"):this.__showXAxisName),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXAxisName(valueNew){let e=t.ValueConverter.toString(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("XAxisName")),e!==this.__xAxisName&&(this.__xAxisName=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XAxisName"}),this.__processXAxisName())}getXAxisName(){return this.__xAxisName}__processXAxisName(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getXAxis();null!=t&&(t.setAxisName(void 0===this.__xAxisName?this.getAttributeDefaultValueInternal("XAxisName"):this.__xAxisName),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXAxisNameFontFamily(valueNew){let e=t.ValueConverter.toFontFamily(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("XAxisNameFontFamily")),e!==this.__xAxisNameFontFamily&&(this.__xAxisNameFontFamily=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XAxisNameFontFamily"}),this.__processXAxisNameFontFamily())}getXAxisNameFontFamily(){return this.__xAxisNameFontFamily}__processXAxisNameFontFamily(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getXAxis();null!=t&&(t.setAxisNameFontFamily(this.__xAxisNameFontFamily),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXAxisNameFontSize(valueNew){let e=t.ValueConverter.toNumber(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("XAxisNameFontSize")),e!==this.__xAxisNameFontSize&&(this.__xAxisNameFontSize=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XAxisNameFontSize"}),this.__processXAxisNameFontSize())}getXAxisNameFontSize(){return this.__xAxisNameFontSize}__processXAxisNameFontSize(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getXAxis();null!=t&&(t.setAxisNameFontSize(void 0===this.__xAxisNameFontSize?this.getAttributeDefaultValueInternal("XAxisNameFontSize"):this.__xAxisNameFontSize),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXAxisNameFontSizeUnit(valueNew){let e=t.ValueConverter.toFontSizeUnit(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("XAxisNameFontSizeUnit")),e!==this.__xAxisNameFontSizeUnit&&(this.__xAxisNameFontSizeUnit=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XAxisNameFontSizeUnit"}),this.__processXAxisNameFontSizeUnit())}getXAxisNameFontSizeUnit(){return this.__xAxisNameFontSizeUnit}__processXAxisNameFontSizeUnit(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getXAxis();null!=t&&(t.setAxisNameFontSizeUnit(void 0===this.__xAxisNameFontSizeUnit?this.getAttributeDefaultValueInternal("XAxisNameFontSizeUnit"):this.__xAxisNameFontSizeUnit),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXAxisNameFontWeight(valueNew){let e=t.ValueConverter.toFontWeight(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("XAxisNameFontWeight")),e!==this.__xAxisNameFontWeight&&(this.__xAxisNameFontWeight=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XAxisNameFontWeight"}),this.__processXAxisNameFontWeight())}getXAxisNameFontWeight(){return this.__xAxisNameFontWeight}__processXAxisNameFontWeight(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getXAxis();null!=t&&(t.setAxisNameFontWeight(void 0===this.__xAxisNameFontWeight?this.getAttributeDefaultValueInternal("XAxisNameFontWeight"):this.__xAxisNameFontWeight),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXAxisNameFontColor(valueNew){let e=t.ValueConverter.toObject(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("XAxisNameFontColor"));let i=this.__objectResolvers.get("xAxisNameFontColor");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let n=new t.Symbol.ObjectResolver(e);this.__objectResolvers.set("xAxisNameFontColor",{resolver:n,watchCallback:this.__onResolverForXAxisNameFontColorWatchCallback,watchDestroyer:n.watch(this.__onResolverForXAxisNameFontColorWatchCallback)})}getXAxisNameFontColor(){return this.__xAxisNameFontColor}__processXAxisNameFontColor(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let e=this.__lineChart.getXAxis();null!=e&&(t.isSolidColor(this.__xAxisNameFontColor)?e.setAxisNameFontColor(t.StyleProvider.resolveSolidColorAsCssValue(this.__xAxisNameFontColor)):e.setAxisNameFontColor(null),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setYAxis(valueNew){let e=t.ValueConverter.toObject(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("YAxis"));let i=this.__objectResolvers.get("yAxis");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let n=new t.Symbol.ObjectResolver(e);this.__objectResolvers.set("yAxis",{resolver:n,watchCallback:this.__onResolverForYAxisWatchCallback,watchDestroyer:n.watch(this.__onResolverForYAxisWatchCallback)})}getYAxis(){return this.__yAxis}__processYAxis(){if(this.__internalYAxis=[],void 0!==this.__yAxis&&(this.__internalYAxis=JSON.parse(JSON.stringify(this.__yAxis)),null===this.__internalYAxis&&(this.__internalYAxis=[])),this.__internalLineGraphDescription=[],void 0!==this.__lineGraphDescriptions&&(this.__internalLineGraphDescription=JSON.parse(JSON.stringify(this.__lineGraphDescriptions)),null===this.__internalLineGraphDescription&&(this.__internalLineGraphDescription=[])),this.__lineGraphDescriptions)for(var e=0,n=this.__lineGraphDescriptions.length;e<n;e++)if(void 0===this.__lineGraphDescriptions[e].yAxisId){let id=-1,n=!1;do{id++,n=this.__internalYAxis.filter((function(t){return t.id===id})).length>0}while(n&&id<=1e3);if(!n){let n=t.Theme.Resources.get(this,"YAxisGenerated");n&&null!==n.value?(n.value.id=id,n.value.axisName=this.__lineGraphDescriptions[e].symbol,this.__internalYAxis.push(n.value)):this.__internalYAxis.push({id:id,position:i.AxisPosition.Left,labelFontColor:{color:"#4794da"},showLabels:!0,axisColor:{color:"#4794da"},showAxisName:!0,axisName:this.__lineGraphDescriptions[e].symbol,axisNameFontFamily:null,axisNameFontSize:15,axisNameFontSizeUnit:"px",axisNameFontWeight:"Bold",axisNameFontColor:{color:"#4794da"},decimalPlaces:2,autoScaling:!0}),this.__internalLineGraphDescription[e].yAxisId=id}}this.__isAttached&&null!==this.__lineChart&&void 0!==this.__lineChart&&(this.__drawLineChart(),this.__lineGraphDescriptions&&0!==this.__lineGraphDescriptions.length&&!TCHMI_DESIGNER&&this.__openWebsocket())}setLineGraphDescriptions(valueNew){let e=t.ValueConverter.toObject(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("LineGraphDescription"));let i=this.__objectResolvers.get("lineGraphDescriptions");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let n=new t.Symbol.ObjectResolver(e);this.__objectResolvers.set("lineGraphDescriptions",{resolver:n,watchCallback:this.__onResolverForLineGraphDescriptionsWatchCallback,watchDestroyer:n.watch(this.__onResolverForLineGraphDescriptionsWatchCallback)})}getLineGraphDescriptions(){return this.__lineGraphDescriptions}__processLineGraphDescriptions(){if(this.__internalYAxis=[],void 0!==this.__yAxis&&(this.__internalYAxis=JSON.parse(JSON.stringify(this.__yAxis)),null===this.__internalYAxis&&(this.__internalYAxis=[])),this.__internalLineGraphDescription=[],void 0!==this.__lineGraphDescriptions&&(this.__internalLineGraphDescription=JSON.parse(JSON.stringify(this.__lineGraphDescriptions)),null===this.__internalLineGraphDescription&&(this.__internalLineGraphDescription=[])),this.__lineGraphDescriptions)for(var e=0,n=this.__lineGraphDescriptions.length;e<n;e++)if(void 0===this.__lineGraphDescriptions[e].yAxisId||null===this.__lineGraphDescriptions[e].yAxisId){let id=-1,n=!1;do{id++,n=this.__internalYAxis.filter((function(t){return t.id===id})).length>0}while(n&&id<=1e3);if(!n){let n=t.Theme.Resources.get(this,"YAxisGenerated");n&&null!==n.value?(n.value.id=id,n.value.axisName=this.__lineGraphDescriptions[e].symbol,this.__internalYAxis.push(n.value)):this.__internalYAxis.push({id:id,position:i.AxisPosition.Left,labelFontColor:{color:"#4794da"},showLabels:!0,axisColor:{color:"#4794da"},showAxisName:!0,axisName:this.__lineGraphDescriptions[e].symbol,axisNameFontFamily:null,axisNameFontSize:15,axisNameFontSizeUnit:"px",axisNameFontWeight:"Bold",axisNameFontColor:{color:"#4794da"},decimalPlaces:2,autoScaling:!0}),this.__internalLineGraphDescription[e].yAxisId=id}}this.__isAttached&&null!==this.__lineChart&&void 0!==this.__lineChart&&this.__lineGraphDescriptions&&0!==this.__lineGraphDescriptions.length&&!TCHMI_DESIGNER?this.__openWebsocket():(null!==this.__subscriptionId&&(t.Server.unsubscribe(this.__subscriptionId,null),this.__subscriptionId=null),this.__reset(),this.__drawLineChart())}setShowGrid(valueNew){let e=t.ValueConverter.toBoolean(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("ShowGrid")),e!==this.__showGrid&&(this.__showGrid=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowGrid"}),this.__processShowGrid())}getShowGrid(){return this.__showGrid}__processShowGrid(){if(null!==this.__lineChart&&void 0!==this.__lineChart){if(this.__showGrid){let e=this.__lineChart.getGrid();null==e&&(this.__lineChart.addGrid(),e=this.__lineChart.getGrid(),null!==e&&(t.isSolidColor(this.__gridBackgroundColor)?e.setBackgroundColor(t.StyleProvider.resolveSolidColorAsCssValue(this.__gridBackgroundColor)):e.setBackgroundColor(null),t.isSolidColor(this.__gridLineColor)?e.setLineColor(t.StyleProvider.resolveSolidColorAsCssValue(this.__gridLineColor)):e.setLineColor(null),e.setLineWidth(void 0===this.__gridLineWidth?this.getAttributeDefaultValueInternal("GridLineWidth"):this.__gridLineWidth),e.setLineStyle(void 0===this.__gridLineStyle?this.getAttributeDefaultValueInternal("GridLineStyle"):this.__gridLineStyle),e.setShowHorizontalLines(void 0===this.__gridShowHorizontalLines?this.getAttributeDefaultValueInternal("GridShowHorizontalLines"):this.__gridShowHorizontalLines),e.setShowVerticalLines(void 0===this.__gridShowVerticalLines?this.getAttributeDefaultValueInternal("GridShowVerticalLines"):this.__gridShowVerticalLines)))}else this.__lineChart.deleteGrid();this.__lineChart.setHasChanged(!0),this.__lineChart.draw()}}setGridBackgroundColor(valueNew){let e=t.ValueConverter.toObject(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("GridBackgroundColor"));let i=this.__objectResolvers.get("gridBackgroundColor");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let n=new t.Symbol.ObjectResolver(e);this.__objectResolvers.set("gridBackgroundColor",{resolver:n,watchCallback:this.__onResolverForGridBackgroundColorWatchCallback,watchDestroyer:n.watch(this.__onResolverForGridBackgroundColorWatchCallback)})}getGridBackgroundColor(){return this.__gridBackgroundColor}__processGridBackgroundColor(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let e=this.__lineChart.getGrid();null!=e&&(t.isSolidColor(this.__gridBackgroundColor)?e.setBackgroundColor(t.StyleProvider.resolveSolidColorAsCssValue(this.__gridBackgroundColor)):e.setBackgroundColor(null),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setGridShowHorizontalLines(valueNew){let e=t.ValueConverter.toBoolean(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("GridShowHorizontalLines")),e!==this.__gridShowHorizontalLines&&(this.__gridShowHorizontalLines=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"GridShowHorizontalLines"}),this.__processGridShowHorizontalLines())}getGridShowHorizontalLines(){return this.__gridShowHorizontalLines}__processGridShowHorizontalLines(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getGrid();null!=t&&(t.setShowHorizontalLines(void 0===this.__gridShowHorizontalLines?this.getAttributeDefaultValueInternal("GridShowHorizontalLines"):this.__gridShowHorizontalLines),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setGridShowVerticalLines(valueNew){let e=t.ValueConverter.toBoolean(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("GridShowVerticalLines")),e!==this.__gridShowVerticalLines&&(this.__gridShowVerticalLines=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"GridShowVerticalLines"}),this.__processGridShowVerticalLines())}getGridShowVerticalLines(){return this.__gridShowVerticalLines}__processGridShowVerticalLines(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getGrid();null!=t&&(t.setShowVerticalLines(void 0===this.__gridShowVerticalLines?this.getAttributeDefaultValueInternal("GridShowVerticalLines"):this.__gridShowVerticalLines),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setGridLineWidth(valueNew){let e=t.ValueConverter.toNumber(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("GridLineWidth")),e!==this.__gridLineWidth&&(this.__gridLineWidth=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"GridLineWidth"}),this.__processGridLineWidth())}getGridLineWidth(){return this.__gridLineWidth}__processGridLineWidth(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getGrid();null!=t&&(t.setLineWidth(void 0===this.__gridLineWidth?this.getAttributeDefaultValueInternal("GridLineWidth"):this.__gridLineWidth),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setGridLineStyle(valueNew){let e=t.ValueConverter.toString(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("GridLineStyle")),e!==this.__gridLineStyle&&(this.__gridLineStyle=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"GridLineStyle"}),this.__processGridLineStyle())}getGridLineStyle(){return this.__gridLineStyle}__processGridLineStyle(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getGrid();null!=t&&(t.setLineStyle(void 0===this.__gridLineStyle?this.getAttributeDefaultValueInternal("GridLineStyle"):this.__gridLineStyle),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setGridLineColor(valueNew){let e=t.ValueConverter.toObject(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("GridLineColor"));let i=this.__objectResolvers.get("gridLineColor");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let n=new t.Symbol.ObjectResolver(e);this.__objectResolvers.set("gridLineColor",{resolver:n,watchCallback:this.__onResolverForGridLineColorWatchCallback,watchDestroyer:n.watch(this.__onResolverForGridLineColorWatchCallback)})}getGridLineColor(){return this.__gridLineColor}__processGridLineColor(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let e=this.__lineChart.getGrid();null!=e&&(t.isSolidColor(this.__gridLineColor)?e.setLineColor(t.StyleProvider.resolveSolidColorAsCssValue(this.__gridLineColor)):e.setLineColor(null),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setSubgridShowHorizontalLines(valueNew){let e=t.ValueConverter.toBoolean(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("SubgridShowHorizontalLines")),e!==this.__subgridShowHorizontalLines&&(this.__subgridShowHorizontalLines=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"SubgridShowHorizontalLines"}),this.__processSubgridShowHorizontalLines())}getSubgridShowHorizontalLines(){return this.__subgridShowHorizontalLines}__processSubgridShowHorizontalLines(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getSubgrid();null!=t&&(t.setShowHorizontalLines(void 0===this.__subgridShowHorizontalLines?this.getAttributeDefaultValueInternal("SubgridShowHorizontalLines"):this.__subgridShowHorizontalLines),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setSubgridShowVerticalLines(valueNew){let e=t.ValueConverter.toBoolean(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("SubgridShowVerticalLines")),e!==this.__subgridShowVerticalLines&&(this.__subgridShowVerticalLines=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"SubgridShowVerticalLines"}),this.__processSubgridShowVerticalLines())}getSubgridShowVerticalLines(){return this.__subgridShowVerticalLines}__processSubgridShowVerticalLines(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getSubgrid();null!=t&&(t.setShowVerticalLines(void 0===this.__subgridShowVerticalLines?this.getAttributeDefaultValueInternal("SubgridShowVerticalLines"):this.__subgridShowVerticalLines),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setSubgridLineWidth(valueNew){let e=t.ValueConverter.toNumber(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("SubgridLineWidth")),e!==this.__subgridLineWidth&&(this.__subgridLineWidth=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"SubgridLineWidth"}),this.__processSubgridLineWidth())}getSubgridLineWidth(){return this.__subgridLineWidth}__processSubgridLineWidth(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getSubgrid();null!=t&&(t.setLineWidth(void 0===this.__subgridLineWidth?this.getAttributeDefaultValueInternal("SubgridLineWidth"):this.__subgridLineWidth),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setSubgridLineStyle(valueNew){let e=t.ValueConverter.toString(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("SubgridLineStyle")),e!==this.__subgridLineStyle&&(this.__subgridLineStyle=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"SubgridLineStyle"}),this.__processSubgridLineStyle())}getSubgridLineStyle(){return this.__subgridLineStyle}__processSubgridLineStyle(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let t=this.__lineChart.getSubgrid();null!=t&&(t.setLineStyle(void 0===this.__subgridLineStyle?this.getAttributeDefaultValueInternal("SubgridLineStyle"):this.__subgridLineStyle),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setSubgridLineColor(valueNew){let e=t.ValueConverter.toObject(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("SubgridLineColor"));let i=this.__objectResolvers.get("subgridLineColor");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let n=new t.Symbol.ObjectResolver(e);this.__objectResolvers.set("subgridLineColor",{resolver:n,watchCallback:this.__onResolverForSubgridLineColorWatchCallback,watchDestroyer:n.watch(this.__onResolverForSubgridLineColorWatchCallback)})}getSubgridLineColor(){return this.__subgridLineColor}__processSubgridLineColor(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let e=this.__lineChart.getSubgrid();null!=e&&(t.isSolidColor(this.__subgridLineColor)?e.setLineColor(t.StyleProvider.resolveSolidColorAsCssValue(this.__subgridLineColor)):e.setLineColor(null),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setShowMenuBar(valueNew){let e=t.ValueConverter.toBoolean(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("ShowMenuBar")),e!==this.__showMenuBar&&(this.__showMenuBar=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowMenuBar"}),this.__processShowMenuBar())}getShowMenuBar(){return this.__showMenuBar}__processShowMenuBar(){if(this.__isAttached){if(0===this.__menuBarControls.length&&this.__showMenuBar&&(this.__addMenuBarControls(),this.__calcMenuButtons()),this.__showMenuBar&&void 0!==this.__menuBarPosition){t.StyleProvider.setSimpleElementStyle(this.__elementMenuBar,"display","flex");let e=this.__elementMenuBar.outerHeight(!0);i.MenuBarPosition[this.__menuBarPosition]===i.MenuBarPosition.Top?this.__elementChart.css({height:`calc(100% - ${e}px - 10px)`,top:e+"px"}):i.MenuBarPosition[this.__menuBarPosition]===i.MenuBarPosition.Bottom&&this.__elementChart.css({height:`calc(100% - ${e}px - 10px)`,top:"0px"})}else this.__elementMenuBar.css("display","none"),this.__elementChart.css({height:"calc(100% - 10px)",top:"0px"});this.__drawLineChart()}}setMenuBarPosition(valueNew){let e=t.ValueConverter.toString(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("MenuBarPosition")),tchmi_equal(e,this.__menuBarPosition)||(this.__menuBarPosition=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"MenuBarPosition"}),this.__processMenuBarPosition())}getMenuBarPosition(){return this.__menuBarPosition}__processMenuBarPosition(){if(this.__isAttached&&this.__menuBarPosition){if(this.__showMenuBar&&void 0!==this.__menuBarPosition){let t=this.__elementMenuBar.outerHeight(!0);i.MenuBarPosition[this.__menuBarPosition]===i.MenuBarPosition.Top&&this.__elementChart.css({height:`calc(100% - ${t}px - 10px)`,top:t+"px"}),i.MenuBarPosition[this.__menuBarPosition]===i.MenuBarPosition.Bottom&&this.__elementChart.css({height:`calc(100% - ${t}px - 10px)`,top:"0px"})}else this.__elementChart.css({height:"calc(100% - 10px)",top:"0px"});i.MenuBarPosition.Bottom===i.MenuBarPosition[this.__menuBarPosition]?(this.__elementMenuBar[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-menu-bar-bottom","tchmi-trend-line-chart-template-menu-bar-bottom"),this.__elementMenuBar[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-menu-bar-top","tchmi-trend-line-chart-template-menu-bar-top"),this.__elementMenuBar.css({"margin-bottom":"5px","margin-top":"0px"})):(this.__elementMenuBar[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-menu-bar-top","tchmi-trend-line-chart-template-menu-bar-top"),this.__elementMenuBar[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-menu-bar-bottom","tchmi-trend-line-chart-template-menu-bar-bottom"),this.__elementMenuBar.css({"margin-bottom":"0px","margin-top":"5px"}))}}setMenuBarLabelFontSize(valueNew){let e=t.ValueConverter.toNumber(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("MenuBarLabelFontSize")),e!==this.__menuBarLabelFontSize&&(this.__menuBarLabelFontSize=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"MenuBarLabelFontSize"}),this.__processMenuBarLabelFontSize())}getMenuBarLabelFontSize(){return this.__menuBarLabelFontSize}__processMenuBarLabelFontSize(e=!0){t.StyleProvider.processFontSize(this.__elementMenuBar[0].getElementsByTagName("label"),this.__menuBarLabelFontSize,this.__menuBarLabelFontSizeUnit),this.__isAttached&&e&&this.__calcMenuButtons()}setMenuBarLabelFontSizeUnit(valueNew){let e=t.ValueConverter.toFontSizeUnit(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("MenuBarLabelFontSizeUnit")),e!==this.__menuBarLabelFontSizeUnit&&(this.__menuBarLabelFontSizeUnit=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"MenuBarLabelFontSizeUnit"}),this.__processMenuBarLabelFontSizeUnit())}getMenuBarLabelFontSizeUnit(){return this.__menuBarLabelFontSizeUnit}__processMenuBarLabelFontSizeUnit(e=!0){t.StyleProvider.processFontSize(this.__elementMenuBar[0].getElementsByTagName("label"),this.__menuBarLabelFontSize,this.__menuBarLabelFontSizeUnit),this.__isAttached&&e&&this.__calcMenuButtons()}setMenuBarLabelFontFamily(valueNew){let e=t.ValueConverter.toFontFamily(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("MenuBarLabelFontFamily")),e!==this.__menuBarLabelFontFamily&&(this.__menuBarLabelFontFamily=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"MenuBarLabelFontFamily"}),this.__processMenuBarLabelFontFamily())}getMenuBarLabelFontFamily(){return this.__menuBarLabelFontFamily}__processMenuBarLabelFontFamily(e=!0){t.StyleProvider.processFontFamily(this.__elementMenuBar[0].getElementsByTagName("label"),void 0===this.__menuBarLabelFontFamily?this.getAttributeDefaultValueInternal("MenuBarLabelFontFamily"):this.__menuBarLabelFontFamily),this.__isAttached&&e&&this.__calcMenuButtons()}setMenuBarLabelFontStyle(valueNew){let e=t.ValueConverter.toFontStyle(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("MenuBarLabelFontStyle")),e!==this.__menuBarLabelFontStyle&&(this.__menuBarLabelFontStyle=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"MenuBarLabelFontStyle"}),this.__processMenuBarLabelFontStyle())}getMenuBarLabelFontStyle(){return this.__menuBarLabelFontStyle}__processMenuBarLabelFontStyle(e=!0){t.StyleProvider.processFontStyle(this.__elementMenuBar[0].getElementsByTagName("label"),void 0===this.__menuBarLabelFontStyle?this.getAttributeDefaultValueInternal("MenuBarLabelFontStyle"):this.__menuBarLabelFontStyle),this.__isAttached&&e&&this.__calcMenuButtons()}setMenuBarLabelFontWeight(valueNew){let e=t.ValueConverter.toFontWeight(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("MenuBarLabelFontWeight")),e!==this.__menuBarLabelFontWeight&&(this.__menuBarLabelFontWeight=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"MenuBarLabelFontWeight"}),this.__processMenuBarLabelFontWeight())}getMenuBarLabelFontWeight(){return this.__menuBarLabelFontWeight}__processMenuBarLabelFontWeight(e=!0){t.StyleProvider.processFontWeight(this.__elementMenuBar[0].getElementsByTagName("label"),void 0===this.__menuBarLabelFontWeight?this.getAttributeDefaultValueInternal("MenuBarLabelFontWeight"):this.__menuBarLabelFontWeight),this.__isAttached&&e&&this.__calcMenuButtons()}setMenuBarLabelFontColor(valueNew){let e=t.ValueConverter.toObject(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("MenuBarLabelFontColor"));let i=this.__objectResolvers.get("menuBarLabelFontColor");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let n=new t.Symbol.ObjectResolver(e);this.__objectResolvers.set("menuBarLabelFontColor",{resolver:n,watchCallback:this.__onResolverForMenuBarLabelFontColorWatchCallback,watchDestroyer:n.watch(this.__onResolverForMenuBarLabelFontColorWatchCallback)})}getMenuBarLabelFontColor(){return this.__menuBarLabelFontColor}__processMenuBarLabelFontColor(e=!0){t.StyleProvider.processTextColor(this.__elementMenuBar[0].getElementsByTagName("label"),void 0===this.__menuBarLabelFontColor?this.getAttributeDefaultValueInternal("MenuBarLabelFontColor"):this.__menuBarLabelFontColor),this.__isAttached&&e&&this.__calcMenuButtons()}setShowTooltip(valueNew){let e=t.ValueConverter.toBoolean(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("ShowTooltip")),e!==this.__showTooltip&&(this.__showTooltip=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowTooltip"}),this.__processShowTooltip())}getShowTooltip(){return this.__showTooltip}__processShowTooltip(){}setTooltipFormat(valueNew){let e=t.ValueConverter.toObject(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("TooltipFormat"));let i=this.__objectResolvers.get("tooltipFormat");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let n=new t.Symbol.ObjectResolver(e);this.__objectResolvers.set("tooltipFormat",{resolver:n,watchCallback:this.__onResolverForTooltipFormatWatchCallback,watchDestroyer:n.watch(this.__onResolverForTooltipFormatWatchCallback)})}getTooltipFormat(){return this.__tooltipFormat}__processTooltipFormat(){if(this.__tooltipInformation.show){let t=this.__executeTooltipFormatFunction(this.__tooltipInformation.time,this.__tooltipInformation.points,this.__tooltipInformation.errors);null!==t?this.__elementTooltipText[0].innerHTML=t:this.__elementTooltip.css("visibility","hidden")}}__executeTooltipFormatFunction(e,i,n){let o=this;if(void 0!==this.__tooltipFormat&&null!==this.__tooltipFormat&&!1!==this.__tooltipFormat.active){const s=[e,i,n];let r=null,l=new t.Function(this.__tooltipFormat);return l.executeEx(s,(function(e){e.error===t.Errors.NONE?r=e.result:TCHMI_CONSOLE_LOG_LEVEL>=1&&t.Log.error("[Source=Control, Module=TcHmi_Controls_Beckhoff_TcHmiTrendLineChart, Id="+o.getId()+"] Execution of function="+o.__tooltipFormat.fn+" failed with error: "+t.Log.buildMessage(e.details))})),l.destroy(),r}let s=document.createElement("table");s.setAttribute("class","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-info-table"),s.setAttribute("border","1");let r=s.createTHead(),l=s.createTBody();if(i.length>0){let e=document.createElement("table");e.setAttribute("class","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-time-table"),e.setAttribute("border","1");let n=new Date(i[0].point.x),o=t.Localization.formatDate(n),a=e.insertRow();a.insertCell().textContent="Capture time",a.insertCell().textContent=o;let _=r.insertRow();_.appendChild(document.createElement("th")).textContent="Symbol",_.appendChild(document.createElement("th")).textContent="Value";let h=l.insertRow();return h.insertCell().appendChild(document.createTextNode(i[0].symbolname)),h.insertCell().appendChild(document.createTextNode(i[0].point.y.toString())),e.outerHTML+s.outerHTML}if(n.length>0){let i=document.createElement("table");i.setAttribute("class","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-time-table"),i.setAttribute("border","1");let o=new Date(e),a=t.Localization.formatDate(o),_=i.insertRow();_.insertCell().textContent="Time",_.insertCell().textContent=a,r.insertRow().appendChild(document.createElement("th")).textContent="Symbol(s) in error";for(let t=0,e=n.length;t<e;t++){l.insertRow().insertCell().appendChild(document.createTextNode(n[t].symbolname))}return i.outerHTML+s.outerHTML}return""}setTooltipFontFamily(valueNew){let e=t.ValueConverter.toFontFamily(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("TooltipFontFamily")),e!==this.__tooltipFontFamily&&(this.__tooltipFontFamily=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TooltipFontFamily"}),this.__processTooltipFontFamily())}getTooltipFontFamily(){return this.__tooltipFontFamily}__processTooltipFontFamily(){t.StyleProvider.setSimpleElementStyle(this.__elementTooltip,{"font-family":this.__tooltipFontFamily})}setTooltipFontSize(valueNew){let e=t.ValueConverter.toNumber(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("TooltipFontSize")),e!==this.__tooltipFontSize&&(this.__tooltipFontSize=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TooltipFontSize"}),this.__processTooltipFontSize())}getTooltipFontSize(){return this.__tooltipFontSize}__processTooltipFontSize(){this.__tooltipFontSize&&this.__tooltipFontSizeUnit&&t.StyleProvider.setSimpleElementStyle(this.__elementTooltip,{"font-size":this.__tooltipFontSize+this.__tooltipFontSizeUnit})}setTooltipFontSizeUnit(valueNew){let e=t.ValueConverter.toFontSizeUnit(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("TooltipFontSizeUnit")),e!==this.__tooltipFontSizeUnit&&(this.__tooltipFontSizeUnit=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TooltipFontSizeUnit"}),this.__processTooltipFontSizeUnit())}getTooltipFontSizeUnit(){return this.__tooltipFontSizeUnit}__processTooltipFontSizeUnit(){return this.__processTooltipFontSize()}setTooltipFontWeight(valueNew){let e=t.ValueConverter.toFontWeight(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("TooltipFontWeight")),e!==this.__tooltipFontWeight&&(this.__tooltipFontWeight=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TooltipFontWeight"}),this.__processTooltipFontWeight())}getTooltipFontWeight(){return this.__tooltipFontWeight}__processTooltipFontWeight(){t.StyleProvider.setSimpleElementStyle(this.__elementTooltip,{"font-weight":this.__tooltipFontWeight})}setTooltipFontColor(valueNew){let e=t.ValueConverter.toObject(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("TooltipFontColor"));let i=this.__objectResolvers.get("tooltipFontColor");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let n=new t.Symbol.ObjectResolver(e);this.__objectResolvers.set("tooltipFontColor",{resolver:n,watchCallback:this.__onResolverForTooltipFontColorWatchCallback,watchDestroyer:n.watch(this.__onResolverForTooltipFontColorWatchCallback)})}getTooltipFontColor(){return this.__tooltipFontColor}__processTooltipFontColor(){let e=null,i=t.Theme.Resources.get(this,"TooltipFontColor");if(i&&null!==i.value){let n=i.value;t.isSolidColor(n)&&(e=t.StyleProvider.resolveSolidColorAsCssValue(n))}t.isSolidColor(this.__tooltipFontColor)&&(e=t.StyleProvider.resolveSolidColorAsCssValue(this.__tooltipFontColor)),null!=e&&this.__elementTooltipText.css("color",e)}setTooltipBackgroundColor(valueNew){let e=t.ValueConverter.toObject(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("TooltipBackgroundColor"));let i=this.__objectResolvers.get("tooltipBackgroundColor");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let n=new t.Symbol.ObjectResolver(e);this.__objectResolvers.set("tooltipBackgroundColor",{resolver:n,watchCallback:this.__onResolverForTooltipBackgroundColorWatchCallback,watchDestroyer:n.watch(this.__onResolverForTooltipBackgroundColorWatchCallback)})}getTooltipBackgroundColor(){return this.__tooltipBackgroundColor}__processTooltipBackgroundColor(){t.StyleProvider.processBackgroundColor(this.__elementTooltipText,this.__tooltipBackgroundColor),t.StyleProvider.processBackgroundColor(this.__elementTooltipArrow,this.__tooltipBackgroundColor)}setInterval(valueNew){let e=t.ValueConverter.toNumber(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("Interval")),e!==this.__interval&&(this.__interval=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Interval"}),this.__processInterval())}getInterval(){return this.__interval}__processInterval(){this.__isAttached&&this.__lineGraphDescriptions&&this.__lineGraphDescriptions.length>0&&null!==this.__subscriptionId?this.__openWebsocket():null!==this.__subscriptionId&&(t.Server.unsubscribe(this.__subscriptionId,null),this.__subscriptionId=null)}setStart(valueNew){let e=t.ValueConverter.toString(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("Start")),null!==e&&(e="first"===e.toLowerCase()?"First":e.toUpperCase()),e!==this.__start&&(this.__start=e,null===this.__start?this.__startDatatype=null:this.isDatetime(this.__start)?this.__startDatatype=i.Datatype.Datetime:this.isKeyword(this.__start)?this.__startDatatype=i.Datatype.Keyword:this.__startDatatype=i.Datatype.Timespan,this.__start!==this.__internalStart&&(this.__internalStart=this.__start,"First"===this.__internalStart&&this.__internalEnd!==this.__end&&void 0!==this.__end&&(this.__internalEnd=this.__end)),t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Start"}),this.__processStart())}getStart(){return this.__start}getActualStartTime(){return this.__actualStartTime?new Date(this.__actualStartTime).toISOString():null}__processStart(){if(null!==this.__menuBarControls[0]&&void 0!==this.__menuBarControls[0]&&this.__start)if(this.isDatetime(this.__start)){let t=this.__moveUtcToTimeZone(this.__start);this.__menuBarControls[0].setText(t)}else this.__menuBarControls[0].setText(this.__start);if(this.__start&&this.__end&&"Latest"!==this.__end&&"First"!==this.__start&&(this.__startEndBeforeZoom={end:this.__end,start:this.__start}),this.__isAttached&&this.__start){let t=this.__nowIsValueChanged;if(this.__nowIsValueChanged=!0,this.__startDatatype===i.Datatype.Datetime)this.__menuBarControls[1]&&this.__menuBarControls[3]&&(this.__menuBarControls[1].setValue(null),this.__menuBarControls[3].setValue(this.__start));else if(this.__startDatatype===i.Datatype.Timespan)this.__menuBarControls[1]&&this.__menuBarControls[3]&&(this.__menuBarControls[1].setValue(this.__start),this.__menuBarControls[3].setValue(null));else if(this.__menuBarControls[1]&&this.__menuBarControls[3]&&this.__menuBarControls[0]){this.__menuBarControls[1].setValue(null),this.__menuBarControls[3].setValue(null);let t=this.__menuBarControls[0];t.setText(null),t.setSelectedIndex(0)}if(this.__nowIsValueChanged=t,this.__lineGraphDescriptions&&this.__lineGraphDescriptions.length>0)return void this.__openWebsocket()}null!==this.__subscriptionId&&(t.Server.unsubscribe(this.__subscriptionId,null),this.__subscriptionId=null)}setEnd(valueNew){let e=t.ValueConverter.toString(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("End")),null!==e&&(e="latest"===e.toLowerCase()?"Latest":e.toUpperCase()),e!==this.__end&&(this.__end=e,null===this.__end?this.__endDatatype=null:this.isDatetime(this.__end)?this.__endDatatype=i.Datatype.Datetime:this.isKeyword(this.__end)?this.__endDatatype=i.Datatype.Keyword:this.__endDatatype=i.Datatype.Timespan,this.__end!==this.__internalEnd&&(this.__internalEnd=this.__end,"Latest"===this.__internalEnd&&this.__internalStart!==this.__start&&void 0!==this.__start&&(this.__internalStart=this.__start)),t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"End"}),this.__processEnd())}getEnd(){return this.__end}getActualEndTime(){return this.__actualEndTime?new Date(this.__actualEndTime).toISOString():null}__moveUtcToTimeZone(e){const i=t.Localization.parseDate(new Date(e)),n=Date.UTC(i.year,i.month-1,i.day,i.hour,i.minute,i.second,i.millisecond),date=new Date(e);return this.__utcOffset=date.valueOf()-n,i.year+"-"+("0"+i.month).slice(-2)+"-"+("0"+i.day).slice(-2)+"T"+("0"+i.hour).slice(-2)+":"+("0"+i.minute).slice(-2)+":"+("0"+i.second).slice(-2)+"."+("00"+i.millisecond).slice(-3)}__moveTimeZoneToUtc(e){const i=e.split("T");if(2!==i.length)return null;const n=i[0].split("-");if(3!==n.length)return null;const o={};if(o.year=t.Localization.parseInt(n[0]),isNaN(o.year))return null;if(o.month=t.Localization.parseInt(n[1]),isNaN(o.month))return null;if(o.day=t.Localization.parseInt(n[2]),isNaN(o.day))return null;const s=i[1].split(":");if(2===s.length)s[2]="0.0";else if(3!==s.length)return null;if(o.hour=t.Localization.parseInt(s[0]),isNaN(o.hour))return null;if(o.minute=t.Localization.parseInt(s[1]),isNaN(o.minute))return null;const r=s[2].split(".");if(1===r.length)r[1]="0";else if(2!==r.length)return null;if(o.second=t.Localization.parseInt(r[0]),isNaN(o.second))return null;if(o.millisecond=t.Localization.parseInt(r[1]),isNaN(o.millisecond))return null;const l=Date.UTC(o.year,o.month-1,o.day,o.hour,o.minute,o.second,o.millisecond);return new Date(l+this.__utcOffset).toISOString()}__processEnd(){if(null!==this.__menuBarControls[5]&&void 0!==this.__menuBarControls[5]&&this.__end)if(this.isDatetime(this.__end)){let t=this.__moveUtcToTimeZone(this.__end);this.__menuBarControls[5].setText(t)}else this.__menuBarControls[5].setText(this.__end);if(this.__start&&this.__end&&"Latest"!==this.__end&&"First"!==this.__start&&(this.__startEndBeforeZoom={end:this.__end,start:this.__start}),this.__isAttached&&this.__end){let t=this.__nowIsValueChanged;if(this.__nowIsValueChanged=!0,this.__endDatatype===i.Datatype.Datetime)this.__menuBarControls[6]&&this.__menuBarControls[8]&&(this.__menuBarControls[6].setValue(null),this.__menuBarControls[8].setValue(this.__end));else if(this.__endDatatype===i.Datatype.Timespan)this.__menuBarControls[6]&&this.__menuBarControls[8]&&(this.__menuBarControls[6].setValue(this.__end),this.__menuBarControls[8].setValue(null));else if(this.__menuBarControls[6]&&this.__menuBarControls[8]&&this.__menuBarControls[5]){this.__menuBarControls[6].setValue(null),this.__menuBarControls[8].setValue(null);let t=this.__menuBarControls[5];t.setText(null),t.setSelectedIndex(0)}if(this.__nowIsValueChanged=t,this.__lineGraphDescriptions&&this.__lineGraphDescriptions.length>0)return void this.__openWebsocket()}null!==this.__subscriptionId&&(t.Server.unsubscribe(this.__subscriptionId,null),this.__subscriptionId=null)}setMouseMode(valueNew){let e=t.ValueConverter.toEnum(valueNew,i.MouseMode);null===e&&(e=this.getAttributeDefaultValueInternal("MouseMode")),tchmi_equal(e,this.__mouseMode)||(this.__mouseMode=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"MouseMode"}),this.__processMouseMode())}getMouseMode(){return this.__mouseMode}__processMouseMode(){let t=this.__id+"_panxButton";this.__mouseMode===i.MouseMode.PanXY?t=this.__id+"_panxyButton":this.__mouseMode===i.MouseMode.ZoomX?t=this.__id+"_zoomxButton":this.__mouseMode===i.MouseMode.ZoomXY&&(t=this.__id+"_zoomxyButton");for(let e=0,i=this.__menuBarControls.length;e<i;e++)if(this.__menuBarControls[e].getId()===t){this.__menuBarControls[e].setToggleState("Active")}}setServerDomain(valueNew){let e=t.ValueConverter.toString(valueNew);null===e&&(e=this.getAttributeDefaultValueInternal("ServerDomain")),tchmi_equal(e,this.__serverDomain)||(this.__serverDomain=e,t.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ServerDomain"}),this.__processServerDomain())}getServerDomain(){return this.__serverDomain}__processServerDomain(){this.__getData()}__processIsEnabled(){super.__processIsEnabled(),this.getIsEnabled()||t.TopMostLayer.remove(this,this.__elementMenuBarDropdown)}}e.TcHmiTrendLineChart=i,function(t){let e,i,n,o,s;!function(t){t[t.ZoomX=0]="ZoomX",t[t.ZoomXY=1]="ZoomXY",t[t.PanX=2]="PanX",t[t.PanXY=3]="PanXY"}(e=t.MouseMode||(t.MouseMode={})),function(t){t[t.Bottom=0]="Bottom",t[t.Top=1]="Top"}(i=t.MenuBarPosition||(t.MenuBarPosition={})),function(t){t[t.Datetime=0]="Datetime",t[t.Timespan=1]="Timespan",t[t.Keyword=2]="Keyword"}(n=t.Datatype||(t.Datatype={})),function(t){t[t.Left=0]="Left",t[t.Right=1]="Right"}(o=t.AxisPosition||(t.AxisPosition={})),function(t){t[t.Dotted=0]="Dotted",t[t.Dashed=1]="Dashed",t[t.Solid=2]="Solid"}(s=t.LineStyle||(t.LineStyle={}))}(i=e.TcHmiTrendLineChart||(e.TcHmiTrendLineChart={}))}(i=e.Beckhoff||(e.Beckhoff={})),e.registerEx("TcHmiTrendLineChart","TcHmi.Controls.Beckhoff",t.Controls.Beckhoff.TcHmiTrendLineChart)}(e=t.Controls||(t.Controls={}))}(TcHmi||(TcHmi={}));