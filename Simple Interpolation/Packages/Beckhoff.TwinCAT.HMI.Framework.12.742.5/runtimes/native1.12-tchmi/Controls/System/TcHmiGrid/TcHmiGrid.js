var TcHmi;!function(e){let t;!function(t){let i;!function(t){class i extends e.Controls.System.TcHmiContainerControl{constructor(element,t,i){super(element,t,i),this.__cacheWidthPerColumn=null,this.__cacheHeightPerRow=null,this.__cacheCellHeightPerRow=null,this.__onControlGridRowIndexChangedDestroyEvent=null,this.__onControlGridColumnIndexChangedDestroyEvent=null,this.__onControlsMovedDestroyEvent=null,this.__onControlsResizedDestroyEvent=null,this.__onControlPositionParameterChangedDestroyEvent=null,this.__onControlSizeParameterChangedDestroyEvent=null,this.__controlStretchedWidth=!1,this.__controlStretchedHeight=!1,this.__onGridRowOrColumnIndexChanged=(e,t)=>{if(t.getParent()!==this)return;const i=t.getGridRowIndex(),n=t.getGridColumnIndex();if(void 0===i||void 0===n)return;let o=-1,r=-1;const l=t.getElement()[0].parentElement;if(l&&l.parentElement&&l.parentElement.parentElement){let e=l.parentElement.parentElement.getAttribute("data-tchmi-row-index");e&&(o=parseInt(e,10)),e=l.parentElement.getAttribute("data-tchmi-column-index"),e&&(r=parseInt(e,10))}i===o&&n===r||(this.__correctGridPosition(t),this.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]=!0,this.__requestAsyncWork())},this.__onControlGeometryChanged=(e,t)=>{let i="System.onControlPositionParameterChanged"===e.name||"System.onControlsMoved"===e.name,n=!1;if(!this.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]||!this.__asyncWorkData["System.TcHmiGrid.triggerRecheckHeight"])for(let e=0;e<t.length;e++){let o=t[e];if(o.getParent()===this){if(this.__cacheWidthPerColumn=null,this.__cacheHeightPerRow=null,this.__cacheCellHeightPerRow=null,n=!0,this.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]=!0,this.__asyncWorkData["System.TcHmiGrid.triggerRecheckHeight"])break}else if(!1===i&&o===this&&(n=!0,this.__asyncWorkData["System.TcHmiGrid.triggerRecheckHeight"]=!0,this.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]))break}n&&this.__requestAsyncWork()},this.__onResolverForRowOptionsWatchCallback=data=>{!1===this.__isAttached&&this.__suspendObjectResolver("rowOptions"),data.error===e.Errors.NONE?tchmi_equal(data.value,this.__rowOptions)||(this.__rowOptions=data.value,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"RowOptions"}),this.__recalculateRowCount(),this.__recalculateColumnCount(),this.__processCellOptions(),this.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]=!0,this.__requestAsyncWork()):TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.System.TcHmiGrid, Id="+this.getId()+", Attribute=RowOptions] Resolving symbols from object failed with error: "+e.Log.buildMessage(data.details))},this.__onResolverForColumnOptionsWatchCallback=data=>{!1===this.__isAttached&&this.__suspendObjectResolver("columnOptions"),data.error===e.Errors.NONE?tchmi_equal(data.value,this.__columnOptions)||(this.__columnOptions=data.value,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ColumnOptions"}),this.__recalculateColumnCount(),this.__processCellOptions(),this.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]=!0,this.__requestAsyncWork()):TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.System.TcHmiGrid, Id="+this.getId()+", Attribute=ColumnOptions] Resolving symbols from object failed with error: "+e.Log.buildMessage(data.details))},this.__onResolverForCellOptionsWatchCallback=data=>{!1===this.__isAttached&&this.__suspendObjectResolver("cellOptions"),data.error===e.Errors.NONE?tchmi_equal(data.value,this.__cellOptions)||(this.__cellOptions=data.value,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"CellOptions"}),this.__processCellOptions(),this.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]=!0,this.__requestAsyncWork()):TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.System.TcHmiGrid, Id="+this.getId()+", Attribute=CellOptions] Resolving symbols from object failed with error: "+e.Log.buildMessage(data.details))},this.__onControlGridRowIndexChangedDestroyEvent=e.EventProvider.register("System.onControlGridRowIndexChanged",this.__onGridRowOrColumnIndexChanged),this.__onControlGridColumnIndexChangedDestroyEvent=e.EventProvider.register("System.onControlGridColumnIndexChanged",this.__onGridRowOrColumnIndexChanged),this.__onControlPositionParameterChangedDestroyEvent=e.EventProvider.register("System.onControlPositionParameterChanged",this.__onControlGeometryChanged),this.__onControlSizeParameterChangedDestroyEvent=e.EventProvider.register("System.onControlSizeParameterChanged",this.__onControlGeometryChanged),this.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]=!1,this.__asyncWorkData["System.TcHmiGrid.triggerRecheckHeight"]=!1,this.__asyncWorkData["System.TcHmiGrid.triggerProcessHeight"]=!1,this.__asyncWorkData["System.TcHmiGrid.triggerProcessWidth"]=!1}__previnit(){if(this.__elementTemplateRoot=this.__element.find(".TcHmi_Controls_System_TcHmiGrid-template"),0===this.__elementTemplateRoot.length&&(this.__elementTemplateRoot=this.__element.find(".tchmi-grid-template")),0===this.__elementTemplateRoot.length)throw new Error("Invalid Template.html");let e=this.__elementTemplateRoot[0].getElementsByClassName("TcHmi_Controls_System_TcHmiGrid-grid")[0];e?this.__elementGridcontainer=$(e):(this.__elementGridcontainer=$(document.createElement("div")),this.__elementGridcontainer[0].setAttribute("class","tchmi-box TcHmi_Controls_System_TcHmiGrid-grid tchmi-grid-grid"),this.__elementTemplateRoot[0].appendChild(this.__elementGridcontainer[0])),super.__previnit()}__init(){super.__init()}__attach(){super.__attach(),this.__onControlsMovedDestroyEvent=e.EventProvider.register("System.onControlsMoved",this.__onControlGeometryChanged),this.__onControlsResizedDestroyEvent=e.EventProvider.register("System.onControlsResized",this.__onControlGeometryChanged)}__detach(){super.__detach(),null!==this.__onControlsMovedDestroyEvent&&(this.__onControlsMovedDestroyEvent(),this.__onControlsMovedDestroyEvent=null),null!==this.__onControlsResizedDestroyEvent&&(this.__onControlsResizedDestroyEvent(),this.__onControlsResizedDestroyEvent=null)}destroy(){this.__keepAlive||(null!==this.__onControlGridRowIndexChangedDestroyEvent&&(this.__onControlGridRowIndexChangedDestroyEvent(),this.__onControlGridRowIndexChangedDestroyEvent=null),null!==this.__onControlGridColumnIndexChangedDestroyEvent&&(this.__onControlGridColumnIndexChangedDestroyEvent(),this.__onControlGridColumnIndexChangedDestroyEvent=null),null!==this.__onControlPositionParameterChangedDestroyEvent&&(this.__onControlPositionParameterChangedDestroyEvent(),this.__onControlPositionParameterChangedDestroyEvent=null),null!==this.__onControlSizeParameterChangedDestroyEvent&&(this.__onControlSizeParameterChangedDestroyEvent(),this.__onControlSizeParameterChangedDestroyEvent=null),super.destroy())}addChild(e,t){this.__addChild(e,t)}__addChild(e,t){super.__addChild(e,t),this.__correctGridPosition(e,t),this.__cacheWidthPerColumn=null,this.__cacheHeightPerRow=null,this.__cacheCellHeightPerRow=null}removeChild(e){this.__removeChild(e)}__removeChild(e){super.__removeChild(e),!0!==this.__isDestroyed&&(this.__cacheWidthPerColumn=null,this.__cacheHeightPerRow=null,this.__cacheCellHeightPerRow=null,this.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]=!0,this.__requestAsyncWork())}__doAsyncWork(){super.__doAsyncWork(),this.__isDestroyed||this.__isAttached&&(this.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]&&(this.__processColumnOptions(),this.__processRowOptions(),this.__processWidthAsync(),this.__asyncWorkData["System.TcHmiGrid.triggerProcessWidth"]=!1,this.__asyncWorkData["System.TcHmiGrid.triggerProcessHeight"]=!1),this.__asyncWorkData["System.TcHmiGrid.triggerRecheckHeight"]&&this.__rebuildCellHeightPerRowCache(),this.__asyncWorkData["System.TcHmiGrid.triggerProcessWidth"]&&(this.__processWidthAsync(),this.__asyncWorkData["System.TcHmiGrid.triggerProcessWidth"]=!1,this.__asyncWorkData["System.TcHmiGrid.triggerProcessHeight"]=!1),this.__asyncWorkData["System.TcHmiGrid.triggerProcessHeight"]&&(this.__processHeightAsync(),this.__asyncWorkData["System.TcHmiGrid.triggerProcessHeight"]=!1),this.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]=!1,this.__asyncWorkData["System.TcHmiGrid.triggerRecheckHeight"]=!1)}__rebuildCellHeightPerRowCache(){if(this.__columnOptions){let e=0;const t=this.__elementGridcontainer[0].firstElementChild.children;for(let i=0;i<t.length;i++){const n=t[i];0===n.offsetLeft&&0!==n.offsetWidth&&e++}if(e!==this.__cacheCellHeightPerRow)return this.__cacheCellHeightPerRow=e,this.__processHeight(),!0}return!1}getCellWrap(){return this.__cellWrap}setCellWrap(valueNew){let t=e.ValueConverter.toBoolean(valueNew);null===t&&(t=this.getAttributeDefaultValueInternal("CellWrap")),t!==this.__cellWrap&&(this.__cellWrap=t,e.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"CellWrap"}),this.__processCellWrap())}__processCellWrap(){const t=this.__elementGridcontainer[0].children;this.__cellWrap?e.StyleProvider.setSimpleElementStyle(t,"flex-wrap","wrap"):e.StyleProvider.setSimpleElementStyle(t,"flex-wrap",""),this.__processWidth()}
/**
                * Returns if inner widths depends on child controls.
                * @preserve (Part of the public API)
                */innerWidthDependsOnChilds(){if(this.__controlStretchedWidth)return!0;if(this.__columnOptions)for(const e of this.__columnOptions)if("Content"===e.widthMode)return!0;return super.innerWidthDependsOnChilds()}
/**
                * Updates the inner dimension depending on child controls.
                * @preserve (Part of the public API)
                */updateInnerWidthDependingOnChilds(){this.__cacheWidthPerColumn=null,this.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]=!0,this.__requestAsyncWork()}__processWidthMode(){this.__cacheWidthPerColumn=null,this.__cacheHeightPerRow=null,this.__cacheCellHeightPerRow=null,super.__processWidthMode()}
/**
                * Returns if inner heights depends on child controls.
                * @preserve (Part of the public API)
                */innerHeightDependsOnChilds(){if(this.__controlStretchedHeight)return!0;if(this.__rowOptions)for(const e of this.__rowOptions)if("Content"===e.heightMode)return!0;return super.innerHeightDependsOnChilds()}
/**
                * Updates the inner dimension depending on child controls.
                * @preserve (Part of the public API)
                */updateInnerHeightDependingOnChilds(){this.__cacheWidthPerColumn=null,this.__asyncWorkData["System.TcHmiGrid.triggerRebuildAll"]=!0,this.__asyncWorkData["System.TcHmiGrid.triggerRecheckHeight"]=!0,this.__requestAsyncWork()}__processHeightMode(){this.__cacheWidthPerColumn=null,this.__cacheHeightPerRow=null,this.__cacheCellHeightPerRow=null,super.__processHeightMode()}__recalculateRowCount(){if(!this.__rowOptions)return;const t=this.__elementGridcontainer[0].children;if(this.__rowOptions.length!==t.length){if(this.__rowOptions.length>t.length){this.__appendRows(this.__rowOptions.length-t.length)}else if(this.__rowOptions.length<t.length){const i=this.__removeRows(t.length-this.__rowOptions.length).children().children().children();for(let t=0,n=i.length;t<n;t++){const n=e.Controls.get(i[t].id);void 0!==n&&this.__correctGridPosition(n)}}e.EventProvider.raise("System.onControlGetRowCountChanged",this)}}__recalculateColumnCount(){if(!this.__columnOptions)return;let t=[],i=[];const n=this.__elementGridcontainer[0].children;for(let e=0,o=n.length;e<o;e++){const o=n[e],r=o.children;if(r.length===this.__columnOptions.length);else if(r.length<this.__columnOptions.length)t=t.concat(this.__createColumns(o));else if(r.length>this.__columnOptions.length)for(;r.length>this.__columnOptions.length;){const e=r[r.length-1];e.remove(),i.push(e)}}if(t.length>0)this.__correctAllGridPositions(),e.EventProvider.raise("System.onControlGetColumnCountChanged",this);else if(i.length>0){const t=[];i.forEach(e=>{for(let i=0;i<e.children.length;i++)for(let n=0;n<e.children[i].children.length;n++)t.push(e.children[i].children[n])});for(let i=0,n=t.length;i<n;i++){const n=e.Controls.get(t[i].id);void 0!==n&&this.__correctGridPosition(n)}e.EventProvider.raise("System.onControlGetColumnCountChanged",this)}}getRowOptions(){return this.__rowOptions}setRowOptions(valueNew){let t=e.ValueConverter.toObject(valueNew);if(null!==t&&0!==t.length||(t=this.getAttributeDefaultValueInternal("RowOptions")),!Array.isArray(t))return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.System.TcHmiGrid, Id="+this.getId()+", Attribute=RowOptions] Non array value ist not supported."));let i=this.__objectResolvers.get("rowOptions");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let n=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("rowOptions",{resolver:n,watchCallback:this.__onResolverForRowOptionsWatchCallback,watchDestroyer:n.watch(this.__onResolverForRowOptionsWatchCallback)})}__processRowOptions(){return this.__processSequenceOptions(1)}getColumnOptions(){return this.__columnOptions}setColumnOptions(valueNew){let t=e.ValueConverter.toObject(valueNew);if(null!==t&&0!==t.length||(t=this.getAttributeDefaultValueInternal("ColumnOptions")),!Array.isArray(t))return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.System.TcHmiGrid, Id="+this.getId()+", Attribute=ColumnOptions] Non array value ist not supported."));let i=this.__objectResolvers.get("columnOptions");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let n=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("columnOptions",{resolver:n,watchCallback:this.__onResolverForColumnOptionsWatchCallback,watchDestroyer:n.watch(this.__onResolverForColumnOptionsWatchCallback)})}__processColumnOptions(){return this.__recalculateColumnCount(),this.__processSequenceOptions(0)}getCellOptions(){return this.__cellOptions}setCellOptions(valueNew){let t=e.ValueConverter.toObject(valueNew);if(null!==t&&0!==t.length||(t=this.getAttributeDefaultValueInternal("CellOptions")),!Array.isArray(t))return void(TCHMI_CONSOLE_LOG_LEVEL>=1&&e.Log.error("[Source=Control, Module=TcHmi.Controls.System.TcHmiGrid, Id="+this.getId()+", Attribute=CellOptions] Non array value ist not supported."));let i=this.__objectResolvers.get("cellOptions");i&&(i.watchDestroyer&&i.watchDestroyer(),i.resolver.destroy());let n=new e.Symbol.ObjectResolver(t);this.__objectResolvers.set("cellOptions",{resolver:n,watchCallback:this.__onResolverForCellOptionsWatchCallback,watchDestroyer:n.watch(this.__onResolverForCellOptionsWatchCallback)})}__processCellOptions(){if(!this.__cellOptions)return;const t=this.__elementGridcontainer[0].children;for(let i=0;i<t.length;i++){const n=t[i].children;for(let t=0;t<n.length;t++){const o=n[t];let r=null,l=null,s=null,h=null,_={color:null,image:null,imageWidth:null,imageWidthUnit:"px",imageHeight:null,imageHeightUnit:"px",imageHorizontalAlignment:"Center",imageVerticalAlignment:"Center",imagePadding:null};for(const e of this.__cellOptions)if(e.columnIndex===t&&e.rowIndex===i){e.borderWidth&&(r=e.borderWidth),e.borderStyle&&(l=e.borderStyle),e.borderColor&&(s=e.borderColor),e.padding&&(h=e.padding),e.backgroundColor&&(_.color=e.backgroundColor),e.backgroundImage&&(_.image=e.backgroundImage),e.backgroundImagePadding&&(_.imagePadding=e.backgroundImagePadding),e.backgroundImageWidth&&(_.imageWidth=e.backgroundImageWidth),e.backgroundImageWidthUnit&&(_.imageWidthUnit=e.backgroundImageWidthUnit),e.backgroundImageHeight&&(_.imageHeight=e.backgroundImageHeight),e.backgroundImageHeightUnit&&(_.imageHeightUnit=e.backgroundImageHeightUnit),e.backgroundImageHorizontalAlignment&&(_.imageHorizontalAlignment=e.backgroundImageHorizontalAlignment),e.backgroundImageVerticalAlignment&&(_.imageVerticalAlignment=e.backgroundImageVerticalAlignment);break}e.StyleProvider.processBackground(o,_),e.StyleProvider.processBorderWidth(o,r),e.StyleProvider.processBorderStyle(o,l),e.StyleProvider.processBorderColor(o,s),e.StyleProvider.processContentPadding(o,h);const d=o.firstElementChild;h&&(h.right||h.left||h.top||h.bottom)?e.StyleProvider.setSimpleElementStyle(d,{height:"calc(100% - ("+(h.top||0)+(h.topUnit||"px")+") - ("+(h.bottom||0)+(h.bottomUnit||"px")+"))",width:"calc(100% - ("+(h.left||0)+(h.leftUnit||"px")+") - ("+(h.right||0)+(h.rightUnit||"px")+"))"}):e.StyleProvider.setSimpleElementStyle(d,{height:"",width:""})}}}__correctAllGridPositions(){for(const e of this.__children)this.__correctGridPosition(e)}__correctGridPosition(e,t=null){if(!this.__rowOptions||!this.__columnOptions)return;const i=e.getGridRowIndex(),n=e.getGridColumnIndex();if(void 0===i||void 0===n)return;let o;const r=this.__elementGridcontainer[0].children;if(o=i>=r.length?r[0]:r[i],!o)throw new Error("TcHmiGrid: Error finding Row "+i+"!");let l,s=o.children;if(l=n>=s.length?s[0]:s[n],!l)throw new Error("TcHmiGrid: Error finding Column "+n+"!");if(null!==t&&t>=0){let o=t;for(let t=0;t<this.__children.length;t++){const r=this.__children[t];if(r===e)break;let l=r.getGridRowIndex(),s=r.getGridColumnIndex();(void 0===l||l>=this.__rowOptions.length)&&(l=0),(void 0===s||s>=this.__columnOptions.length)&&(s=0),l>i?o--:l<i||s>n&&o--}if(0===o)l.firstElementChild.appendChild(e.getElement()[0]);else{const t=l.firstElementChild.children[o-1];t?t.after(e.getElement()[0]):l.firstElementChild.appendChild(e.getElement()[0])}}else l.firstElementChild.appendChild(e.getElement()[0])}__appendRows(t=1){let i=[];for(let e=1;e<=t;e++){const e=this.__elementGridcontainer[0].childElementCount,t=document.createElement("div");t.id=this.__id+"_row"+e,t.setAttribute("data-tchmi-row-index",e.toString()),t.setAttribute("class","tchmi-box TcHmi_Controls_System_TcHmiGrid-gridrow tchmi-grid-gridrow"),this.__elementGridcontainer[0].appendChild(t),i.push(t)}return this.__cellWrap?e.StyleProvider.setSimpleElementStyle(i,"flex-wrap","wrap"):e.StyleProvider.setSimpleElementStyle(i,"flex-wrap",""),i}__removeRows(e=1){return this.__elementGridcontainer.children().slice(-e).detach()}__createColumns(e){let t=[];for(;this.__columnOptions&&this.__columnOptions.length>e.childElementCount;)t.push(this.__createCell(e));return t}__createCell(e){const t=e.childElementCount,i=document.createElement("div");i.id=e.id+"_col"+t,i.setAttribute("data-tchmi-column-index",t.toString()),i.setAttribute("class","tchmi-box TcHmi_Controls_System_TcHmiGrid-gridcell tchmi-grid-gridcell");const n=document.createElement("div");return n.setAttribute("class","TcHmi_Controls_System_TcHmiGrid-cellpaddingmover tchmi-grid-cellpaddingmover"),i.appendChild(n),e.appendChild(i),i}__processSequenceOptions(t){if(!this.__rowOptions||!this.__columnOptions)return;let n,o="width",r="right";1===t?(o="height",r="bottom",n=this.__rowOptions.length):n=this.__columnOptions.length;let l=[],s=[],h=[];const _=this.__elementGridcontainer[0].children,d=[],c=[];for(let n=0;n<_.length;n++){const o=_[n].children,r=[],h=[];for(let n=0;n<o.length;n++){const l=o[n],s=l.firstElementChild.children;let _=0,g=0,m=0,u=0;if(1===t){const t=e.StyleProvider.getSimpleElementStyle(l,["border-top-width","border-width","padding-top","padding","padding-bottom","border-bottom-width"]);m+=i.__getPixelNumberInStyle(t,"border-top-width","border-width"),m+=i.__getPixelNumberInStyle(t,"padding-top","padding"),m+=i.__getPixelNumberInStyle(t,"padding-bottom","padding"),m+=i.__getPixelNumberInStyle(t,"border-bottom-width","border-width"),_=m}else{const t=e.StyleProvider.getSimpleElementStyle(l,["border-left-width","border-width","padding-left","padding","padding-right","border-right-width"]);u+=i.__getPixelNumberInStyle(t,"border-left-width","border-width"),u+=i.__getPixelNumberInStyle(t,"padding-left","padding"),u+=i.__getPixelNumberInStyle(t,"padding-right","padding"),u+=i.__getPixelNumberInStyle(t,"border-right-width","border-width"),g=u}let p="borderAndPadding";for(let i=0;i<s.length;i++){const n=s[i],o=e.Controls.get(n.id);if(void 0===o)continue;let r=0;if(1===t){let e=m;const t=o.getTop();null!=t&&("px"===o.getTopUnit()&&(e+=t),r++);const i=o.__getContentHeight();null!==i&&(e+=i,r++);const n=o.getBottom();null!=n&&2!==r&&"px"===o.getBottomUnit()&&(e+=n),e>_&&(_=e,p=o.getId())}else{let e=u;r=0;const t=o.getLeft();null!=t&&("px"===o.getLeftUnit()&&(e+=t),r++);const i=o.__getContentWidth();null!==i&&(e+=i,r++);const n=o.getRight();null!=n&&2!==r&&"px"===o.getRightUnit()&&(e+=n),e>g&&(g=e,p=o.getId())}}1===t?(r.push(_),h.push(p)):(void 0===d[n]&&(d[n]=[],c[n]=[]),d[n].push(g),c[n].push(p))}if(1===t){const e=Math.max.apply(null,r);0===e||e===1/0||e===-1/0||isNaN(e)?(l[n]=null,s[n]="unspecified"):(l[n]=e,s[n]=h[r.indexOf(e)])}}if(0===t)for(let e=0;e<this.__columnOptions.length;e++){let t=Math.max.apply(null,d[e]);0===t||t===1/0||t===-1/0||isNaN(t)?(l[e]=null,s[e]="unspecified"):(l[e]=t,s[e]=c[e][d[e].indexOf(t)])}this.__controlStretchedHeight=!1;const g=1===t?this.getRenderedHeight():this.getRenderedWidth(),m=1===t?this.getHeightMode():this.getWidthMode();for(let i=0;i<n;i++){let n=!1;h[i]=null;let r=[],d=[];const c=i.toString();if(1===t)for(let e=0;e<_.length;e++){const t=_[e];if(t.getAttribute("data-tchmi-row-index")===c){r.push(t);const e=t.children;for(let t=0;t<e.length;t++)d.push(e[t]);break}}else for(let e=0;e<_.length;e++){let t=_[e].children;for(let e=0;e<t.length;e++){let i=t[e];i.getAttribute("data-tchmi-column-index")===c&&d.push(i)}}let u="unspecified",p={},C={size:null,sizeUnit:"px",sizeMode:"Value",minSize:null,minSizeUnit:"px",maxSize:null,maxSizeUnit:"px",overflow:!1};1===t&&i<this.__rowOptions.length?(C.size=this.__rowOptions[i].height,C.sizeUnit=this.__rowOptions[i].heightUnit,C.sizeMode=this.__rowOptions[i].heightMode,C.minSize=this.__rowOptions[i].minHeight,C.minSizeUnit=this.__rowOptions[i].minHeightUnit,C.maxSize=this.__rowOptions[i].maxHeight,C.maxSizeUnit=this.__rowOptions[i].maxHeightUnit,C.overflow=this.__rowOptions[i].overflow):i<this.__columnOptions.length&&(C.size=this.__columnOptions[i].width,C.sizeUnit=this.__columnOptions[i].widthUnit,C.sizeMode=this.__columnOptions[i].widthMode,C.minSize=this.__columnOptions[i].minWidth,C.minSizeUnit=this.__columnOptions[i].minWidthUnit,C.maxSize=this.__columnOptions[i].maxWidth,C.maxSizeUnit=this.__columnOptions[i].maxWidthUnit,C.overflow=this.__columnOptions[i].overflow),"Content"===C.sizeMode?("number"==typeof l[i]?(p[o]=l[i]+"px",u=s[i],h[i]=l[i]):(p[o]="0px",u="zeroPixel",h[i]=0),1===t&&r.length?e.StyleProvider.setSimpleElementStyle(r,{height:"","flex-grow":"","-webkit-flex-grow":"","flex-basis":"","-webkit-flex-basis":""}):(p["flex-grow"]="",p["-webkit-flex-grow"]="",p["flex-basis"]="",p["-webkit-flex-basis"]="")):"number"==typeof C.size?"px"===C.sizeUnit?(n=!0,1===t&&r.length?(p[o]=C.size+C.sizeUnit,u="fixedPixelSize",h[i]=C.size,e.StyleProvider.setSimpleElementStyle(r,{height:"","flex-grow":"","-webkit-flex-grow":"","flex-basis":"","-webkit-flex-basis":""})):(p[o]=C.size+C.sizeUnit,u="fixedPixelSize",h[i]=C.size,p["flex-grow"]="",p["-webkit-flex-grow"]="",p["flex-basis"]="",p["-webkit-flex-basis"]="")):"%"===C.sizeUnit?(n=!0,1===t&&r.length?(p[o]="",u="fixedPercentSize",e.StyleProvider.setSimpleElementStyle(r,{height:C.size+C.sizeUnit,"flex-grow":"","-webkit-flex-grow":"","flex-basis":"","-webkit-flex-basis":""})):(p[o]=C.size+C.sizeUnit,u="fixedPercentSize",p["flex-grow"]="",p["-webkit-flex-grow"]="",p["flex-basis"]="",p["-webkit-flex-basis"]="")):1===t&&r.length?(p[o]="",u="factorSize",e.StyleProvider.setSimpleElementStyle(r,{height:"","flex-grow":C.size.toString(),"-webkit-flex-grow":C.size.toString(),"flex-basis":"0","-webkit-flex-basis":"0"})):(p[o]="",u="factorSize",p["flex-grow"]=C.size.toString(),p["-webkit-flex-grow"]=C.size.toString(),p["flex-basis"]="0",p["-webkit-flex-basis"]="0"):1===t&&r.length?(p[o]="",u="factorSizeAsFallback",e.StyleProvider.setSimpleElementStyle(r,{height:"","flex-grow":"1","-webkit-flex-grow":"1","flex-basis":"0","-webkit-flex-basis":"0"})):(p[o]="",u="factorSizeAsFallback",p["flex-grow"]="1",p["-webkit-flex-grow"]="1",p["flex-basis"]="0",p["-webkit-flex-basis"]="0");let y=1/0;if("number"==typeof C.maxSize?("px"===C.maxSizeUnit&&(null===h[i]||h[i]>C.maxSize)&&(h[i]=C.maxSize,y=C.maxSize),1===t&&r.length?e.StyleProvider.setSimpleElementStyle(r,"max-height",C.maxSize+(C.maxSizeUnit||"px")):p["max-"+o]=C.maxSize+(C.maxSizeUnit||"px")):1===t&&r.length?e.StyleProvider.setSimpleElementStyle(r,"max-height",""):p["max-"+o]="","number"==typeof C.minSize)"px"===C.minSizeUnit&&(null===h[i]||h[i]<C.minSize)&&(h[i]=C.minSize),1===t&&r.length?e.StyleProvider.setSimpleElementStyle(r,"min-height",C.minSize+(C.minSizeUnit||"px")):p["min-"+o]=C.minSize+(C.minSizeUnit||"px");else{let _="";if("number"==typeof l[i]&&0!==l[i]&&"Content"!==C.sizeMode){if(y===1/0&&"Content"!==m){let e=g;if(e){for(let t=0;t<i;t++)null!==h[t]&&(e-=h[t]);y=e}}!1===n&&l[i]<y?(_=l[i]+"px",u+="+influenced-by_"+s[i],(null===h[i]||h[i]<l[i])&&(h[i]=l[i]),1===t?this.__controlStretchedHeight=!0:this.__controlStretchedWidth=!0):_=""}else _="";1===t&&r.length?e.StyleProvider.setSimpleElementStyle(r,"min-height",_):p["min-"+o]=_}void 0!==C.overflow&&null!==C.overflow&&!0===C.overflow?p["overflow-"+(1===t?"y":"x")]="":p["overflow-"+(1===t?"y":"x")]="hidden",e.StyleProvider.setSimpleElementStyle(d,p);for(let e=0;e<d.length;e++)d[e].setAttribute("data-tchmi-grid-calculation-base-"+o,u)}1===t?tchmi_equal(this.__cacheHeightPerRow,h)||(e.EventProvider.raise("System.onGridCellResized",this),this.__cacheHeightPerRow=h):tchmi_equal(this.__cacheWidthPerColumn,h)||(e.EventProvider.raise("System.onGridCellResized",this),this.__cacheWidthPerColumn=h)}__getContentWidth(){if("Collapsed"===this.__visibility)return null;let e=null;if("Content"!==this.getWidthMode())return super.__getContentWidth();if(null===this.__cacheWidthPerColumn&&this.__processColumnOptions(),null===this.__cacheWidthPerColumn)return null;for(const t of this.__cacheWidthPerColumn)null!==t&&(null===e?e=t:e+=t);const t=window.getComputedStyle(this.__element[0]),i=parseFloat(t.borderLeftWidth||"");0===i||isNaN(i)||(null===e?e=i:e+=i);const n=parseFloat(t.borderRightWidth||"");return 0===n||isNaN(n)||(null===e?e=n:e+=n),e}__getContentHeight(){if("Collapsed"===this.__visibility)return null;let e=null;if("Content"!==this.getHeightMode())return super.__getContentHeight();if(null===this.__cacheHeightPerRow&&this.__processRowOptions(),null===this.__cacheCellHeightPerRow&&this.__rebuildCellHeightPerRowCache(),null===this.__cacheCellHeightPerRow||null===this.__cacheHeightPerRow)return null;for(const t of this.__cacheHeightPerRow)null!==t&&(null===e?e=t*this.__cacheCellHeightPerRow:e+=t*this.__cacheCellHeightPerRow);const t=window.getComputedStyle(this.__element[0]),i=parseFloat(t.borderTopWidth||"");0===i||isNaN(i)||(null===e?e=i:e+=i);const n=parseFloat(t.borderBottomWidth||"");return 0===n||isNaN(n)||(null===e?e=n:e+=n),e}__processHeight(callerControl){if(!this.__rowOptions)return;let e="Value";if(this.innerHeightDependsOnChilds())e="Content";else for(const t of this.__rowOptions)if("Content"===t.heightMode){e="Content";break}"Content"===e?(callerControl&&(this.__cacheHeightPerRow=null,this.__cacheCellHeightPerRow=null),this.__asyncWorkData["System.TcHmiGrid.triggerProcessHeight"]=!0,this.__requestAsyncWork()):super.__processHeight()}__processHeightAsync(){if(!this.__rowOptions)return;let e="Value";if(this.innerHeightDependsOnChilds())e="Content";else for(const t of this.__rowOptions)if("Content"===t.heightMode){e="Content";break}if("Content"===e){let e=!1;for(let t=0;t<this.__rowOptions.length;t++){if(!(t<this.__rowOptions.length)){e=!0;break}{const i=this.__rowOptions[t];if("Content"!==i.heightMode&&"px"!==i.heightUnit){e=!0;break}}}if(this.__intHeight=null,e&&!this.innerHeightDependsOnChilds())null!==this.__height&&void 0!==this.__height&&void 0!==this.__heightUnit?this.__intHeight=this.__height+this.__heightUnit:this.__intHeight=null;else{const e=this.__getContentHeight();null!==e&&(this.__intHeight=e+"px")}t.TcHmiControl.prototype.__processHeight.call(this)}else super.__processHeight()}__processWidth(callerControl){if(!this.__columnOptions)return;let e="Value";if(this.innerWidthDependsOnChilds())e="Content";else for(const t of this.__columnOptions)if("Content"===t.widthMode){e="Content";break}"Content"===e?(callerControl&&(this.__cacheWidthPerColumn=null),this.__asyncWorkData["System.TcHmiGrid.triggerProcessWidth"]=!0,this.__requestAsyncWork()):super.__processWidth()}__processWidthAsync(){if(!this.__columnOptions)return;let i="Value";if(this.innerWidthDependsOnChilds())i="Content";else for(const e of this.__columnOptions)if("Content"===e.widthMode){i="Content";break}if("Content"===i){let i=!1;for(let e=0;e<this.__columnOptions.length;e++){if(!(e<this.__columnOptions.length)){i=!0;break}{const t=this.__columnOptions[e];if("Content"!==t.widthMode&&"px"!==t.widthUnit){i=!0;break}}}let n=null;if(i&&!this.innerWidthDependsOnChilds())n=null!==this.__width&&void 0!==this.__width&&void 0!==this.__widthUnit?this.__width+this.__widthUnit:null;else{const e=this.__getContentWidth();null!==e&&(n=e+"px")}e.StyleProvider.setSimpleElementStyle(this.__element,"width",n),t.TcHmiControl.prototype.__processWidth.call(this)}else super.__processWidth();this.__processHeightAsync()}static __getPixelNumberInStyle(e,t,i){if(e[t]&&-1!==e[t].indexOf("px"))return parseFloat(e[t]);if(void 0!==i&&e[i]&&-1!==e[i].indexOf("px")){const n=e[i].split(" ");switch(n.length){case 1:return parseFloat(n[0]);case 2:return-1!==t.indexOf("top")||-1!==t.indexOf("bottom")?parseFloat(n[0]):parseFloat(n[1]);case 3:return-1!==t.indexOf("top")?parseFloat(n[0]):-1!==t.indexOf("right")||-1!==t.indexOf("left")?parseFloat(n[1]):parseFloat(n[2]);case 4:return-1!==t.indexOf("top")?parseFloat(n[0]):-1!==t.indexOf("right")?parseFloat(n[1]):-1!==t.indexOf("bottom")?parseFloat(n[2]):parseFloat(n[3])}}return 0}}t.TcHmiGrid=i}(i=t.System||(t.System={})),t.registerEx("TcHmiGrid","TcHmi.Controls.System",e.Controls.System.TcHmiGrid)}(t=e.Controls||(e.Controls={}))}(TcHmi||(TcHmi={}));